(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{167:function(e,t,a){e.exports=a(391)},391:function(e,t,a){"use strict";a.r(t);var r,n,c=a(0),l=a.n(c),s=a(162),i=a.n(s),o=a(4),u=a(37),m=a(1),p=a.n(m),d=a(3),f=a(2),h={home:"https://crowdai-slr-api-dev.herokuapp.com/",search:"search",scopus_search:"search-scopus",search_similar:"search/similar",search_automated:"search/automated",projects:"projects",papers:"papers",customPapers:"customPapers",filters:"filters",auto_screening:"screenings/automated",screenings:"screenings",votes:"votes",userLogin:"auth/login",userInfo:"https://www.googleapis.com/oauth2/v3/tokeninfo",userLogout:"auth/logout",menu_list:[{id:4,content:"Home",link:"/"},{id:5,content:"My Projects",link:"/projects"},{id:6,content:"My Screenings",link:"/screenings"}],max_total_number_for_results:5e3,pdf_parse_server:"upload/pdf",csv_parse_server:"upload/csv",google_login_client_id:"282160526683-84sdnoqh3bc1obojfpepcbonnfg3uks4.apps.googleusercontent.com"},b=1e4,E=window.localStorage;function g(e,t,a){return v.apply(this,arguments)}function v(){return(v=Object(d.a)(p.a.mark(function e(t,a,c){var l,s,i,o,u,m;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new AbortController,l=r.signal,n=0,s=Object.assign({mode:"cors",signal:l},a),i=setTimeout(function(){return r.abort(),void(n=2)},c),e.next=8,fetch(t,s);case 8:return o=e.sent,clearTimeout(i),e.next=12,k(o);case 12:return u=e.sent,O(o,u),e.abrupt("return",u);case 17:if(e.prev=17,e.t0=e.catch(0),2!==n){e.next=25;break}return(m=new Error("Error: Time out to get response from backend")).name="timeout",e.abrupt("return",m);case 25:if(1!==n){e.next=27;break}return e.abrupt("return",null);case 27:return e.abrupt("return",e.t0);case 28:case"end":return e.stop()}},e,null,[[0,17]])}))).apply(this,arguments)}function y(){return(y=Object(d.a)(p.a.mark(function e(t){var a,r,n,c,l,s=arguments;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]?s[1]:"",r="",""!==a){for(n in r="?",a)r+=n+"="+encodeURIComponent(a[n])+"&";r=r.slice(0,r.length-1)}return(c=new Headers).append("Accept","application/json"),c.append("Content-Type","application/json;charset=UTF-8"),c.append("Authorization",E.getItem("userToken")),l={method:"GET",headers:c},e.next=10,g(t+r,l,b);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function x(){return(x=Object(d.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Headers).append("Authorization",E.getItem("userToken")),r={method:"DELETE",headers:a},e.next=5,g(t,r,b);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(){return(j=Object(d.a)(p.a.mark(function e(t){var a,r,n,c,l=arguments;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:"",(r=new Headers).append("Accept","application/json, text/plain, */*"),r.append("Cache-Control","no-cache"),r.append("Content-Type","application/json;charset=UTF-8"),r.append("Authorization",E.getItem("userToken")),n=JSON.stringify(a,null,2),c={method:"POST",headers:r,body:n},e.next=10,g(t,c,b);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(){return(w=Object(d.a)(p.a.mark(function e(t){var a,r,n,c=arguments;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"",1e4,(r=new Headers).append("Accept","application/json, text/plain, */*"),r.append("Cache-Control","no-cache"),r.append("Authorization",E.getItem("userToken")),n={method:"POST",headers:r,body:a},e.next=9,g(t,n,1e4);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(){return(N=Object(d.a)(p.a.mark(function e(t){var a,r,n,c,l=arguments;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:"",(r=new Headers).append("Accept","application/json, text/plain, */*"),r.append("Cache-Control","no-cache"),r.append("Content-Type","application/json;charset=UTF-8"),r.append("Authorization",E.getItem("userToken")),n=JSON.stringify(a,null,2),c={method:"PUT",headers:r,body:n},e.next=10,g(t,c,b);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e,t){if(e.status<200||e.status>=300){var a=new Error(e.statusText);throw a.data=e,t.payload&&(a.payload=t.payload),a}}function k(e){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.headers.get("Content-Type"),r=null,null==a){e.next=21;break}if(!(a.indexOf("text")>-1)){e.next=7;break}return e.next=6,t.text();case 6:r=e.sent;case 7:if(!(a.indexOf("form")>-1)){e.next=11;break}return e.next=10,t.formData();case 10:r=e.sent;case 11:if(!(a.indexOf("video")>-1)){e.next=15;break}return e.next=14,t.blob();case 14:r=e.sent;case 15:if(!(a.indexOf("json")>-1)){e.next=19;break}return e.next=18,t.json();case 18:r=e.sent;case 19:e.next=25;break;case 21:if(null==t){e.next=25;break}return e.next=24,t.text();case 24:r=e.sent;case 25:return e.abrupt("return",r);case 26:case"end":return e.stop()}},e)}))).apply(this,arguments)}var _={get:function(e){return y.apply(this,arguments)},post:function(e){return j.apply(this,arguments)},delete:function(e){return x.apply(this,arguments)},put:function(e){return N.apply(this,arguments)},postFile:function(e){return w.apply(this,arguments)},abortRequest:function(){r.abort(),n=1,console.log("abort")}};function C(){return(C=Object(d.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.userLogin,e.next=3,_.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function F(){return(F=Object(d.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.userInfo,e.next=3,_.get(a,{id_token:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(){return(P=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.home+h.userLogout,e.next=3,_.get(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var I={postTokenId:function(e){return C.apply(this,arguments)},getUserByTokenId:function(e){return F.apply(this,arguments)},logoutUser:function(){return P.apply(this,arguments)}},T=Object(u.f)(function(e){var t=Object(c.useState)(!0),a=Object(f.a)(t,2),r=a[0],n=a[1],s=Object(c.useContext)(L),i=e.history,o=e.location;Object(c.useEffect)(function(){r?(console.log("error mountes"),n(!1)):s.setError(null)},[o.pathname]),Object(c.useEffect)(function(){try{if(console.log(s.error.payload.statusCode),401===s.error.payload.statusCode||"the token does not match any user!"===s.error.payload.message){console.log("unauth call");var e=window.localStorage;if(e.getItem("userToken")){var t=function(){var t=Object(d.a)(p.a.mark(function t(){var a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.getUserByTokenId(e.getItem("userToken"));case 2:(a=t.sent)&&a.message?(console.log("INVALID TOKEN"),e.removeItem("userToken"),s.setUser(null)):console.log("VALID TOKEN");case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();console.log("checking token"),t()}console.log("pushing back"),i.goBack()}}catch(a){console.log("YOU MAY NEED TO CHANGE THE HOME URL PARAMETER FROM 'config/index.js'")}return function(){s.setError(null)}},[]);var u=l.a.createElement(l.a.Fragment,null);return u=s.error.payload?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Error code:"),l.a.createElement("p",null,s.error.payload.statusCode),l.a.createElement("p",null,"Error name:"),l.a.createElement("p",null,s.error.payload.error),l.a.createElement("p",null,"Error message"),l.a.createElement("p",null,s.error.payload.message)):l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Error name:"),l.a.createElement("p",null,s.error.name),l.a.createElement("p",null,"Error message"),l.a.createElement("p",null,s.error.message)),u=l.a.createElement("div",{className:"error-wrapper",style:{textAlign:"center"}},u,l.a.createElement("br",null),l.a.createElement("button",{type:"button",onClick:function(){i.goBack(),s.setError(null)}},l.a.createElement("u",null,"return to previous page")),l.a.createElement("br",null),l.a.createElement("p",null,"or"),l.a.createElement("br",null),l.a.createElement("button",{type:"button",onClick:function(){s.setError(null)}},l.a.createElement("u",null,"refresh")))}),L=l.a.createContext(),B=function(e){var t=Object(c.useState)(null),a=Object(f.a)(t,2),r=a[0],n=a[1],s=Object(c.useState)(!0),i=Object(f.a)(s,2),o=i[0],u=i[1],m=Object(c.useState)(null),h=Object(f.a)(m,2),b=h[0],E=h[1],g=Object(c.useState)(l.a.createElement("div",{className:"nav-elements"}," ",l.a.createElement("h2",{className:"static-title"},"HOME")," ")),v=Object(f.a)(g,2),y=v[0],x=v[1],j=Object(c.useState)(void 0),w=Object(f.a)(j,2),N=w[0],O=w[1],k=Object(c.useState)(""),S=Object(f.a)(k,2),_=S[0],C=S[1],F={user:r,setUser:n,userFetch:o,setUserFetch:u,error:b,setError:E,title:y,setTitle:x,notificationMessage:N,setNotificationMessage:O,projectName:_,setProjectName:C};return Object(c.useEffect)(function(){var t=window.localStorage;t.getItem("userToken")?function(){var e=Object(d.a)(p.a.mark(function e(){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getUserByTokenId(t.getItem("userToken"));case 2:(a=e.sent)&&a.message||!a.email?t.removeItem("userToken"):(r={email:a.email,name:a.given_name,surname:a.family_name,image:a.picture},n(r)),u(!1);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()():e.testing?(n({email:"gmail@gmail",name:"bob",surname:"man",image:"invalid"}),O("this is a test!"),u(!1)):u(!1)},[]),b?l.a.createElement(L.Provider,{value:F},l.a.createElement(T,null)):l.a.createElement(L.Provider,{value:F},e.children)},M=Object(u.f)(function(e){var t=Object(c.useContext)(L);Object(c.useEffect)(function(){t.setTitle(l.a.createElement("div",{className:"nav-elements"}," ",l.a.createElement("h2",{className:"static-title"},"HOME")," "))},[]);var a=e.history,r=e.location;return Object(c.useEffect)(function(){t.user||a.push("/")},[r.pathname]),l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Systematic Literature Review manager"),l.a.createElement("h2",{style:{fontSize:22,fontWeight:"normal"}},"the system right now allows you to"),l.a.createElement("ul",{style:{fontSize:18,fontWeight:"lighter"}},l.a.createElement("li",null,"browse and manage a list of prjects"),l.a.createElement("li",null,"browse the list of papers on a project"),l.a.createElement("li",null,"search(from Scopus or arXiv) and add papers to a project"),l.a.createElement("li",null,"add custom papers based on a file or form data"),l.a.createElement("li",null,"'fake search' similar papers or relevant papers"),l.a.createElement("li",null,"select collaborators and screeners"),l.a.createElement("li",null,"browse and manage a list of screenings"),l.a.createElement("li",null,"screen project papers")),l.a.createElement("h2",{style:{fontSize:22,fontWeight:"normal"}},"notes"),l.a.createElement("ul",{style:{fontSize:18,fontWeight:"lighter"}},l.a.createElement("li",null,l.a.createElement("i",null,"the scopus search works partially(can't retrieve the description)"),l.a.createElement("ul",null,l.a.createElement("li",{style:{fontSize:16}},l.a.createElement("i",null,'from Elsevier developer portal : "The data available depends on your institutional subscriptions, and only when you\'re making calls from within your institutional network are you considered a subscriber"')))),l.a.createElement("li",null,l.a.createElement("i",null,"the options don't affect the search, for now"))))}),R=a(7);function A(){return(A=Object(d.a)(p.a.mark(function e(){var t,a,r,n=arguments;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",a=h.home+h.projects,e.next=4,_.get(a,t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(){return(D=Object(d.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.projects+"/"+t,e.next=3,_.get(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function X(){return(X=Object(d.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.projects+"/"+t+"/collaborators",e.next=3,_.get(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function q(){return(q=Object(d.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.projects+"/"+t+"/screeners",e.next=3,_.get(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(){return(H=Object(d.a)(p.a.mark(function e(t,a){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.home+h.projects+"/"+t+"/screeners",e.next=3,_.post(r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(){return(z=Object(d.a)(p.a.mark(function e(t,a){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.home+h.projects+"/"+t+"/screeners",e.next=3,_.put(r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function U(){return(U=Object(d.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.projects,e.next=3,_.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function V(){return(V=Object(d.a)(p.a.mark(function e(t,a){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.home+h.projects+"/"+t+"/collaborators",e.next=3,_.post(r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function G(){return(G=Object(d.a)(p.a.mark(function e(t,a){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.home+h.projects+"/"+t,e.next=3,_.put(r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function J(){return(J=Object(d.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.projects+"/"+t,e.next=3,_.delete(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Y(){return(Y=Object(d.a)(p.a.mark(function e(t,a){var r,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.home+h.projects+"/"+t+"/collaborators/"+a,e.next=3,_.delete(r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var K={getProjectsList:function(){return A.apply(this,arguments)},getProject:function(e){return D.apply(this,arguments)},postProject:function(e){return U.apply(this,arguments)},putProject:function(e,t){return G.apply(this,arguments)},deleteProject:function(e){return J.apply(this,arguments)},abortRequest:_.abortRequest,getProjectCollaborators:function(e){return X.apply(this,arguments)},getProjectScreeners:function(e){return q.apply(this,arguments)},postProjectManualScreeningData:function(e,t){return H.apply(this,arguments)},putProjectManualScreeningData:function(e,t){return z.apply(this,arguments)},removeProjectCollaborator:function(e,t){return Y.apply(this,arguments)},addProjectCollaborator:function(e,t){return V.apply(this,arguments)}},W=function(e){return l.a.createElement("svg",{id:"loading-icon",className:e.class,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("g",null,l.a.createElement("path",{id:"loading-circle1",d:" M 500, 500 m -160, 0 a 160,160 0 1,0 320,0 a 160,160 0 1,0 -320,0 "}),l.a.createElement("path",{id:"loading-circle2",d:" M 500, 500 m -305, 0 a 305,305 0 1,0 610,0 a 305,305 0 1,0 -610,0 "})))},$=a(5),Z=function(e){return l.a.createElement("svg",{id:"close-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("line",{className:"ln",x1:"134",y1:"866",x2:"866",y2:"134"}),l.a.createElement("line",{className:"ln",x1:"134",y1:"134",x2:"866",y2:"866"}))};var Q=function(e){var t=Object(c.useRef)(!1),r=a(54),n=r.object().shape({name:r.string().required("please enter a title"),description:r.string().required("please enter a description")}),s=Object(c.useContext)(L);return Object(c.useEffect)(function(){return t.current=!0,function(){t.current=!1}},[]),l.a.createElement(l.a.Fragment,null,l.a.createElement($.c,{initialValues:{name:"",description:""},validationSchema:n,onSubmit:function(){var a=Object(d.a)(p.a.mark(function a(r,n){var c,l,i;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=n.setSubmitting,l={name:r.name,description:r.description},a.next=4,K.postProject(l);case 4:i=a.sent,t.current&&i.message?s.setError(i):t.current&&e.history.push("/projects/"+i.id),t.current&&c(!1);case 7:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}(),validateOnBlur:!1},function(t){var a=t.errors,r=t.touched,n=t.isSubmitting,c=t.isValid,s=(t.setErrors,t.validateField),i=t.handleChange;return l.a.createElement($.b,{className:"modal floating-form add-project",style:{visibility:e.visibility?"":"hidden"}},l.a.createElement("button",{type:"button",className:"close-btn",onClick:function(t){e.setVisibility(!e.visibility)}},l.a.createElement(Z,null)),l.a.createElement($.a,{style:{borderBottom:a.name&&r.name?"solid 1px #d81e1e":""},name:"name",type:"text",placeholder:"Please enter a project title",onChange:function(e){i(e),s("name")}}),l.a.createElement("br",null),l.a.createElement($.a,{style:{borderBottom:a.description&&r.description?"solid 1px #d81e1e":""},name:"description",component:"textarea",placeholder:"Please describe the topic and focus of this new project"}),l.a.createElement("br",null),l.a.createElement("button",{type:"submit",disabled:n||!c},"Add Project"))}))};var ee=function(e){var t=e.start,a=e.count,r=e.totalResults,n=e.path;r>h.max_total_number_for_results&&(r=h.max_total_number_for_results),n=function(e){var t=window.location.href.split("?")[1];if(t){t=t.split("#")[0];for(var a="",r=t.split("&"),n=0;n<r.length;n++){var c=r[n].split("=")[0];"start"!==c&&"count"!==c&&(a+=r[n]+"&")}e=e+"?"+a}else e+="?";return e}(n);var c="",s="",i="",u="",m=[],p=Math.floor(t/a)+1,d=Math.ceil(r/a);if(d>1){p>1&&(c=l.a.createElement("li",null,l.a.createElement(o.b,{className:"prev-page",to:n+"start="+((p-1)*a>0?(p-2)*a:0)+"&count="+a},"<"))),p<d&&(s=l.a.createElement("li",null,l.a.createElement(o.b,{className:"next-page",to:n+"start="+p*a+"&count="+a},">"))),p>6&&(i=l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement(o.b,{className:"first-page",to:n+"start=0&count="+a},"1")),l.a.createElement("li",null,l.a.createElement("span",null,"...")))),p<d-5&&(u=l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement("span",null,"...")),l.a.createElement("li",null,l.a.createElement(o.b,{style:{display:"inline-block"},className:"last-page",to:n+"start="+(d-1)*a+"&count="+a},d))));for(var f=p-4;f<=p+4;f++)f>0&&f<=d&&(f!==p?m.push(l.a.createElement(o.b,{className:"normal-page",to:n+"start="+(f-1)*a+"&count="+a},f)):m.push(l.a.createElement("span",{className:"current-page"},p)))}return l.a.createElement("ul",{className:"pagination"},c,i,m.map(function(e,t){return l.a.createElement("li",{style:{display:"inline-block",margin:10},key:t},e)}),u,s)},te=function(e){var t=e.cls,a=e.handler;return l.a.createElement("div",{className:"cover "+t,onClick:function(e){a(!1)}})},ae=function(e){return l.a.createElement("svg",{version:"1.1",id:"empty-folder",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("g",null,l.a.createElement("g",null,l.a.createElement("path",{className:"st0-empty-folder",d:"M967.9,448.6v260c0,15.1-12.2,27.3-27.3,27.3H59.4c-15.1,0-27.3-12.2-27.3-27.3v-260c0-0.3,0-0.7,0-1 c0-0.2,0-0.4,0.1-0.6c0-0.2,0-0.4,0.1-0.7c0-0.2,0.1-0.4,0.1-0.6c0-0.3,0.1-0.6,0.2-1c0.6-2.4,1.7-4.7,3.5-6.8l141.3-168.3 c2.9-3.4,7.1-5.4,11.6-5.4h89.1c8.5,0,15.9,5.4,18.5,13.5l11.4,35.1c6.3,19.3,24.3,32.4,44.7,32.4h294.4 c20.3,0,38.4-13.1,44.7-32.4l11.4-35.1c2.6-8,10.1-13.5,18.5-13.5h89.1c4.5,0,8.8,2,11.6,5.4l141.3,168.3c1.8,2.1,2.9,4.4,3.5,6.8 c0.1,0.3,0.2,0.6,0.2,1c0,0.2,0.1,0.4,0.1,0.6s0.1,0.5,0.1,0.7s0.1,0.4,0.1,0.6C967.8,447.9,967.9,448.2,967.9,448.6z"}),l.a.createElement("path",{d:"M974.9,448.6c0.1,31-0.8,62-1.4,93c-0.2,7.8-0.3,15.5-0.4,23.3c-0.1,7.8-0.1,15.5-0.2,23.3v46.5v46.5v23.3v2.9 c0,0.5,0,0.9,0,1.5l-0.1,1.7c0,1.1-0.2,2.3-0.4,3.4c-0.1,1.1-0.5,2.2-0.7,3.4c-1.2,4.4-3.4,8.6-6.4,12.1s-6.7,6.4-10.8,8.3 c-4.1,2-8.7,3.1-13.3,3.1l-23.3,0.1l-46.5,0.1l-372.1,1.1L127,742.9L80.5,743H68.9h-5.8h-2.9h-0.7h-0.9l-1.8-0.1 c-4.9-0.4-9.7-1.8-14-4.2s-8-5.7-11-9.6c-2.9-3.9-5-8.5-6.1-13.3c-0.3-1.2-0.4-2.4-0.6-3.6c-0.1-1.2-0.1-2.4-0.2-3.7v-5.8v-23.3 L24.8,633v-93l0.2-46.5l0.1-23.3l0.1-11.6v-5.8v-2.9c0-0.5,0-0.9,0-1.5v-0.9c0,0,0-0.6,0.1-0.9c0-0.3,0.1-0.7,0.1-1l-0.1,1.4 c0-0.5,0.1-1,0.1-1.5l0.1-0.6l0.1-0.6l-0.1,0.5l0.2-1c0.1-0.3,0.2-0.7,0.2-1c0.1-0.5,0.3-1.1,0.5-1.6c0.4-1.1,0.8-2.1,1.3-3.1 s1.1-1.9,1.7-2.8c0.3-0.4,0.6-0.9,1-1.3l0.9-1l6.1-7.1l12.1-14.3L73.6,383l48.4-57l48.5-56.9l1.5-1.8l0.8-0.9l0.4-0.5l0.5-0.6 c1.4-1.6,3.1-2.9,5-4c1.8-1.1,3.9-1.8,5.9-2.3c1-0.2,2.1-0.4,3.2-0.4c0.3,0,0.5,0,0.8,0h0.7h1.2l18.7,0.1l37.4,0.3l18.7,0.1 l9.4,0.1h2.3h1.2l1.4,0.1c1.9,0.1,3.9,0.4,5.7,1c3.7,1.1,7.1,3.2,9.9,6c1.4,1.4,2.6,2.9,3.6,4.6s1.8,3.4,2.4,5.3l5.7,17.8 l5.7,17.8c1.8,5.3,4.6,10.3,8.3,14.6c7.4,8.5,18.3,13.9,29.7,14.5l2.1,0.1h2.3h4.7h9.4l18.7,0.1l37.4,0.1l74.8,0.1l74.8-0.1 l37.4-0.1l18.7-0.1h9.4h4.7h2.3l2.1-0.1c11.3-0.5,22.2-6,29.6-14.5c3.7-4.2,6.5-9.2,8.3-14.5l5.7-17.8l5.6-17.8 c0.6-1.9,1.4-3.6,2.4-5.3c1-1.7,2.3-3.2,3.6-4.6c2.8-2.8,6.2-4.9,10-6c1.9-0.6,3.8-0.9,5.8-1.1l1.5-0.1h1.2h2.3l9.4-0.1l18.7-0.1 l37.4-0.3l18.7-0.1h1.2h0.7c0.3,0,0.5,0,0.8,0c1.1,0.1,2.2,0.2,3.2,0.4c2.1,0.5,4.2,1.2,6,2.3c1.9,1.1,3.6,2.4,5.1,4l0.5,0.6 l0.4,0.5l0.8,0.9l1.5,1.8l48.5,56.9l48.4,57.1l24.1,28.6l12.1,14.3l6,7.1l0.9,1.1c0.3,0.4,0.7,0.9,1,1.3c0.6,0.9,1.2,1.8,1.7,2.8 s0.9,2,1.3,3.1c0.2,0.5,0.3,1.1,0.5,1.6c0.1,0.2,0.1,0.6,0.2,1l0.2,1l-0.1-0.5l0.1,0.6l0.1,0.6c0.1,0.5,0.1,1,0.1,1.5l-0.1-1.4 c0.1,0.4,0.1,0.8,0.2,1.2v0.6v0.3L974.9,448.6z M960.8,448.6v-0.7v-0.2c0,0.1,0,0.1,0,0.2s0,0.2,0.1,0.4l-0.1-1.4 c0,0.1,0,0.2,0,0.2l0,0V447l-0.1-0.5l0,0v-0.1c0,0,0,0,0-0.2c-0.1-0.3-0.1-0.4-0.2-0.6c-0.1-0.4-0.3-0.8-0.5-1.2 c-0.2-0.4-0.4-0.8-0.7-1.2c-0.1-0.2-0.3-0.4-0.4-0.6l-0.6-0.7l-6-7.2l-12-14.4l-24-28.7l-47.8-57.5l-47.7-57.6l-2.8-3.4 c-0.6-0.7-1.4-1.3-2.2-1.8s-1.7-0.8-2.6-1.1c-0.5-0.1-0.9-0.2-1.4-0.2c-0.1,0-0.2,0-0.4,0c-0.1,0-0.2,0-0.4,0h-1.2l-18.7-0.1 l-37.4-0.3l-18.7-0.1l-9.4-0.1h-2.3h-1.2h-0.9c-1.1,0.1-2.3,0.2-3.4,0.6c-4.4,1.3-8.1,4.8-9.6,9.2l-5.9,17.8l-5.9,17.8 c-2.3,6.5-5.7,12.5-10.3,17.6c-9.1,10.2-22.4,16.6-36,17.2L500,349.2l-149.8,0.2c-13.6-0.6-26.9-6.9-35.9-17.2 c-4.6-5.1-8-11.1-10.3-17.6l-5.9-17.8l-5.9-17.8c-1.5-4.5-5.2-8.1-9.7-9.4c-1.1-0.4-2.3-0.5-3.4-0.6h-0.9H277h-2.3l-9.4,0.1 l-18.7,0.1l-37.4,0.3l-18.7,0.1h-1.2c-0.2,0-0.3,0-0.5,0c-0.1,0-0.2,0-0.4,0c-0.5,0-1,0.1-1.5,0.2c-1,0.2-1.9,0.6-2.7,1.1 c-0.9,0.5-1.6,1.1-2.3,1.9l-2.8,3.4l-47.7,57.6l-47.8,57.6l-23.9,28.8l-11.9,14.4l-6,7.2l-0.6,0.8c-0.1,0.2-0.3,0.4-0.4,0.6 c-0.3,0.4-0.5,0.8-0.7,1.2c-0.2,0.4-0.4,0.8-0.5,1.2c-0.1,0.2-0.1,0.4-0.2,0.6c0,0.2,0,0.1,0,0.2v0.1v0.1l-0.1,0.5v0.1 c0,0,0,0.1,0,0s0-0.2,0-0.2l-0.1,1.4c0-0.1,0.1-0.2,0.1-0.3c0-0.1,0-0.3,0-0.2v0.6c0,0.4,0,0.9,0,1.4v2.9v5.8l0.1,11.6l0.1,23.3 l0.2,46.5v93l-0.1,46.5v23.3v5.8l0.1,2.1c0.1,0.7,0.2,1.4,0.3,2.1c0.6,2.8,1.8,5.4,3.5,7.7s3.9,4.2,6.4,5.6 c2.5,1.4,5.3,2.2,8.1,2.4l1.1,0.1h0.5h0.7h2.9H69h11.6l46.5,0.1l372.1,0.8l372.1,1.1l46.5,0.1H941c6.3-0.1,12.5-3,16.6-7.9 c2.1-2.4,3.5-5.3,4.4-8.3c0.2-0.8,0.4-1.5,0.5-2.3s0.3-1.6,0.3-2.4l0.1-1.2c0-0.4,0-0.9,0-1.4v-2.9V681v-46.5V588 c0-7.8-0.1-15.5-0.2-23.3c-0.1-7.8-0.2-15.5-0.4-23.3C961.6,510.6,960.7,479.6,960.8,448.6z"})),l.a.createElement("g",null,l.a.createElement("path",{className:"st1-empty-folder",d:"M952.8,686.4l-120.7-220l-9.8-17.9c-2.7-4.8-7.7-7.8-13.2-7.8H190.9c-5.5,0-10.6,3-13.2,7.8l-9.8,17.9 L50,681.3"}),l.a.createElement("path",{className:"st2-empty-folder",d:"M951.1,687.4L915,622.6l-36-64.9l-35.8-65l-17.9-32.5l-4.5-8.1l-1.1-2c-0.3-0.6-0.6-1.1-1-1.6 c-0.8-1-1.7-1.8-2.7-2.6c-2-1.4-4.5-2.2-7-2.2h-9.3l-296.8,0.2l-296.8-0.2h-9.3h-4.6H191h-0.9c-0.6,0.1-1.2,0.1-1.8,0.3 c-2.4,0.5-4.6,1.8-6.3,3.7c-0.4,0.5-0.8,1-1.1,1.5c-0.2,0.3-0.3,0.5-0.5,0.8l-0.6,1l-2.2,4.1l-17.9,32.5l-35.8,65l-36,64.9 l-36.1,64.8l-3.5-1.9L83.5,615l35.4-65.2l35.6-65.1l17.8-32.6l2.2-4.1l0.6-1c0.2-0.4,0.5-0.8,0.7-1.2c0.5-0.8,1.1-1.5,1.7-2.2 c2.5-2.8,5.8-4.7,9.5-5.6c0.9-0.2,1.8-0.3,2.8-0.4h1.4h1.2h4.6h9.3l296.8-0.2l296.8,0.2h9.3c3.7,0,7.4,1.2,10.5,3.3 c1.5,1.1,2.9,2.4,4,3.8c0.6,0.7,1.1,1.5,1.5,2.3l1.1,2l4.5,8.1l17.8,32.6l35.6,65.1l35.4,65.2l35.3,65.3L951.1,687.4z"})),l.a.createElement("path",{className:"st3-empty-folder",d:"M967.9,448.6v260c0,15.1-12.2,27.3-27.3,27.3H59.4c-15.1,0-27.3-12.2-27.3-27.3v-260c0,8.7,6.8,16.9,16.8,16.9 h111.4c12.9,0,24.4,8.3,28.3,20.6l17.4,53.8c9.6,29.6,37.2,49.7,68.4,49.7h451c31.2,0,58.8-20.1,68.4-49.7l17.4-53.8 c4-12.3,15.4-20.6,28.3-20.6H951C961.1,465.5,967.9,457.3,967.9,448.6z"})))},re=a(80),ne=a.n(re);function ce(e,t,a){if(null===e||null===t)return!1;if(0===e.length||0===t.length)return!1;for(var r=function(r){if(!e.some(function(e){return e[a]===t[r][a]}))return{v:!1}},n=0;n<t.length;++n){var c=r(n);if("object"===typeof c)return c.v}return!0}function le(e,t){return"/"===e.charAt(e.length-1)?e.slice(0,-1)+t:e+t}function se(e){for(var t="?",a=Object.keys(e),r=0;r<a.length;r++)"date_created"===e.orderBy&&"sort"===a[r]||(t+=a[r]+"="+encodeURIComponent(e[a[r]]),r!==a.length-1&&(t+="&"));return t}function ie(e,t,a){for(var r=-1,n=0;n<e.length;n++)if(e[n][t]===a){r=n;break}return r}function oe(e,t){for(var a=ne.a.parse(e),r={},n=0;n<t.length;n++)"boolean"===typeof t[n].default?"true"===a[t[n].label]?r[t[n].label]=!0:"false"===a[t[n].label]?r[t[n].label]=!1:r[t[n].label]=t[n].default:r[t[n].label]=a[t[n].label]||t[n].default;return r&&"date_created"===r.orderBy&&(r.sort="DESC"),r}var ue=function(e){return l.a.createElement("svg",{version:"1.1",id:"options-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("path",{className:"st0",d:"M214,482.1"}),l.a.createElement("line",{className:"st-options",x1:"500",y1:"250",x2:"500",y2:"250"}),l.a.createElement("line",{className:"st-options",x1:"500",y1:"500",x2:"500",y2:"500"}),l.a.createElement("line",{className:"st-options",x1:"500",y1:"750",x2:"500",y2:"750"}))},me=function(e){var t=e.cls,a=e.options,r=e.handler,n=e.target,s=e.data,i=Object(c.useState)(!1),o=Object(f.a)(i,2),u=o[0],m=o[1];return l.a.createElement("div",{className:t},l.a.createElement("button",{type:"button",onBlur:function(e){u&&m(!1)},onMouseDown:function(e){m(!u)}},l.a.createElement(ue,null)),l.a.createElement("div",{style:{fontSize:u?"12px":"0px",padding:u?"2px":"0px",border:u?"solid 1px #e8e8e8":"solid 0px #e8e8e800"},className:"options-list"},a.map(function(e,t){return l.a.createElement("div",{key:t,onMouseDown:function(t){return r(n,e,s)},className:"option"},e)})))},pe=function(e){var t=e.callDelete,a=e.path,r=e.project,n=Object(c.useState)(!1),s=Object(f.a)(n,2),i=s[0],u=s[1];return l.a.createElement("div",{className:i?"disabled":""},l.a.createElement(me,{options:["delete"],handler:function(e,a){"delete"===a&&(u(!0),t(e))},target:r.id,cls:"card-options project-card-options"}),l.a.createElement(o.b,{to:le(a,"/"+r.id)},l.a.createElement("h3",null,r.data.name),l.a.createElement("p",{className:"description"},r.data.description),l.a.createElement("div",{className:"project-dates"},l.a.createElement("p",null),l.a.createElement("p",null,"last modified on ",l.a.createElement("i",null,r.date_last_modified.slice(0,10))))))},de=[{label:"start",default:0},{label:"count",default:10}],fe=function(e){var t,a=e.projectsList,r=e.path,n=e.handleDelete;return t=0===a.length?l.a.createElement("div",{className:"empty-folder-wrapper"}," ",l.a.createElement(ae,null)," ",l.a.createElement("p",{className:"empty-folder-description"}," You don't have any projects yet ")):a.map(function(e,t){return l.a.createElement("div",{key:e.id,className:"light-modal project-card"},l.a.createElement(pe,{callDelete:n,path:r,project:e}))}),l.a.createElement("div",{className:0===a.length?"project-cards-holder-empty":"project-cards-holder"},t)},he=function(e){var t=Object(c.useRef)(!1),a=Object(c.useState)([]),r=Object(f.a)(a,2),n=r[0],s=r[1],i=Object(c.useState)(0),o=Object(f.a)(i,2),u=o[0],m=o[1],h=Object(c.useState)(!1),b=Object(f.a)(h,2),E=b[0],g=b[1],v=Object(c.useState)(!1),y=Object(f.a)(v,2),x=y[0],j=y[1],w=Object(c.useContext)(L),N=oe(e.location.search,de);function O(){return(O=Object(d.a)(p.a.mark(function e(a){var r,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleting "+a),e.next=3,K.deleteProject(a);case 3:r=e.sent,t.current&&""===r?(c=n.filter(function(e){return e.id!==a}),s(c),w.setNotificationMessage("Successfully deleted")):t.current&&r&&r.message&&w.setError(r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(c.useEffect)(function(){return t.current=!0,w.setTitle(l.a.createElement("div",{className:"nav-elements"}," ",l.a.createElement("h2",{className:"static-title"},"PROJECTS")," ")),w.setProjectName(""),function(){t.current=!1}},[]),Object(c.useEffect)(function(){var e=!0;return function(){var t=Object(d.a)(p.a.mark(function t(){var a,r,n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return g(!1),console.log(N),t.next=4,K.getProjectsList(Object(R.a)({orderBy:"date_last_modified"},N));case 4:a=t.sent,e&&a&&"Not Found"===a.message?(s([]),m(0),g(!0)):e&&a&&a.message?w.setError(a):e&&a&&(r=a.results.filter(function(e,t){if(t%2)return e}),n=[],n=a.results.filter(function(e,t){if(!(t%2))return e}),s(n.concat(r)),m(a.totalResults),g(!0));case 6:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[N.start,N.count]),!1===E?l.a.createElement(W,null):l.a.createElement("div",null,l.a.createElement(te,{cls:x?"full-screen":"",handler:j}),l.a.createElement(fe,{projectsList:n,path:e.match.url,handleDelete:function(e){return O.apply(this,arguments)}}),l.a.createElement(ee,{start:N.start,count:N.count,totalResults:u,path:e.match.url}),l.a.createElement(Q,{visibility:x,setVisibility:j,history:e.history}),l.a.createElement("div",{className:"bottom-right-button-holder"},l.a.createElement("button",{className:"bottom-right-btn add-project-btn",type:"button",value:"toggle-insert-form",onClick:function(e){j(!x)}},l.a.createElement("div",{className:"btn-title"},"Add Project"),l.a.createElement("div",{className:"btn-icon"}," "))))},be=a(6);function Ee(){return(Ee=Object(d.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.search,e.next=3,_.get(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ge(){return(ge=Object(d.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.papers+"/"+t,e.next=3,_.get(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ve(){return(ve=Object(d.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.search_similar,e.next=3,_.post(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ye(){return(ye=Object(d.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.search_automated,e.next=3,_.post(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var xe={search:function(e){return Ee.apply(this,arguments)},selectById:function(e){return ge.apply(this,arguments)},searchSimilar:function(e){return ve.apply(this,arguments)},searchAutomated:function(e){return ye.apply(this,arguments)},abortRequest:_.abortRequest},je=function(e){return l.a.createElement("svg",{id:"select-tick",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("polyline",{className:"st-tick",points:"918,192.3 389.3,807.7 82,450 ",style:{stroke:e.color?e.color:""}},l.a.createElement("animate",{attributeName:"points",dur:"0.2s",repeatCount:"1",fill:"freeze",from:"500,600 400,700 200,750",to:"918,192.3 389.3,807.7 82,450 "})))},we=function(e){var t=e.val,a=e.name,r=e.label,n=e.isChecked,s=e.handler,i=Object(c.useState)(l.a.createElement(l.a.Fragment,null)),o=Object(f.a)(i,2),u=o[0],m=o[1];return Object(c.useEffect)(function(){m(n?l.a.createElement(je,null):l.a.createElement(l.a.Fragment,null))},[n]),l.a.createElement("label",{className:"checkbox-container"},l.a.createElement("input",{type:"checkbox",value:t,name:a,checked:n,onChange:function(e){s(e)}}),l.a.createElement("span",{className:"checkmark"},u),l.a.createElement("span",{className:"name"},r))},Ne=a(24),Oe=a.n(Ne);function ke(){return(ke=Object(d.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.papers,e.next=3,_.get(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Se(){return(Se=Object(d.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.papers+"/"+t,e.next=3,_.get(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _e(){return(_e=Object(d.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.papers,e.next=3,_.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ce(){return(Ce=Object(d.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.customPapers,e.next=3,_.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Fe(){return(Fe=Object(d.a)(p.a.mark(function e(t,a){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.home+h.papers+"/"+t,e.next=3,_.put(r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Pe(){return(Pe=Object(d.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.papers+"/"+t,e.next=3,_.delete(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ie={getPapersList:function(e){return ke.apply(this,arguments)},getPaper:function(e){return Se.apply(this,arguments)},postPaperIntoProject:function(e){return _e.apply(this,arguments)},postCustomPaperIntoProject:function(e){return Ce.apply(this,arguments)},putPaper:function(e,t){return Fe.apply(this,arguments)},deletePaper:function(e){return Pe.apply(this,arguments)},abortRequest:_.abortRequest},Te=function(e){return l.a.createElement("svg",{version:"1.1",id:"no-image",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("g",null,l.a.createElement("path",{className:"st5-image-error",d:"M276.4,541.4c0-20.6,83.9-32.6,187.4-32.6s187.4,12,187.4,32.6"}),l.a.createElement("path",{className:"st1-image-error",d:"M339.2,554.9c32.4-5.1,76.5-7.9,125.1-7.9c48.2,0,92,2.7,124.3,7.7"}),l.a.createElement("path",{className:"st5-image-error",d:"M651.9,560.8v52.8l-0.7,0.1c0,20.6-83.9,31-187.4,31s-187.4-10.5-187.4-31l-0.6-0.1v-52.8"}),l.a.createElement("path",{className:"st5-image-error",d:"M290.4,643.2l43,257.2l0.4-0.2c0,13.7,56,20.7,125.1,20.7s125.1-7,125.1-20.7l53.5-257.1"}),l.a.createElement("g",null,l.a.createElement("path",{className:"st2-image-error",d:"M473.9,527.7c-8-4.4,135.3-110.1,166.8-164.5C560.3,392.4,503.6,455.5,473.9,527.7"}),l.a.createElement("path",{className:"st2-image-error",d:"M570.5,245.9C545.3,276,474.1,487.5,464.9,574"})),l.a.createElement("g",null,l.a.createElement("path",{className:"st3-image-error",d:"M684.6,229.2c1.7-6.1,2.8-12.3,3.2-18.5l36.3-13.4c-1.4-24-9.6-47.7-24.2-67.6L663.6,143 c-2.1-2.2-4.4-4.4-6.8-6.4c-2.4-2-4.9-3.9-7.4-5.7l6.7-38.5c-22-11.2-46.4-15.3-70-12.5l-6.7,38.5c-6,1.5-11.9,3.6-17.5,6.4 l-29.6-25.2c-9.8,6.5-18.9,14.6-26.8,24.2c-7.9,9.6-14.2,20-18.9,30.9l29.6,25.2c-1.7,6.1-2.8,12.3-3.2,18.5l-36.3,13.4 c1.4,24,9.6,47.7,24.2,67.6l36.4-13.4c2.1,2.2,4.4,4.4,6.8,6.4c2.4,2,4.9,3.9,7.4,5.7l-6.7,38.5c22,11.2,46.4,15.3,70,12.5 l6.7-38.5c6-1.5,11.9-3.6,17.5-6.4l29.6,25.2c9.8-6.5,18.9-14.6,26.8-24.2c7.9-9.6,14.2-20,18.9-30.9L684.6,229.2z"}),l.a.createElement("ellipse",{className:"st4-image-error",cx:"600.4",cy:"204.5",rx:"41.9",ry:"42.4"})),l.a.createElement("path",{className:"st5-image-error",d:"M651.2,541.4c0,20.6-83.9,31-187.4,31s-187.4-10.5-187.4-31"})))},Le=function(e){return l.a.createElement("svg",{version:"1.1",id:"no-profile-image",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("g",null,l.a.createElement("circle",{class:"st0-npi",cx:"500",cy:"272.4",r:"228.4"}),l.a.createElement("path",{class:"st0-npi",d:"M873,956c37.3,0,66.2-33.3,60.3-70.5C904.9,700.4,764.6,507.5,500,507.5S95,700.2,66.6,885.3 c-5.5,36.9,22.9,70.5,60.3,70.5L873,956L873,956z"})))},Be=function(e){var t=e.className,a=e.alt,r=e.src,n=e.style,s=e.type,i=Object(c.useState)(!1),o=Object(f.a)(i,2),u=o[0],m=o[1];Object(c.useEffect)(function(){var e=!0;return e&&!r&&m(!0),function(){e=!1}},[]);l.a.createElement(l.a.Fragment,null);return u?"profile-pic"===s?l.a.createElement("div",{className:t,alt:"error loading image",style:n},l.a.createElement(Le,null)):l.a.createElement("div",{className:t,alt:"error loading image",style:n},l.a.createElement(Te,null)):l.a.createElement("img",{className:t,alt:a,title:a,src:r,onError:function(){m(!0)},style:n})},Me=function(e){return l.a.createElement("svg",{version:"1.1",id:"no-papers",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("line",{className:"st0-no-papers",x1:"790",y1:"223.1",x2:"790",y2:"255.6"}),l.a.createElement("line",{className:"st1-no-papers",x1:"790",y1:"357.8",x2:"790",y2:"801.3"}),l.a.createElement("polyline",{className:"st0-no-papers",points:"790,852.4 790,884.9 757.5,884.9 \t\t"}),l.a.createElement("line",{className:"st2-no-papers",x1:"635.6",y1:"884.9",x2:"303.4",y2:"884.9"}),l.a.createElement("polyline",{className:"st0-no-papers",points:"242.5,884.9 210,884.9 210,852.4 \t\t"}),l.a.createElement("line",{className:"st3-no-papers",x1:"210",y1:"757.8",x2:"210",y2:"194.9"}),l.a.createElement("polyline",{className:"st0-no-papers",points:"210,147.6 210,115.1 242.5,115.1 \t\t"}),l.a.createElement("polyline",{className:"st4-no-papers",points:"338.4,115.1 682,115.1 733.1,166.2 \t\t"}),l.a.createElement("polyline",{className:"st0-no-papers",points:"767,200.1 790,223.1 757.5,223.1 \t\t"}),l.a.createElement("polyline",{className:"st0-no-papers",points:"714.5,223.1 682,223.1 682,190.6 \t\t"}),l.a.createElement("line",{className:"st0-no-papers",x1:"682",y1:"147.6",x2:"682",y2:"115.1"}))},Re=function(e){return l.a.createElement("svg",{version:"1.1",id:"info",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("line",{className:"st0-info",x1:"500",y1:"369",x2:"500",y2:"817"}),l.a.createElement("circle",{className:"st1-info",cx:"500",cy:"198",r:"48"}))},Ae=function(e){var t=e.className,a=e.children;return l.a.createElement("div",{className:t?"top-right-anchor "+t:"top-right-anchor"},l.a.createElement("div",{className:"information-holder"},l.a.createElement("div",{className:"info-button-icon"},l.a.createElement(Re,null)),l.a.createElement("div",{className:t?"information-content-wrapper "+t:"information-content-wrapper"},l.a.createElement("div",{className:"information-content"},a))))},De=function(e){var t=e.filtersList,a=e.confidence,r=Object(c.useState)([]),n=Object(f.a)(r,2),s=n[0],i=n[1];Object(c.useEffect)(function(){return console.log(a),0!==t.length&&void 0!==a&&i(function(e,t){for(var a=[],r=e.length<t.length?e.length:t.length,n=function(r){if(e[r].id===t[r].id)a.push({label:t[r].data.name,tooltip:t[r].data.predicate,value:e[r].filterValue});else{var n=t.find(function(t){return t.id===e[r].id});n&&n.data&&a.push({label:n.data.name,tooltip:n.data.predicate,value:e[r].filterValue})}},c=0;c<r;c++)n(c);return a}(a.filters,t)),function(){}},[]);var o=l.a.createElement("p",null,"add filters in order to check partial confidence of each filter");return o=0!==s.length?l.a.createElement(l.a.Fragment,null,s.map(function(e,t){return l.a.createElement("p",{key:t,title:e.tooltip},l.a.createElement("span",null,e.label)," ",l.a.createElement("span",{className:"side-detail"},e.value?e.value.toFixed(2):"\u2212.\u2212\u2212"))})):l.a.createElement(l.a.Fragment,null,"This paper has not received any confidence score yet"),l.a.createElement("div",{className:"side-info-wrapper"},l.a.createElement("div",{className:"side-info"},l.a.createElement("div",{className:"confidence"},a?parseFloat(a.value).toFixed(2):"\u2212.\u2212\u2212"),l.a.createElement(Ae,{className:"filters-confidence"},o)))},Xe=function(e){var t=e.callOptions,a=e.paper,r=Object(c.useState)(!1),n=Object(f.a)(r,2),s=n[0],i=n[1];return l.a.createElement("div",{className:s?"disabled":""},l.a.createElement(me,{options:["delete","search similar"],handler:function(e,a,r){"delete"===a&&i(!0),t(e,a,r)},target:a.id,data:a.data,cls:"card-options"}),l.a.createElement(o.b,{to:"#"},l.a.createElement("h3",null,a.data.title?a.data.title:"[MISSING TITLE]")),l.a.createElement("div",{className:"extra-info"},l.a.createElement("p",{className:"authors"},a.data.authors?a.data.authors:"[MISSING AUTHORS]"),l.a.createElement("p",{className:"eid"},a.data.eid?a.data.eid:"[MISSING EID]"),l.a.createElement("p",{className:"date"},a.data.year?a.data.year:"[MISSING YEAR]")),l.a.createElement(Oe.a,{text:a.data.abstract?a.data.abstract:"[MISSING ABSTRACT]",lines:4,ellipsis:"...",className:"paragraph",moreText:"more",lessText:"less"}))},qe=function(e){var t=e.papersList,a=e.location,r=e.history,n=Object(c.useRef)(!1),s=Object(c.useState)(t),i=Object(f.a)(s,2),o=i[0],u=i[1],m=Object(c.useContext)(L);function h(e,t,a){return b.apply(this,arguments)}function b(){return(b=Object(d.a)(p.a.mark(function e(t,c,l){var s,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("delete"!==c){e.next=8;break}return console.log("deleting "+t),e.next=4,Ie.deletePaper(t);case 4:s=e.sent,n.current&&s.message?m.setError(s):n.current&&null!==s&&(m.setNotificationMessage("Successfully deleted"),i=o.filter(function(e){return e.id!==t}),u(i)),e.next=9;break;case 8:"search similar"===c&&(console.log("here you want to search for a similar paper"),console.log(a),window.localStorage.setItem("targetPaperData",JSON.stringify(l)),r.push(le(a.pathname,"/searchsimilar")));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(c.useEffect)(function(){return n.current=!0,function(){n.current=!1}},[]),0===o.length?l.a.createElement("div",{className:"empty-list-wrapper"}," ",l.a.createElement(Me,null)," ",l.a.createElement("p",{className:"empty-list-description"}," There are no papers here, you can add new ones by searching ")):o.map(function(e){return l.a.createElement("div",{key:e.id,className:"generic-card paper-card"},l.a.createElement(Xe,{callOptions:h,paper:e}))})},He=function(e){var t=e.papersList;return 0===t.length?l.a.createElement("div",{className:"empty-list-wrapper"}," ",l.a.createElement(Me,null)," ",l.a.createElement("p",{className:"empty-list-description"}," No papers  have been screened yet")):t.map(function(e){return l.a.createElement("div",{key:e.id,className:"generic-card paper-card screened"},l.a.createElement(o.b,{to:"#"},l.a.createElement("h3",null,e.data.title?e.data.title:"[MISSING TITLE]")),l.a.createElement("div",{className:"screened-label",title:e.data.metadata.automatedScreening?e.data.metadata.automatedScreening.value:void 0},l.a.createElement("div",{className:"type"},"automated screening"===e.data.metadata.screening.source?"Auto":"manual screening"===e.data.metadata.screening.source?"Manual":"Crowd"),l.a.createElement("div",{className:"in-out"},1===parseInt(e.data.metadata.screening.result)?"IN":"OUT")),l.a.createElement("div",{className:"extra-info"},l.a.createElement("p",{className:"authors"},e.data.authors?e.data.authors:"[MISSING AUTHORS]"),l.a.createElement("p",{className:"eid"},e.data.eid?e.data.eid:"[MISSING EID]"),l.a.createElement("p",{className:"date"},e.data.year?e.data.year:"[MISSING YEAR]")),l.a.createElement(Oe.a,{text:e.data.abstract?e.data.abstract:"[MISSING ABSTRACT]",lines:4,ellipsis:"...",className:"paragraph",moreText:"more",lessText:"less"}))})},ze=function(e){var t=e.papersList;return 0===t.length?l.a.createElement("div",{className:"empty-list-wrapper"}," ",l.a.createElement(Me,null)," ",l.a.createElement("p",{className:"empty-list-description"}," No papers have been manually screened yet")):t.map(function(e){return l.a.createElement("div",{key:e.id,className:"generic-card paper-card manual"},l.a.createElement(o.b,{to:"#"},l.a.createElement("h3",null,e.data.title?e.data.title:"[MISSING TITLE]")),l.a.createElement("div",{className:"extra-info"},l.a.createElement("p",{className:"authors"},e.data.authors?e.data.authors:"[MISSING AUTHORS]"),l.a.createElement("p",{className:"eid"},e.data.eid?e.data.eid:"[MISSING EID]"),l.a.createElement("p",{className:"date"},e.data.year?e.data.year:"[MISSING YEAR]")),l.a.createElement(Oe.a,{text:e.data.abstract?e.data.abstract:"[MISSING ABSTRACT]",lines:4,ellipsis:"...",className:"paragraph",moreText:"more",lessText:"less"}),l.a.createElement("div",{className:"users-votes"},l.a.createElement("div",{className:"votes"},e.data.metadata.votes.filter(function(e){return"1"===e.answer}).map(function(e,t){return l.a.createElement(Be,{key:t,className:"user-vote-image in-vote",alt:e.user.name+" voted: in",src:e.user.picture})})),l.a.createElement("div",{className:"votes"},e.data.metadata.votes.filter(function(e){return"0"===e.answer}).map(function(e,t){return l.a.createElement(Be,{key:t,className:"user-vote-image out-vote",alt:e.user.name+" voted: out",src:e.user.picture})})),l.a.createElement("div",{className:"votes"},e.data.metadata.votes.filter(function(e){return"2"===e.answer}).map(function(e,t){return l.a.createElement(Be,{key:t,className:"user-vote-image und-vote",alt:e.user.name+" is undecided",src:e.user.picture})}))))})},Ue=Object(u.f)(function(e){var t=e.papersList,a=e.handlePaperSelection,r=e.selectedEidList,n=e.history,c=e.match,s=e.setTargetPaperData,i=["search similar"];function u(e,t,a){return m.apply(this,arguments)}function m(){return(m=Object(d.a)(p.a.mark(function e(t,a,r){var l,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"search similar"===a&&(console.log("here you want to search for a similar paper"),console.log(r),l="/"===c.path[c.path.length-1]?c.path.substring(0,c.path.length-1):c.path,i=l,"h"===l[l.length-1]?(i=l+"similar",window.localStorage.setItem("targetPaperData",JSON.stringify(r)),n.push(i)):s(r));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return t.map(function(e,t){return l.a.createElement("div",{key:t,className:"generic-card paper-card"},l.a.createElement(we,{name:e.title,label:"",val:e.eid,isChecked:r.includes(e.eid),handler:a}),l.a.createElement(me,{options:i,handler:u,target:e.id,data:e,cls:"card-options"}),l.a.createElement(o.b,{to:"#"},l.a.createElement("h3",null,e.title?e.title:"[MISSING TITLE]")),l.a.createElement("div",{className:"extra-info"},l.a.createElement("p",{className:"authors"},e.authors?e.authors:"[MISSING AUTHORS]"),l.a.createElement("p",{className:"eid"},e.eid?e.eid:"[MISSING EID]"),l.a.createElement("p",{className:"date"},e.year?e.year:"[MISSING YEAR]")),l.a.createElement(Oe.a,{text:e.abstract?e.abstract:"[MISSING ABSTRACT]",lines:4,ellipsis:"...",className:"paragraph",moreText:"more",lessText:"less"}))})}),Ve=Object(u.f)(function(e){var t=e.papersList,a=e.filtersList,r=e.handlePaperSelection,n=e.selectedEidList;return 0===t.length?l.a.createElement("div",{className:"empty-list-wrapper"}," ",l.a.createElement(Me,null)," ",l.a.createElement("p",{className:"empty-list-description"}," There are no papers here")):t.map(function(e,t){return l.a.createElement("div",{key:t,className:"generic-card paper-card"},l.a.createElement(we,{name:e.title,label:"",val:e.eid,isChecked:n.includes(e.eid),handler:r}),l.a.createElement(De,{filtersList:a,confidence:e.metadata.automatedSearch}),l.a.createElement(o.b,{to:"#"},l.a.createElement("h3",{className:"auto-paper-title"},e.title)),l.a.createElement("div",{className:"extra-info"},l.a.createElement("p",{className:"authors"},e.authors),l.a.createElement("p",{className:"eid"},e.eid),l.a.createElement("p",{className:"date"},e.year)),l.a.createElement(Oe.a,{text:e.abstract,lines:4,ellipsis:"...",className:"paragraph",moreText:"more",lessText:"less"}))})}),Ge=function(e){var t=e.papersList,a=e.filtersList;return 0===t.length?l.a.createElement("div",{className:"empty-list-wrapper"}," ",l.a.createElement(Me,null)," ",l.a.createElement("p",{className:"empty-list-description"}," There are no papers here")):t.map(function(e,t){return l.a.createElement("div",{key:t,className:"generic-card paper-card"},l.a.createElement(De,{filtersList:a,confidence:e.data.metadata&&e.data.metadata.automatedScreening}),l.a.createElement(o.b,{to:"#"},l.a.createElement("h3",{className:"auto-paper-title"},e.data.title)),l.a.createElement("div",{className:"extra-info"},l.a.createElement("p",{className:"authors"},e.data.authors),l.a.createElement("p",{className:"eid"},e.data.eid),l.a.createElement("p",{className:"date"},e.data.year)),l.a.createElement(Oe.a,{text:e.data.abstract,lines:4,ellipsis:"...",className:"paragraph",moreText:"more",lessText:"less"}))})},Je=function(e){var t=e.focused,a=e.code,r="",n="";return t?(r="90,295.5 500,704.5 910,295.5 ",n="90,704.5 500,295.5 910,704.5 "):(r="90,704.5 500,295.5 910,704.5 ",n="90,295.5 500,704.5 910,295.5 "),l.a.createElement("svg",{version:"1.1",id:"arrow-select",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("polyline",{className:"st-arrow-select",points:r},l.a.createElement("animate",{attributeType:"XML",id:isNaN(a)?"ani-select-arrow":"ani-select-arrow"+a,attributeName:"points",from:r,to:n,begin:"0s",dur:"0.2s",repeatCount:"1",fill:"freeze"})))},Ye=function(e){var t=e.options,a=e.selected,r=e.handler,n=e.type,s=e.code,i=Object(c.useState)(!1),o=Object(f.a)(i,2),u=o[0],m=o[1];function p(e){"click"===e?(document.getElementById(isNaN(s)?"ani-select-arrow":"ani-select-arrow"+s).beginElement(),m(!u)):u&&(document.getElementById(isNaN(s)?"ani-select-arrow":"ani-select-arrow"+s).beginElement(),m(!1))}return l.a.createElement("div",{className:n?"custom-select "+n:"custom-select"},l.a.createElement("div",{className:"selected",tabIndex:-2,onBlur:function(){p("blur")},onClick:function(){p("click")}},t[a]?t[a].label:"[!]"," ",l.a.createElement("div",{className:"arrow"},l.a.createElement(Je,{focused:u,code:s}))),l.a.createElement("div",{className:"options-holder",style:{fontSize:u?"15px":"0px",borderBottom:u?"1px solid #d7d7d7":"0px solid #d7d7d7",borderLeft:u?"1px solid #d7d7d7":"0px solid #d7d7d7",borderRight:u?"1px solid #d7d7d7":"0px solid #d7d7d7",borderTop:"none"}},t.map(function(e,t){return l.a.createElement("div",{key:t,"data-value":t,className:"option",style:{padding:u?"2px":"0px"},onMouseDown:r},e.label)})))},Ke=function(e){return l.a.createElement("svg",{id:"remove-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("line",{className:"rb",x1:"134",y1:"866",x2:"866",y2:"134"}),l.a.createElement("line",{className:"rb",x1:"134",y1:"134",x2:"866",y2:"866"}))},We=function(e){var t=e.project_id,a=e.selectedPapersList,r=e.setSelectedPapersList,n=e.handlePaperSelection,s=e.mounted,i=window.localStorage,o=Object(c.useContext)(L);function u(){return(u=Object(d.a)(p.a.mark(function e(n){var c,l,u;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=a,r([]),i.removeItem("selectedPapersList"),l=c.map(function(e){return e.eid}),console.log("ADDING"),console.log(l),e.next=8,Ie.postPaperIntoProject({arrayEid:l,project_id:t});case 8:if(u=e.sent,!(s.current&&u&&u.message)){e.next=12;break}return o.setError(u),e.abrupt("return",null);case 12:s.current&&(r([]),i.removeItem("selectedPapersList"),o.setNotificationMessage("Insert completed"));case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}Object(c.useEffect)(function(){i.getItem("selectedPapersList")&&r(JSON.parse(i.getItem("selectedPapersList")))},[]);return l.a.createElement("div",{className:"selected-papers-list",style:{opacity:a.length>0?"1.0":"0.0",pointerEvents:a.length>0?"auto":"none"}},l.a.createElement(Ae,{className:"selected-papers"},l.a.createElement("p",null,"this box contains the complete list of papers you currently selected in this browser")),l.a.createElement("h3",null,"SELECTED PAPERS ",l.a.createElement("br",null),l.a.createElement("span",null,"(total : ",a.length,")")),l.a.createElement("div",{className:"submission-wrapper"},l.a.createElement("div",{className:"papers-wrapper",style:{border:a.length>0?"":"0px"}},l.a.createElement("div",{className:"papers-flex",style:{padding:a.length>0?"":"0px"}},a.map(function(e,t){return l.a.createElement("p",{key:t},l.a.createElement("span",null,e.title),l.a.createElement("button",{type:"button",className:"remove-btn",name:e.title,value:e.eid,onClick:function(t){n({target:{name:e.title,value:e.eid}})}},l.a.createElement(Ke,null)))}))),l.a.createElement("button",{style:{border:a.length>0?"":"0px",margin:a.length>0?"":"0px",height:a.length>0?"":"0px",pointerEvents:a.length>0?"auto":"none"},className:"ti-btn add-resultpaper-btn",type:"button",value:"Submit",onClick:function(e){return u.apply(this,arguments)}},l.a.createElement("div",{className:"btn-title"},"Add Selected Paper"),l.a.createElement("div",{className:"btn-icon"}," "))))},$e=function(e){var t=e.up,a="",r="";"ASC"===t?(a="371.7,293 500,165 628.3,293 ",r="371.7,491.9 500,619.9 628.3,491.9 "):(a="371.7,491.9 500,619.9 628.3,491.9 ",r="371.7,293 500,165 628.3,293 ");var n=Object(c.useState)(r),s=Object(f.a)(n,2),i=s[0],o=s[1];return Object(c.useEffect)(function(){o(r)},[r]),l.a.createElement("svg",{version:"1.1",id:"order-arrow",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("polyline",{className:"st-order-arrow-head",points:"371.7,293 500,165 628.3,293 ",transform:"matrix(1.5303008,0,0,1.5303008,-279.47582,-105.57059)"},l.a.createElement("animate",{attributeType:"XML",id:"ani-order-arrow",attributeName:"points",from:a,to:i,begin:"0s",dur:"0.2s",repeatCount:"1",fill:"freeze"})),l.a.createElement("line",{className:"st-order-arrow",x1:"485.67453",y1:"145.09268",x2:"485.67453",y2:"827.75989"}))},Ze=function(e){return l.a.createElement("svg",{version:"1.1",id:"no-results",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("circle",{className:"st0-no-results",cx:"585.3",cy:"419.7",r:"271.7"}),l.a.createElement("line",{className:"st3-no-results",x1:"111.2",y1:"894",x2:"393.2",y2:"611.8"}),l.a.createElement("path",{className:"st1-no-results",d:"M460.6,533c83.1-20,166.2-20,249.4,0"}),l.a.createElement("line",{className:"st2-no-results",x1:"683.8",y1:"329",x2:"683.8",y2:"337"}),l.a.createElement("line",{className:"st2-no-results",x1:"512.8",y1:"329",x2:"512.8",y2:"337"}))},Qe=(a(309),function(e){return l.a.createElement("svg",{id:"radio-tick",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("circle",{className:"st-circle",cx:"500",cy:"500",r:"375"},l.a.createElement("animate",{attributeName:"r",dur:"0.2s",repeatCount:"1",fill:"freeze",from:"0",to:"375"})))}),et=function(e){var t=e.label,a=e.name,r=e.val,n=e.isChecked,s=e.handler,i=Object(c.useState)(l.a.createElement(l.a.Fragment,null)),o=Object(f.a)(i,2),u=o[0],m=o[1];return Object(c.useEffect)(function(){m(n?l.a.createElement(Qe,null):l.a.createElement(l.a.Fragment,null))},[n]),l.a.createElement("label",{className:"radiobox-container"},l.a.createElement("input",{type:"radio",value:r,name:a,checked:n,onChange:s}),l.a.createElement("span",{className:"radiomark"},u),l.a.createElement("span",null,t))},tt=function(e){return l.a.createElement("svg",{id:"search-icon",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("path",{className:"st0",d:"M626.9,644.3c-73.5,0-142.6-28.6-194.6-80.6s-80.6-121.1-80.6-194.6s28.6-142.6,80.6-194.6 c52-52,121.1-80.6,194.6-80.6c73.5,0,142.6,28.6,194.6,80.6c52,52,80.6,121.1,80.6,194.6s-28.6,142.6-80.6,194.6 S700.4,644.3,626.9,644.3z"}),l.a.createElement("line",{className:"st1",x1:"145.2",y1:"850.8",x2:"431.7",y2:"564.3"}))},at=function(e){return l.a.createElement("svg",{id:"similar-paper-search-icon",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("polyline",{className:"st0-sps",points:"795.8,214 734.8,214 736.8,146 \t\t"}),l.a.createElement("polyline",{className:"st0-sps",points:"842.8,214 842.8,875.8 262.8,875.8 262.8,106 734.8,106 \t\t"}),l.a.createElement("line",{className:"st0-sps",x1:"842.8",y1:"214",x2:"734.8",y2:"106"}),l.a.createElement("line",{className:"st1-sps",x1:"350.8",y1:"198.9",x2:"644.8",y2:"198.9"}),l.a.createElement("line",{className:"st2-sps",x1:"346.8",y1:"385.4",x2:"752.8",y2:"385.4"}),l.a.createElement("line",{className:"st2-sps",x1:"544",y1:"485.9",x2:"752.8",y2:"485.9"}),l.a.createElement("line",{className:"st3-sps",x1:"346.8",y1:"485.9",x2:"544",y2:"485.9"}),l.a.createElement("line",{className:"st2-sps",x1:"575.9",y1:"586.4",x2:"752.8",y2:"586.4"}),l.a.createElement("line",{className:"st3-sps",x1:"346.8",y1:"586.4",x2:"575.9",y2:"586.4"}),l.a.createElement("line",{className:"st2-sps",x1:"555.5",y1:"686.9",x2:"752.8",y2:"686.9"}),l.a.createElement("line",{className:"st3-sps",x1:"346.8",y1:"686.9",x2:"555.5",y2:"686.9"}),l.a.createElement("circle",{className:"st4-sps",cx:"410.8",cy:"594.3",r:"171.7"}),l.a.createElement("line",{className:"st4-sps",x1:"111.2",y1:"894",x2:"289.4",y2:"715.7"}))},rt=a(73),nt=[{label:"all",value:"all"},{label:"author",value:"author"},{label:"content",value:"content"},{label:"adv. query",value:"advanced"}],ct=(new Date).getFullYear()+2,lt=["all"].concat(Object(be.a)(rt.range(2017,ct).map(String))),st=function(e){var t=e.history,a=e.queryData,r=e.project_id,n=Object(c.useState)(a.query),s=Object(f.a)(n,2),i=s[0],u=s[1],m=Object(c.useState)({scopus:a.scopus,googleScholar:a.googleScholar,arXiv:a.arXiv}),h=Object(f.a)(m,2),b=h[0],E=h[1],g=Object(c.useState)(a.searchBy),v=Object(f.a)(g,2),y=v[0],x=v[1],j=Object(c.useState)(a.year),w=Object(f.a)(j,2),N=w[0],O=w[1],k=Object(c.useState)([1900,ct]),S=Object(f.a)(k,2);S[0],S[1];Object(c.useEffect)(function(){console.log("query data change effect"),!(a.scopus&&a.arXiv&&a.googleScholar)&&a.scopus^a.arXiv^a.googleScholar||(a.arXiv=!1,a.scopus=!0,a.googleScholar=!1),E({scopus:a.scopus,googleScholar:a.googleScholar,arXiv:a.arXiv}),x(a.searchBy),O(a.year)},[a]);var _=Object(c.useContext)(L);function C(e){switch(e.target.name){case"query":u(e.target.value);break;case"scopus":a.scopus=!0,a.googleScholar=!1,a.arXiv=!1;break;case"googleScholar":a.scopus=!1,a.googleScholar=!0,a.arXiv=!1;break;case"arXiv":a.scopus=!1,a.googleScholar=!1,a.arXiv=!0;break;case"searchBy":a.searchBy=e.target.value;break;case"year":a.year=e.target.value}"query"!==e.target.name&&a.query&&i?(a.query=i,t.push(se(a))):(E({scopus:a.scopus,googleScholar:a.googleScholar,arXiv:a.arXiv}),x(a.searchBy),O(a.year))}function F(){return(F=Object(d.a)(p.a.mark(function e(r){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),""===i?_.setNotificationMessage("Search string is empty"):(a.query=i,a.scopus=b.scopus,a.googleScholar=b.googleScholar,a.arXiv=b.arXiv,a.searchBy=y,a.year=N,n=se(a),t.push(n));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:""===a.query?"search-form":"search-form small",onSubmit:function(e){return F.apply(this,arguments)}},l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("input",{type:"text",placeholder:"search",name:"query",value:i,onChange:C}),l.a.createElement(o.b,{to:"/projects/"+r+"/searchsimilar"},l.a.createElement("button",{className:"go-similar",type:"button"},l.a.createElement(at,null))),l.a.createElement("button",{className:"go-search",type:"submit",value:"Submit"},l.a.createElement(tt,null))),l.a.createElement("div",{className:"option-holder"},l.a.createElement("label",null,"Source:"),l.a.createElement("br",null),l.a.createElement("div",{className:"checkboxes-holder"},l.a.createElement(et,{label:"Scopus",name:"scopus",val:"",isChecked:b.scopus,handler:C}),l.a.createElement(et,{label:"Google Scholar",name:"googleScholar",val:"",isChecked:b.googleScholar,handler:C}),l.a.createElement(et,{label:"arXiv",name:"arXiv",val:"",isChecked:b.arXiv,handler:C})),l.a.createElement("label",null,"Search by:"),l.a.createElement("br",null),l.a.createElement("div",{className:"checkboxes-holder"},l.a.createElement(et,{label:nt[0].label,name:"searchBy",val:nt[0].value,isChecked:y===nt[0].value,handler:C}),l.a.createElement(et,{label:nt[1].label,name:"searchBy",val:nt[1].value,isChecked:y===nt[1].value,handler:C}),l.a.createElement(et,{label:nt[2].label,name:"searchBy",val:nt[2].value,isChecked:y===nt[2].value,handler:C}),l.a.createElement(et,{label:nt[3].label,name:"searchBy",val:nt[3].value,isChecked:y===nt[3].value,handler:C})),l.a.createElement("label",null,"Year:"),l.a.createElement("br",null),l.a.createElement("div",{className:"checkboxes-holder"},lt.map(function(e,t){return l.a.createElement(et,{key:t,label:e,name:"year",val:e,isChecked:N===e,handler:C})})))))},it=function(e){return l.a.createElement("svg",{version:"1.1",id:"robot",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("path",{className:"st0-robot",d:"M406.3,576.3c-46.8,3.4-95,5.9-144.5,7.2c-69.2,1.9-127.2-52.1-130.5-121.3l-3.2-66.9 c-3.3-70.2,50.9-129.9,121.2-133.2l139.1-6.6c54.8-2.6,101.3,39.7,103.9,94.6l5.8,122.4C500.7,526.3,460,572.3,406.3,576.3z"}),l.a.createElement("path",{className:"st1-robot",d:"M407.4,528.8l-124.1,5.9c-9.8,0.5-18.1-7.1-18.6-16.9l-0.1-3.1c-0.2-4.1,3-7.6,7.1-7.8l144.7-6.8 c4.1-0.2,7.6,3,7.8,7.1l0.1,3.1C424.8,520,417.2,528.3,407.4,528.8z"}),l.a.createElement("path",{className:"st2-robot",d:"M263.1,415.9L263.1,415.9c-13.1-0.6-23.5-11.2-24.2-24.5l-1.9-39.8c-0.6-13,8.5-24.4,21.1-26.6h0 c14.9-2.5,28.7,8.8,29.4,24.2l1.9,39.8C290.2,404.2,278,416.6,263.1,415.9z"}),l.a.createElement("path",{className:"st2-robot",d:"M418.4,408.8L418.4,408.8c-14.2,2.2-27.2-9.1-27.9-24.4l-1.9-40.1c-0.7-15.5,11.5-28.2,26.1-26.9h0 c12.2,1.1,21.7,11.6,22.4,24.6l1.9,40.1C439.5,395.4,430.7,406.9,418.4,408.8z"}),l.a.createElement("path",{className:"st0-robot",d:"M133.6,610.9c126.4,12.4,246,15.2,357.6,6.4c47.7-3.8,87.3,39.8,84.4,92.5l-32.5,594.5 c-3.9,23.4-99,39-120.6,38.7l-229.1-3.5c-47.1-0.7-86.2-40-91.4-91.7L48.1,707.4C42.6,652.6,84,606.1,133.6,610.9z"}),l.a.createElement("ellipse",{transform:"matrix(0.9989 -4.710610e-02 4.710610e-02 0.9989 -19.9378 7.7157)",className:"st5-robot",cx:"153.7",cy:"426.9",rx:"13.6",ry:"70"}),l.a.createElement("path",{className:"st7-robot",d:"M451.3,736.2c-0.4,30.4-52.1,65.7-114.8,64.8c-62.7-0.9-113.2-36.2-112.8-66.6s51.6-44.3,114.3-43.4 C400.8,691.9,451.8,705.8,451.3,736.2z"}),l.a.createElement("g",null,l.a.createElement("path",{className:"st13-robot",d:"M255,721c47.2,3.6,94.3,4,141.5,1.2"}),l.a.createElement("path",{className:"st13-robot",d:"M246,732c59,4,118,4,177,0"}),l.a.createElement("path",{className:"st13-robot",d:"M252,743c40.2,2.9,80.4,3.7,120.5,2.4"}),l.a.createElement("path",{className:"st13-robot",d:"M258,754c51,4,102,4,153,0"}),l.a.createElement("path",{className:"st13-robot",d:"M261,765c14.5,1.2,29,2,43.5,2.5"})))},ot=a(73),ut=[{label:"Title",value:"title"},{label:"Date",value:"date"}],mt=[{label:"arXiv",default:!1},{label:"googleScholar",default:!1},{label:"scopus",default:!0},{label:"query",default:""},{label:"searchBy",default:"all"},{label:"orderBy",default:"title"},{label:"sort",default:"ASC"},{label:"year",default:"all"},{label:"start",default:0},{label:"count",default:10}],pt=function(e){var t,a=e.project_id,r=e.location,n=e.match,s=e.history,i=Object(c.useRef)(!1),u=Object(c.useState)([]),m=Object(f.a)(u,2),h=m[0],b=m[1],E=Object(c.useState)(!0),g=Object(f.a)(E,2),v=g[0],y=g[1],x=Object(c.useState)(0),j=Object(f.a)(x,2),w=j[0],N=j[1],O=Object(c.useContext)(L),k=oe(r.search,mt),S=window.localStorage;window.localStorage||console.log("the browser must be support localStorage"),t=S.getItem("selectedPapersList")?JSON.parse(S.getItem("selectedPapersList")):[];var _=Object(c.useState)(t),C=Object(f.a)(_,2),F=C[0],P=C[1],I=Object(c.useState)(k.sort),T=Object(f.a)(I,2),B=T[0],M=T[1];function R(e){var t,a=e.target.value,r=e.target.name;-1===ie(F,"eid",a)?(t=Object(be.a)(F)).push({eid:a,title:r}):t=F.filter(function(e){return e.eid!==a}),P(t),S.setItem("selectedPapersList",JSON.stringify(t))}Object(c.useEffect)(function(){return i.current=!0,function(){i.current=!1}},[]),Object(c.useEffect)(function(){var e=!0;return!(k.scopus&&k.arXiv&&k.googleScholar)&&k.scopus^k.arXiv^k.googleScholar||(k.arXiv=!1,k.scopus=!0,k.googleScholar=!1),e&&B!==k.sort&&(M(k.sort),document.getElementById("ani-order-arrow")&&document.getElementById("ani-order-arrow").beginElement()),function(){var t=Object(d.a)(p.a.mark(function t(){var a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""===k.query){t.next=8;break}return y(!1),t.next=4,xe.search(k);case 4:a=t.sent,e&&a&&"Not Found"===a.message?(b([]),N(0),y(!0)):e&&a&&a.message?O.setError(a):e&&a&&(b(a.results),N(a.totalResults),y(!0)),t.next=10;break;case 8:b([]),N(0);case 10:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[a,k.query,k.orderBy,k.searchBy,k.sort,k.year,k.start,k.count,k.scopus,k.googleScholar,k.arXiv]);var A="";if(!1===v&&""!==k.query)A=l.a.createElement(l.a.Fragment,null,l.a.createElement(We,{project_id:a,selectedPapersList:F,setSelectedPapersList:P,handlePaperSelection:R,mounted:i}),l.a.createElement("div",{className:"search-loading-holder"},l.a.createElement(W,{class:"small"})));else if(0===h.length&&""!==k.query)A=l.a.createElement(l.a.Fragment,null,l.a.createElement(We,{project_id:a,selectedPapersList:F,setSelectedPapersList:P,handlePaperSelection:R,mounted:i}),l.a.createElement("div",{className:"no-results"}," ",l.a.createElement(Ze,null)," ",l.a.createElement("p",{className:"not-found-description"}," Nothing was found ")," "));else if(h.length>0&&""!==k.query){var D=F.map(function(e){return e.eid});A=l.a.createElement(l.a.Fragment,null,l.a.createElement(We,{project_id:a,selectedPapersList:F,setSelectedPapersList:P,handlePaperSelection:R,mounted:i}),l.a.createElement(Ue,{papersList:h,handlePaperSelection:R,selectedEidList:D}),l.a.createElement(ee,{start:k.start,count:k.count,totalResults:w,path:n.url}))}return l.a.createElement(l.a.Fragment,null,l.a.createElement(st,{history:s,queryData:k,project_id:a}),l.a.createElement("div",{className:"search-automated-option",style:{display:""===k.query?"block":"none"}},l.a.createElement("p",null,l.a.createElement("i",null,"or"),l.a.createElement("br",null),"let an algorithm provide search results for you"),l.a.createElement(o.b,{to:"/projects/"+a+"/searchautomated"},l.a.createElement(it,null))),l.a.createElement("div",{className:"search-results",style:{display:""!==k.query?"block":"none"}},l.a.createElement("div",{className:"paper-card-holder"},l.a.createElement("div",{className:"paper-card-holder-head",style:{pointerEvents:v&&0!==h.length?"":"none",opacity:0===h.length?"0.0":"1.0"}},l.a.createElement("div",{className:"select-all"},l.a.createElement(we,{label:"Select All",name:"select_all",val:"",isChecked:ce(F,h,"eid"),handler:function(e){var t;if(ce(F,h,"eid")){var a=h.map(function(e){return{eid:e.eid,title:e.title}});t=F.filter(function(e){return!a.some(function(t){return t.eid===e.eid})})}else{var r=h.map(function(e){return{eid:e.eid,title:e.title}}),n=[].concat(Object(be.a)(r),Object(be.a)(F));t=ot.uniqBy(n,"eid")}P(t),S.setItem("selectedPapersList",JSON.stringify(t))}})),l.a.createElement("div",{className:"order"},l.a.createElement("div",{className:"order-flex-item"},l.a.createElement("label",null,"sort by:"),l.a.createElement(Ye,{options:ut,selected:ie(ut,"value",k.orderBy),handler:function(e){var t=parseInt(e.target.getAttribute("data-value"));k.orderBy=ut[t].value;var a=se(k);s.push(a)}}),l.a.createElement("button",{type:"button",onClick:function(e){"ASC"===k.sort?k.sort="DESC":k.sort="ASC";var t=se(k);s.push(t)}},l.a.createElement($e,{display:!0,up:k.sort}))))),A)))};function dt(){return(dt=Object(d.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.pdf_parse_server,e.next=3,_.postFile(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ft(){return(ft=Object(d.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.csv_parse_server,e.next=3,_.postFile(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ht={updatePdf:function(e){return dt.apply(this,arguments)},uploadCsv:function(e){return ft.apply(this,arguments)},abortRequest:_.abortRequest},bt=function(e){return l.a.createElement("svg",{id:"go-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("polyline",{className:"st1-go",points:"371.7,481.9 500,609.9 628.3,481.9 ",transform:"matrix(0,-1.4834458,1.4856134,0,-92.453824,1228.1491)"}),l.a.createElement("line",{className:"st0-go",x1:"810.69312",y1:"486.42624",x2:"206.34099",y2:"486.42624"}))},Et=function(e){e.close;var t=e.style,a=(e.project_id,e.input),r=e.handler,n=e.paperInfo,s=e.fetching,i=e.setPaperInfo,o=e.setPaperFile,u=e.history,m="",f="",h=Object(c.useRef)(null);function b(){return(b=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.current.files[0]&&o(h.current.files[0]);case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return m=s?l.a.createElement("div",{className:"load-icon-similar-paper"},l.a.createElement(W,null)):n&&n.title?l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",{className:"similar-paper-title"},n.title),l.a.createElement(Oe.a,{text:n.abstract||"",lines:4,ellipsis:"...",className:"similar-paper-paragraph",moreText:"more",lessText:"less"})):l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"similar-description"},"Search for Similar Papers"),l.a.createElement("div",{className:"DOI-holder"},l.a.createElement("input",{type:"text",placeholder:"type DOI, EID, or paper title",value:a,onChange:r,name:"query"}),l.a.createElement("button",{className:"go-search-similar DOI-btn",type:"submit",value:"Submit"},l.a.createElement(bt,null))),l.a.createElement("p",{className:"or"},"or"),l.a.createElement("div",{className:"file-input-container"},l.a.createElement("input",{type:"file",id:"real-input",ref:h,onChange:function(){return b.apply(this,arguments)}}),l.a.createElement("button",{type:"button",className:"browse-btn",onClick:function(){h.current.click()}},"Upload a Paper"))),f=n?l.a.createElement("button",{type:"button",className:"close-btn red-x",onClick:function(e){i(void 0),o(void 0),u.push({})}},l.a.createElement(Z,null)):l.a.createElement(l.a.Fragment,null),l.a.createElement("div",{style:Object(R.a)({},t),className:"light-modal similar-search-paper-upload"},f,m)},gt=function(e){var t=e.history,a=e.queryData,r=e.project_id,n=e.targetPaperData,s=e.setTargetPaperData,i=Object(c.useState)(!1),u=Object(f.a)(i,2),m=u[0],h=u[1],b=Object(c.useState)(!1),E=Object(f.a)(b,2),g=E[0],v=E[1],y=Object(c.useState)(a.query),x=Object(f.a)(y,2),j=x[0],w=x[1],N=Object(c.useState)(void 0),O=Object(f.a)(N,2),k=O[0],S=O[1],_=(window.localStorage,Object(c.useContext)(L));function C(){return(C=Object(d.a)(p.a.mark(function e(r){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("SUBMITTING SEARCH"),r&&r.preventDefault(),console.log("similarity search was called"),""!==j||k?(k?(console.log("there's a file"),a.query=""):(console.log("there isn't a file"),a.query=j),n=se(a),t.push(n)):_.setNotificationMessage("Similar paper string is empty");case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(c.useEffect)(function(){var e=!0;console.log("FETCHING TARGET PAPER"),console.log(a);var t=function(){var t=Object(d.a)(p.a.mark(function t(){var r,n,c;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&(w(a.query),s(void 0)),!k||""!==a.query){t.next=18;break}if(console.log("FILE NAME : "+k.name),/\.(pdf|PDF)$/.test(k.name)&&-1!==k.type.indexOf("application/pdf")){t.next=7;break}_.setNotificationMessage("The file must be a pdf!"),t.next=16;break;case 7:return v(!0),console.log("FETCHING PARSE PDF"),(r=new FormData).append("file",k),console.log("CALLING THE PAPER PARSER SERVICE"),t.next=14,ht.updatePdf(r);case 14:n=t.sent,e&&n&&n.message?(_.setNotificationMessage("Error during parsing file"),v(!1),s(void 0),S(void 0)):e&&(console.log(n),s(n),v(!1));case 16:t.next=28;break;case 18:if(""===a.query){t.next=26;break}return v(!0),t.next=22,xe.search({query:a.query,scopus:!0});case 22:c=t.sent,e&&c&&"Not Found"===c.message?(s({title:"unable to retrieve paper"}),v(!1)):e&&c&&c.message?_.setError(c):e&&(console.log("setting target paper data"),s(c.results[0]),v(!1)),t.next=28;break;case 26:console.log("no file (& no similarPaperString)"),v(!1);case 28:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return n&&a.query===j||t(),function(){e=!1}},[r,k,a.query]),l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:""!==a.query||k||n?"search-form small":"search-form",style:{marginTop:m?"30px":"60px"},onSubmit:function(e){return C.apply(this,arguments)}},l.a.createElement(Et,{style:{boxShadow:"0px 0px 3px -1px rgba(0, 0, 0, 0.25)"},project_id:r,close:h,handler:function(e){switch(e.target.name){case"query":w(e.target.value)}},input:j,paperInfo:n,fetching:g,setPaperInfo:s,setPaperFile:S,history:t})),l.a.createElement("div",{className:g||n?"top-right-side-wrapper search-similar-description-wrapper":"center-side-wrapper search-similar-description-wrapper"},l.a.createElement("div",{className:"search-similar-description"},l.a.createElement("p",null,"This searching mode leverages AI to find relevant papers based on the topic and focus of the given paper."),l.a.createElement(o.b,{to:"/projects/"+r+"/search"},"(Go back to a normal search)"))))},vt=a(73),yt=[{label:"Title",value:"title"},{label:"Date",value:"date"}],xt=[{label:"query",default:""},{label:"orderBy",default:"title"},{label:"sort",default:"ASC"},{label:"start",default:0},{label:"count",default:10}],jt=function(e){var t=e.project_id,a=e.location,r=e.match,n=e.history,s=Object(c.useRef)(!1);window.onbeforeunload=function(e){window.localStorage.removeItem("targetPaperData")};var i,o,u=Object(c.useState)([]),m=Object(f.a)(u,2),h=m[0],b=m[1],E=Object(c.useState)(!0),g=Object(f.a)(E,2),v=g[0],y=g[1],x=Object(c.useState)(0),j=Object(f.a)(x,2),w=j[0],N=j[1],O=Object(c.useContext)(L),k=oe(a.search,xt),S=window.localStorage;window.localStorage||console.log("the browser must be support localStorage"),i=S.getItem("selectedPapersList")?JSON.parse(S.getItem("selectedPapersList")):[],o=S.getItem("targetPaperData")?JSON.parse(S.getItem("targetPaperData")):null;var _=Object(c.useState)(i),C=Object(f.a)(_,2),F=C[0],P=C[1],I=Object(c.useState)(o),T=Object(f.a)(I,2),B=T[0],M=T[1],R=Object(c.useState)(k.sort),A=Object(f.a)(R,2),D=A[0],X=A[1];Object(c.useEffect)(function(){return s.current=!0,function(){s.current=!1}},[]),Object(c.useEffect)(function(){var e=!0;return console.log("FETCHING RESULTS"),console.log(B),D!==k.sort&&(X(k.sort),document.getElementById("ani-order-arrow")&&document.getElementById("ani-order-arrow").beginElement()),B&&"unable to retrieve paper"!==B.title?function(){var t=Object(d.a)(p.a.mark(function t(){var a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return y(!1),S.setItem("targetPaperData",JSON.stringify(B)),t.next=4,xe.searchSimilar({paperData:B,start:k.start,count:k.count,scopus:!0});case 4:a=t.sent,e&&a&&"Not Found"===a.message?(b([]),N(0),y(!0)):e&&a&&a.message?O.setError(a):e&&null!==a?(console.log("SETTING RESULTS"),b(a.results),N(a.totalResults),y(!0)):console.log("can't set enything");case 6:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()():(b([]),N(0),S.removeItem("targetPaperData")),function(){e=!1}},[B,k.orderBy,k.sort,k.start,k.count]);var q="";function H(e){var t,a=e.target.value,r=e.target.name;-1===ie(F,"eid",a)?(t=Object(be.a)(F)).push({eid:a,title:r}):t=F.filter(function(e){return e.eid!==a}),P(t),S.setItem("selectedPapersList",JSON.stringify(t))}if(!1===v&&B)q=l.a.createElement(l.a.Fragment,null,l.a.createElement(We,{project_id:t,selectedPapersList:F,setSelectedPapersList:P,handlePaperSelection:H,mounted:s}),l.a.createElement("div",{className:"search-loading-holder"},l.a.createElement(W,{class:"small"})));else if(0===h.length&&B)q=l.a.createElement(l.a.Fragment,null,l.a.createElement(We,{project_id:t,selectedPapersList:F,setSelectedPapersList:P,handlePaperSelection:H,mounted:s}),l.a.createElement("div",{className:"no-results"}," ",l.a.createElement(Ze,null)," ",l.a.createElement("p",{className:"not-found-description"}," Nothing was found ")," "));else if(h.length>0&&B){var z=F.map(function(e){return e.eid});q=l.a.createElement(l.a.Fragment,null,l.a.createElement(We,{project_id:t,selectedPapersList:F,setSelectedPapersList:P,handlePaperSelection:H,mounted:s}),l.a.createElement(Ue,{papersList:h,handlePaperSelection:H,selectedEidList:z,setTargetPaperData:M}),l.a.createElement(ee,{start:k.start,count:k.count,totalResults:w,path:r.url}))}return l.a.createElement(l.a.Fragment,null,l.a.createElement(gt,{history:n,queryData:k,project_id:t,targetPaperData:B,setTargetPaperData:M}),l.a.createElement("div",{className:"search-results"},l.a.createElement("div",{className:"paper-card-holder similar-holder"},l.a.createElement("div",{className:"paper-card-holder-head",style:{pointerEvents:v&&0!==h.length?"":"none",opacity:B&&0!==h.length?"1.0":"0.0"}},l.a.createElement("div",{className:"select-all"},l.a.createElement(we,{label:"Select All",name:"select_all",val:"",isChecked:ce(F,h,"eid"),handler:function(e){var t;if(ce(F,h,"eid")){var a=h.map(function(e){return{eid:e.eid,title:e.title}});t=F.filter(function(e){return!a.some(function(t){return t.eid===e.eid})})}else{var r=h.map(function(e){return{eid:e.eid,title:e.title}}),n=[].concat(Object(be.a)(r),Object(be.a)(F));t=vt.uniqBy(n,"eid")}P(t),S.setItem("selectedPapersList",JSON.stringify(t))}})),l.a.createElement("div",{className:"order"},l.a.createElement("div",{className:"order-flex-item"},l.a.createElement("label",null,"sort by:"),l.a.createElement(Ye,{options:yt,selected:ie(yt,"value",k.orderBy),handler:function(e){var t=parseInt(e.target.getAttribute("data-value"));k.orderBy=yt[t].value;var a=se(k);n.push(a)}}),l.a.createElement("button",{type:"button",onClick:function(e){"ASC"===k.sort?k.sort="DESC":k.sort="ASC";var t=se(k);n.push(t)}},l.a.createElement($e,{display:!0,up:k.sort}))))),q)))},wt=function(e){var t=e.options,a=e.form,r=e.name,n=e.type,s=e.code,i=Object(c.useState)(!1),o=Object(f.a)(i,2),u=o[0],m=o[1],p=Object(c.useState)(0),d=Object(f.a)(p,2),h=d[0],b=d[1];function E(e){var t=parseInt(e.target.getAttribute("data-value"));b(t)}function g(e){"click"===e?(document.getElementById(isNaN(s)?"ani-select-arrow":"ani-select-arrow"+s).beginElement(),m(!u)):u&&(document.getElementById(isNaN(s)?"ani-select-arrow":"ani-select-arrow"+s).beginElement(),m(!1))}return Object(c.useEffect)(function(){a.setFieldValue(r,t[h].value)},[h]),l.a.createElement("div",{className:n?"custom-select "+n:"custom-select"},l.a.createElement("div",{className:"selected",tabIndex:-2,onBlur:function(){g("blur")},onClick:function(){g("click")}},t[h].label," ",l.a.createElement("div",{className:"arrow"},l.a.createElement(Je,{focused:u,code:s}))),l.a.createElement("div",{className:"options-holder",style:{fontSize:u?"15px":"0px",borderBottom:u?"1px solid #d7d7d7":"0px solid #d7d7d7",borderLeft:u?"1px solid #d7d7d7":"0px solid #d7d7d7",borderRight:u?"1px solid #d7d7d7":"0px solid #d7d7d7",borderTop:"none"}},t.map(function(e,t){return l.a.createElement("div",{key:t,"data-value":t,className:"option",style:{padding:u?"2px":"0px"},onMouseDown:E},e.label)})))},Nt=[{value:"article",label:"Article"},{value:"book_chapter",label:"Book Chapter"},{value:"conf_publication",label:"Conf. Publication"}];var Ot=function(e){var t=Object(c.useRef)(!1),r=a(54);Object(c.useEffect)(function(){return t.current=!0,function(){t.current=!1}},[]);var n=r.object().shape({title:r.string().required("please enter a title"),authors:r.string().required("please enter an author"),year:r.number().required("please enter a year").min(1e3).max((new Date).getFullYear()+1).integer(),abstract:r.string().required("please enter the abstract")}),s=Object(c.useContext)(L);return l.a.createElement(l.a.Fragment,null,l.a.createElement($.c,{initialValues:{title:e.customPaper&&e.customPaper.title||"",authors:e.customPaper&&e.customPaper.authors||"",year:e.customPaper&&e.customPaper.year||"",abstract:e.customPaper&&e.customPaper.abstract||"",document_type:e.customPaper&&e.customPaper.document_type||"",doi:e.customPaper&&e.customPaper.doi||""},validationSchema:n,onSubmit:function(){var a=Object(d.a)(p.a.mark(function a(r,n){var c,l,i,o;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=n.setSubmitting,l=n.resetForm,void 0===r.doi&&(r.doi=""),i=Object(R.a)({},r,{year:r.year.toString(),source_title:r.title,link:"custom_paper",source:"slr_custom_papers",abstract_structured:"0",filter_oa_include:"0",filter_study_include:"0",notes:"",manual:"true"}),console.log(i),a.next=6,Ie.postCustomPaperIntoProject({paper:i,project_id:e.projectId});case 6:o=a.sent,t.current&&o&&o.message?s.setError(o):t.current&&(s.setNotificationMessage("Paper added successfully"),l({title:"",authors:"",year:"",abstract:"",document_type:"",doi:""}),c(!1),e.history.push(e.url));case 8:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}(),validateOnBlur:!1},function(e){var t=e.errors,a=e.touched,r=e.isValid,n=e.isSubmitting;return l.a.createElement($.b,{className:"new-paper-form"},l.a.createElement($.a,{style:{borderBottom:t.title&&a.title?"1px solid #d81e1e":""},id:"title",name:"title",type:"text",placeholder:"Paper Title"}),l.a.createElement("div",{className:"new-paper-form-ad"},l.a.createElement("div",{className:"author-year"},l.a.createElement($.a,{style:{borderBottom:t.authors&&a.authors?"1px solid #d81e1e":""},name:"authors",type:"text",placeholder:"paper author"}),l.a.createElement($.a,{style:{borderBottom:t.year&&a.year?"1px solid #d81e1e":""},name:"year",type:"number",placeholder:"year"})),l.a.createElement("div",{className:"type-doi"},l.a.createElement($.a,{name:"document_type",render:function(e){var t=e.field,a=e.form;return l.a.createElement(wt,Object.assign({options:Nt},t,{form:a}))}}),l.a.createElement($.a,{name:"doi",type:"text",placeholder:"DOI(optional)"}))),l.a.createElement($.a,{style:{borderBottom:t.abstract&&a.abstract?"1px solid #d81e1e":""},name:"abstract",placeholder:"Paper Abstract",component:"textarea"}),l.a.createElement("button",{type:"submit",disabled:n||!r},"Add paper"))}))},kt=function(e){return l.a.createElement("svg",{version:"1.1",id:"h-load",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 600 200"},l.a.createElement("g",{className:e.className?"st0-h-load-wrap "+e.className:"st0-h-load-wrap"},l.a.createElement("circle",{className:"st0-h-load",cx:"125",cy:"100",r:"40"},l.a.createElement("animate",{id:"one",begin:"0s; three.end-0.3s",repeatCount:"1",attributeType:"XML",attributeName:"r",from:"40",to:"40",dur:"0.8s",calcMode:"spline",values:"40; 60; 40",keySplines:"0.31896551724137934 0.05142857142857143 0.47413793103448276 0.9628571428571429;0.31896551724137934 0.05142857142857143 0.47413793103448276 0.9628571428571429",fill:"freeze"})),l.a.createElement("circle",{className:"st0-h-load",cx:"300",cy:"100",r:"40"},l.a.createElement("animate",{id:"two",begin:"one.end-0.3s",repeatCount:"1",attributeType:"XML",attributeName:"r",from:"40",to:"40",dur:"0.8s",calcMode:"spline",values:"40; 60; 40",keySplines:"0.31896551724137934 0.05142857142857143 0.47413793103448276 0.9628571428571429;0.31896551724137934 0.05142857142857143 0.47413793103448276 0.9628571428571429",fill:"freeze"})),l.a.createElement("circle",{className:"st0-h-load",cx:"475",cy:"100",r:"40"},l.a.createElement("animate",{id:"three",begin:"two.end-0.3s",repeatCount:"1",attributeType:"XML",attributeName:"r",from:"40",to:"40",dur:"0.8s",calcMode:"spline",values:"40; 60; 40",keySplines:"0.31896551724137934 0.05142857142857143 0.47413793103448276 0.9628571428571429;0.31896551724137934 0.05142857142857143 0.47413793103448276 0.9628571428571429",fill:"freeze"}))))};var St=function(e){var t=e.projectId,a=e.url,r=e.history,n=Object(c.useRef)(!1),s=Object(c.useState)(!1),i=Object(f.a)(s,2),o=i[0],u=i[1],m=Object(c.useState)(void 0),h=Object(f.a)(m,2),b=h[0],E=h[1],g=Object(c.useState)(!1),v=Object(f.a)(g,2),y=v[0],x=v[1],j=Object(c.useRef)(null),w=Object(c.useContext)(L);function N(){return(N=Object(d.a)(p.a.mark(function e(){var t,a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=j.current.files[0])){e.next=14;break}if(/\.(pdf|PDF)$/.test(t.name)&&-1!==t.type.indexOf("application/pdf")){e.next=6;break}w.setNotificationMessage("The file must be a pdf!"),e.next=14;break;case 6:return u(!0),(a=new FormData).append("file",t),e.next=11,ht.updatePdf(a);case 11:r=e.sent,n.current&&r&&r.message?w.setNotificationMessage("Error during parsing file"):n.current&&(E(r),x(!0)),n.current&&u(!1);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(c.useEffect)(function(){return n.current=!0,function(){n.current=!1}},[]),y||o?o?l.a.createElement("div",{className:"new-paper-page-wrapper"},l.a.createElement("div",{className:"file-input-container"},l.a.createElement("input",{type:"file",id:"real-input"}),l.a.createElement("button",{type:"button",className:"browse-btn",disabled:"true"},l.a.createElement(kt,null))),"or",l.a.createElement("br",null),l.a.createElement("button",{type:"button",onClick:function(){u(!1),x(!0)}},"abort and insert data manually")):l.a.createElement(Ot,{projectId:t,url:a,history:r,customPaper:b}):l.a.createElement("div",{className:"new-paper-page-wrapper"},l.a.createElement("div",null,l.a.createElement("div",{className:"file-input-container"},l.a.createElement("input",{type:"file",name:"file",id:"real-input",ref:j,onChange:function(){return N.apply(this,arguments)}}),l.a.createElement("button",{type:"button",className:"browse-btn",onClick:function(){j.current.click()}},"Upload a Paper")),"or",l.a.createElement("br",null),l.a.createElement("button",{type:"button",onClick:function(){x(!0)}},"insert data manually")))},_t=function(e){var t=e.confirm;l.a.createElement(l.a.Fragment,null);return t?l.a.createElement("svg",{version:"1.1",id:"confirm-edit-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("polyline",{className:"st-confirm",points:"918,192.3 389.3,807.7 82,450 "})):l.a.createElement("svg",{version:"1.1",id:"edit-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("path",{className:"st-pencil",d:"M224,632.3l-81.6,225.3L367.7,776l0,0L833,310.7c39.4-39.4,39.9-103.3,0.7-142.9c-0.5-0.5-1-1-1.4-1.4 c-39.6-39.2-103.6-38.7-142.9,0.7L224,632.3L224,632.3z"}),l.a.createElement("path",{className:"st-pencil-border",d:"M367.7,776c-24-71.7-71.9-119.6-143.7-143.7"}),l.a.createElement("path",{className:"st-pencil",d:"M805.7,338c-24-71.7-71.9-119.6-143.7-143.7"}))},Ct=function(e){var t=e.project,a=e.setProject,r=Object(c.useRef)(!1),n=Object(c.useContext)(L),s=Object(c.useState)(!1),i=Object(f.a)(s,2),o=i[0],u=i[1],m=Object(c.useState)(t.data.name),h=Object(f.a)(m,2),b=h[0],E=h[1];function g(){return(g=Object(d.a)(p.a.mark(function e(){var c,l;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b===t.data.name){e.next=5;break}return e.next=3,K.putProject(t.id,{name:b,description:t.data.description});case 3:c=e.sent,r.current&&""===c?(console.log("we got a success"),(l=t).data.name=b,a(Object(R.a)({},l))):r.current&&c&&c.message&&n.setError(c);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(c.useEffect)(function(){return r.current=!0,function(){r.current=!1}},[]),l.a.createElement("div",{className:o?"nav-elements":"nav-elements hidden-form"},l.a.createElement("h2",{style:{fontSize:o?"0px":"21px"}},t.data.name),l.a.createElement("form",{className:"edit-project-name",onClick:function(e){o||(document.getElementById("edit-project-name-input").focus(),u(!o))},onSubmit:function(e){e.preventDefault()}},l.a.createElement("input",{type:"text",id:"edit-project-name-input",value:b,style:{width:o?"":"0px",padding:o?"":"0px"},onChange:function(e){return E(e.target.value)},onBlur:function(e){u(!1)}}),l.a.createElement("button",{className:"edit-button",onMouseDown:function(e){o&&(function(){g.apply(this,arguments)}(),u(!o))},type:"button"},l.a.createElement(_t,{confirm:o}))))},Ft=function(e){return l.a.createElement("svg",{version:"1.1",id:"forbidden",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("circle",{className:"st0-forbidden",cx:"500",cy:"500",r:"397"}),l.a.createElement("g",null,l.a.createElement("line",{className:"st1-forbidden",x1:"780.2",y1:"780.2",x2:"218.8",y2:"218.8"})))},Pt=function(e){return l.a.createElement("svg",{version:"1.1",id:"ghost",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("path",{className:"st0-ghost",d:"M949.5,759c-34.3-97-89.7-188.9-98.5-293.2c0-0.3,0-0.6,0-0.9s-0.8-0.1-0.1-1c-5.7-99-58.2-209-174.7-205.1 C550.8,263,499.5,395.2,512,505.6c16.2,110.9,19.6,217.5,6.4,329"}),l.a.createElement("ellipse",{transform:"matrix(1.122617e-02 -0.9999 0.9999 1.122617e-02 200.0576 961.9827)",cx:"586.5",cy:"379.8",rx:"21.8",ry:"27.4"}),l.a.createElement("ellipse",{transform:"matrix(1.122617e-02 -0.9999 0.9999 1.122617e-02 329.3011 1095.6136)",cx:"718.6",cy:"381.3",rx:"21.8",ry:"29.1"}),l.a.createElement("path",{d:"M678.8,453.7c2.3,22-9.1,49.7-35.9,45.1c-26.8-4.6-21.4-27.8-21.6-47.3c-0.2-19.5-3-38.9,20.7-41.1S676.5,431.7,678.8,453.7 z"}),l.a.createElement("path",{className:"st1-ghost",d:"M407.8,331.6c31.9-17.6,51.3-40.8,51.3-66.3c0-55.2-91.5-100-204.3-100s-204.3,44.8-204.3,100 s91.5,100,204.3,100c33.7,0,65.5-4,93.6-11.1c21.9,31.4,51.9,40.2,98.4,39.6C417.6,378.1,408.1,355.2,407.8,331.6z"}),l.a.createElement("text",{transform:"matrix(1 0 0 1 159.4091 299.821)",className:"st2-ghost"},"404"),l.a.createElement("path",{className:"st0-ghost",d:"M518.4,834.6l18.3-11.6c25.3-16.1,57.5-16.4,83.2-0.9l0,0c25.3,15.3,56.9,15.2,82.1-0.2l33.1-20.3 c34.3-21,76.8-23.7,113.5-7.1l0,0c37.7,17,82.1,1.4,100.8-35.5l0,0"}))},It=function(e){return l.a.createElement("div",{className:"page-not-found-wrapper"},l.a.createElement(Pt,null))},Tt=[{value:"date_created",label:"Recently Added"},{value:"title",label:"Title"},{value:"authors",label:"Authors"}],Lt=[{label:"orderBy",default:"date_created"},{label:"sort",default:"ASC"},{label:"start",default:0},{label:"count",default:10}],Bt=function(e){var t,a=e.project_id,r=e.location,n=e.match,s=e.history,i=e.forcePapersFetch,o=Object(c.useState)([]),u=Object(f.a)(o,2),m=u[0],h=u[1],b=Object(c.useState)(0),E=Object(f.a)(b,2),g=E[0],v=E[1],y=Object(c.useState)(!1),x=Object(f.a)(y,2),j=x[0],w=x[1],N=Object(c.useContext)(L),O=oe(r.search,Lt),k=Object(c.useState)(O.sort),S=Object(f.a)(k,2),_=S[0],C=S[1];return Object(c.useEffect)(function(){var e=!0;return"date_created"!==O.orderBy&&_!==O.sort&&(C(O.sort),document.getElementById("ani-order-arrow").beginElement()),function(){var t=Object(d.a)(p.a.mark(function t(){var r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w(!1),t.next=3,Ie.getPapersList(Object(R.a)({project_id:a,type:"all"},O));case 3:r=t.sent,e&&r&&"Not Found"===r.message?(h([]),v(0),w(!0)):e&&r&&r.message?N.setError(r):e&&r&&(h(r.results),v(r.totalResults),w(!0));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[O.start,O.count,O.sort,O.orderBy,i]),t=!1===j?l.a.createElement(l.a.Fragment,null,l.a.createElement(W,{class:"small"})):l.a.createElement(l.a.Fragment,null,l.a.createElement(qe,{papersList:m,location:r,history:s}),l.a.createElement(ee,{start:O.start,count:O.count,totalResults:g,path:n.url})),t=l.a.createElement("div",{className:"left-side-wrapper"},l.a.createElement("div",{className:"paper-card-holder"},l.a.createElement("div",{className:"order",style:{pointerEvents:j&&0!==m.length?"":"none",opacity:0===m.length?"0.0":"1.0"}},l.a.createElement("div",{className:"order-flex-item"},l.a.createElement("label",null,"sort by:"),l.a.createElement(Ye,{options:Tt,selected:ie(Tt,"value",O.orderBy),handler:function(e){var t=parseInt(e.target.getAttribute("data-value"));"date_created"===O.orderBy&&(O.sort="ASC"),O.orderBy=Tt[t].value;var a=se(O);s.push(a)}}),l.a.createElement("button",{type:"button",onClick:function(e){"ASC"===O.sort?O.sort="DESC":O.sort="ASC";var t=se(O);s.push(t)},style:{display:"date_created"===O.orderBy?"none":""}},l.a.createElement($e,{up:_})))),t))},Mt=function(e){var t=e.project,a=e.setProject,r=e.collaborators,n=e.setCollaborators,s=Object(c.useRef)(!1),i=Object(c.useState)(!1),o=Object(f.a)(i,2),u=o[0],m=o[1],h=Object(c.useState)(t.data.description),b=Object(f.a)(h,2),E=b[0],g=b[1],v=Object(c.useState)(""),y=Object(f.a)(v,2),x=y[0],j=y[1],w=Object(c.useState)(!0),N=Object(f.a)(w,2),O=N[0],k=N[1],S=Object(c.useContext)(L);l.a.createElement(l.a.Fragment,null);function _(){return(_=Object(d.a)(p.a.mark(function e(){var r,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E===t.data.description){e.next=6;break}return e.next=3,K.putProject(t.id,{name:t.data.name,description:E});case 3:r=e.sent,console.log(r),s.current&&""===r?(console.log("scccc"),(n=t).data.description=E,a(Object(R.a)({},n)),console.log(t)):s.current&&r&&r.message&&S.setError(r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(e){return l.a.createElement("span",{className:"date"},e.slice(0,10)," at ",e.slice(11,19))}function F(){return(F=Object(d.a)(p.a.mark(function e(a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("removing "+a+" from "+t.id),function(){var e=Object(d.a)(p.a.mark(function e(){var c,l;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.removeProjectCollaborator(t.id,a);case 2:c=e.sent,s.current&&c&&c.message?S.setError(c):(l=r.filter(function(e){return e.id!==a}),console.log(l),n(l));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()();case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(){return(P=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.includes(x)||(console.log("adding "+x),function(){var e=Object(d.a)(p.a.mark(function e(){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.addProjectCollaborator(t.id,{email:x});case 2:a=e.sent,s.current&&a&&a.message?S.setError(a):a&&(j(""),n([].concat(Object(be.a)(r),[a])));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()());case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(c.useEffect)(function(){return s.current=!0,function(){var e=Object(d.a)(p.a.mark(function e(){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.getProjectCollaborators(t.id);case 2:a=e.sent,s.current&&a&&a.message?S.setError(a):s.current&&a&&(S.user&&n(a.filter(function(e){return e.data.email!==S.user.email})),k(!1));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),function(){s.current=!1}},[]),O?l.a.createElement("div",{className:"right-side-wrapper project-description hidden-form-description"},l.a.createElement("h2",null,"Description:"),l.a.createElement(W,null)):l.a.createElement("div",{className:u?"right-side-wrapper project-description":"right-side-wrapper project-description hidden-form-description"},l.a.createElement("h2",null,"Description:"),l.a.createElement("p",{style:{fontSize:u?"0px":"15px"}}," ",t.data.description),l.a.createElement("form",{className:"edit-project-description",style:{height:u?"":"0px"}},l.a.createElement("textarea",{id:"edit-project-description-input",value:E,style:{width:u?"100%":"0%",padding:u?"":"0px",height:u?"":"0px"},onChange:function(e){return g(e.target.value)},onBlur:function(e){console.log("blurring"),m(!1)}}),l.a.createElement("button",{className:"edit-button",onMouseDown:function(e){console.log("CLICK"),u?function(){_.apply(this,arguments)}():(setTimeout(function(){document.getElementById("edit-project-description-input").focus()},100),m(!0),console.log(u))},type:"button"},l.a.createElement(_t,{confirm:u}))),l.a.createElement("h2",null,"Additional info:"),l.a.createElement("p",{className:"project-date-info"}," ",l.a.createElement("span",null,"Created")," ",C(t.date_created)," "),l.a.createElement("p",{className:"project-date-info"}," ",l.a.createElement("span",null,"Last edited")," ",C(t.date_last_modified)," "),l.a.createElement("h2",null,"Collaborators:"),r&&0!==r.length?"":"You're not sharing this project with anyone",r?r.map(function(e,t){return l.a.createElement("div",{className:"collaborator-wrapper",key:t},l.a.createElement("p",{className:"collaborator"},e.data.email),l.a.createElement("button",{type:"button",className:"remove-btn",name:e.data.email,value:e.data.email,onClick:function(t){!function(e){F.apply(this,arguments)}(e.id)}},l.a.createElement(Ke,null)))}):l.a.createElement(l.a.Fragment,null),l.a.createElement("form",{className:"add-collaborator",onSubmit:function(){return P.apply(this,arguments)}},l.a.createElement("input",{type:"text",id:"edit-project-description-input",placeholder:"add a collaborator",value:x,onChange:function(e){j(e.target.value)}}),l.a.createElement("button",{className:"add-collaborator-button",disabled:!x||""===x})))};var Rt=function(e){var t=Object(c.useContext)(L),a=Object(c.useState)(""),r=Object(f.a)(a,2),n=r[0],s=r[1],i=Object(c.useState)(""),o=Object(f.a)(i,2),u=o[0],m=o[1],h=Object(c.useState)(""),b=Object(f.a)(h,2),E=b[0],g=b[1],v=Object(c.useState)(""),y=Object(f.a)(v,2),x=y[0],j=y[1],w=Object(c.useState)(""),N=Object(f.a)(w,2),O=N[0],k=N[1],S=Object(c.useState)(!1),_=Object(f.a)(S,2),C=_[0],F=_[1],P=Object(c.useRef)(null);function I(){return(I=Object(d.a)(p.a.mark(function a(){var r,c,l,s;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=P.current.files[0],console.log(r.name),!r){a.next=19;break}if(/\.(csv|CSV)$/.test(r.name)){a.next=7;break}t.setNotificationMessage("The file must be a csv!"),a.next=19;break;case 7:return F(!0),c={authors:x&&""!==x?x:"Authors",title:n&&""!==n?n:"Title",year:u&&""!==u?u:"Year",date:"",source_title:"",link:"",abstract:E&&""!==E?E:"Abstract",document_type:"",source:"",eid:!O||"eid"!==O&&"EID"!==O?O?"":"EID":O,abstract_structured:"",filter_oa_include:"",filter_study_include:"",notes:"",manual:"",doi:!O||"doi"!==O&&"DOI"!==O?"":O},(l=new FormData).append("file",r),l.append("project_id",e.project_id),l.append("fields",JSON.stringify(c)),a.next=15,ht.uploadCsv(l);case 15:s=a.sent,console.log(s),s&&s.message?t.setNotificationMessage("Error during parsing file"):(e.setForcePapersFetch(!e.forcePapersFetch),e.setVisibility(!e.visibility)),setTimeout(function(){F(!1)},2e3);case 19:case"end":return a.stop()}},a)}))).apply(this,arguments)}var T="";return T=C?l.a.createElement(W,null):l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{type:"button",className:"close-btn",onClick:function(t){e.setVisibility(!e.visibility)}},l.a.createElement(Z,null)),l.a.createElement("h2",null,"Upload papers CSV"),l.a.createElement("div",{className:"field-names"},l.a.createElement("p",null,"Field names",l.a.createElement("span",null,"(leave empty for default values)")),l.a.createElement("div",{className:"field-input-row"},l.a.createElement("div",{className:"field-input-holder"},l.a.createElement("label",null,"Title : "),l.a.createElement("input",{name:"name",type:"text",placeholder:"title",value:n,onChange:function(e){s(e.target.value)}})),l.a.createElement("div",{className:"field-input-holder"},l.a.createElement("label",null,"Year : "),l.a.createElement("input",{name:"name",type:"text",placeholder:"year",value:u,onChange:function(e){m(e.target.value)}}))),l.a.createElement("div",{className:"field-input-row"},l.a.createElement("div",{className:"field-input-holder"},l.a.createElement("label",null,"Abstract : "),l.a.createElement("input",{name:"name",type:"text",placeholder:"abstract",value:E,onChange:function(e){g(e.target.value)}})),l.a.createElement("div",{className:"field-input-holder"},l.a.createElement("label",null,"Authors : "),l.a.createElement("input",{name:"name",type:"text",placeholder:"authors",value:x,onChange:function(e){j(e.target.value)}}))),l.a.createElement("div",{className:"field-input-row"},l.a.createElement("div",{className:"field-input-holder"},l.a.createElement("label",null,"ID : "),l.a.createElement("input",{name:"name",type:"text",placeholder:"id, eid, doi, ...",value:O,onChange:function(e){k(e.target.value)}})))),l.a.createElement("input",{type:"file",name:"file",id:"real-input",ref:P,onChange:function(){return I.apply(this,arguments)}}),l.a.createElement("button",{className:"file-input",type:"button",onClick:function(){P.current.click()}},"Uplaod .csv file")),l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:"modal floating-form add-csv-papers",style:{visibility:e.visibility?"":"hidden"}},T))},At=function(e){var t=Object(c.useState)(!1),a=Object(f.a)(t,2),r=a[0],n=a[1],s=Object(c.useState)(!1),i=Object(f.a)(s,2),u=i[0],m=i[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(te,{cls:r?"full-screen":"",handler:n}),l.a.createElement(Rt,{visibility:r,setVisibility:n,project_id:e.project_id,forcePapersFetch:u,setForcePapersFetch:m}),l.a.createElement(Mt,{project:e.project,setProject:e.setProject,collaborators:e.collaborators,setCollaborators:e.setCollaborators}),l.a.createElement(Bt,{project_id:e.project_id,location:e.location,match:e.match,history:e.history,forcePapersFetch:u}),l.a.createElement("div",{className:"bottom-right-button-holder"},l.a.createElement("div",null,l.a.createElement("button",{className:"bottom-right-btn add-csv-papers-btn",type:"button",value:"toggle-insert-form",onClick:function(e){n(!r)}},l.a.createElement("div",{className:"btn-title"},"Upload .csv papers"),l.a.createElement("div",{className:"btn-icon"}," "))),l.a.createElement("div",null,l.a.createElement(o.b,{to:le(e.match.url,"/addpaper")},l.a.createElement("button",{className:"bottom-right-btn add-custompaper-btn"},l.a.createElement("div",{className:"btn-title"},"Add Custom Paper"),l.a.createElement("div",{className:"btn-icon"}," "))))))};function Dt(){return(Dt=Object(d.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.filters+"/"+t,e.next=3,_.get(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xt(){return(Xt=Object(d.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.filters,e.next=3,_.get(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qt(){return(qt=Object(d.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.filters,e.next=3,_.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ht(){return(Ht=Object(d.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.filters+"/"+t,e.next=3,_.delete(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zt(){return(zt=Object(d.a)(p.a.mark(function e(t,a){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.home+h.filters+"/"+t,e.next=3,_.put(r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ut={selectById:function(e){return Dt.apply(this,arguments)},getFiltersList:function(e){return Xt.apply(this,arguments)},postFilterIntoProject:function(e){return qt.apply(this,arguments)},deleteFilter:function(e){return Ht.apply(this,arguments)},putFilter:function(e,t){return zt.apply(this,arguments)},abortRequest:_.abortRequest},Vt=function(e){var t=Object(c.useRef)(!1),r=a(54),n=r.object().shape({predicate:r.string().required("please enter a question"),inclusion_description:r.string(),exclusion_description:r.string()}),s=Object(c.useContext)(L);Object(c.useEffect)(function(){return t.current=!0,function(){t.current=!1}},[]);return l.a.createElement("div",{className:"right-side-wrapper form-filter-wrapper"},l.a.createElement($.c,{initialValues:{predicate:"",inclusion_description:"",exclusion_description:""},validationSchema:n,onSubmit:function(){var a=Object(d.a)(p.a.mark(function a(r,n){var c,l,i,o;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=n.setSubmitting,l=n.resetForm,i={project_id:e.project_id,filter:{predicate:r.predicate,inclusion_description:r.inclusion_description,exclusion_description:r.exclusion_description}},a.next=4,Ut.postFilterIntoProject(i);case 4:o=a.sent,t.current&&o.message?s.setError(o):t.current&&o&&(console.log(o),e.setFiltersList([o].concat(Object(be.a)(e.filtersList)))),t.current&&(c(!1),l({predicate:"",inclusion_description:"",exclusion_description:""}));case 7:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}(),validateOnBlur:!1},function(e){var t=e.errors,a=e.touched,r=e.isSubmitting,n=e.isValid,c=(e.setErrors,e.validateField),s=e.handleChange;return l.a.createElement($.b,{className:"add-filter"},l.a.createElement($.a,{style:{borderBottom:t.predicate&&a.predicate?"solid 1px #d81e1e":""},name:"predicate",type:"text",placeholder:"Type a question, predicate, ...",onChange:function(e){s(e),c("predicate")}}),l.a.createElement($.a,{style:{borderBottom:t.inclusion_description&&a.inclusion_description?"solid 1px #d81e1e":""},name:"inclusion_description",component:"textarea",placeholder:"Type what the answer should include (optional)"}),l.a.createElement($.a,{style:{borderBottom:t.exclusion_description&&a.exclusion_description?"solid 1px #d81e1e":""},name:"exclusion_description",component:"textarea",placeholder:"Type what the answer should not include (optional)"}),l.a.createElement("button",{type:"submit",disabled:r||!n},"Add Filter"))}))},Gt=function(e){var t=e.project_id,a=e.filter,r=e.setFilter,n=e.yup,s=e.setEditing,i=Object(c.useRef)(!1),o=Object(c.useContext)(L);Object(c.useEffect)(function(){return i.current=!0,function(){i.current=!1}},[]);var u=n.object().shape({predicate:n.string().required("please enter a question"),inclusion_description:n.string(),exclusion_description:n.string()});return l.a.createElement($.c,{initialValues:{predicate:a.data.predicate,inclusion_description:a.data.inclusion_description,exclusion_description:a.data.exclusion_description},validationSchema:u,onSubmit:function(){var e=Object(d.a)(p.a.mark(function e(n,c){var l,u,m;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=c.setSubmitting,u={predicate:n.predicate,inclusion_description:n.inclusion_description,exclusion_description:n.exclusion_description},e.next=4,Ut.putFilter(a.id,Object(R.a)({project_id:t},u));case 4:m=e.sent,i.current&&""===m?r({id:a.id,data:Object(R.a)({name:a.data.name},u)}):i.current&&m&&m.message&&o.setError(m),i.current&&(l(!1),s(!1));case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),validateOnBlur:!1},function(e){var t=e.errors,a=e.touched,r=e.isSubmitting,n=e.isValid,c=(e.setErrors,e.validateField),i=e.handleChange;return l.a.createElement($.b,{className:"update-filter-card"},l.a.createElement("button",{type:"button",className:"close-btn",disabled:r,onClick:function(e){s(!1)}},l.a.createElement(Z,null)),l.a.createElement($.a,{style:{borderBottom:t.predicate&&a.predicate?"solid 1px #d81e1e":""},name:"predicate",type:"text",placeholder:"Type a question, predicate, ...",onChange:function(e){i(e),c("predicate")}}),l.a.createElement("div",{className:"textareas-description-wrapper"},l.a.createElement("div",null,"Positive answer"),l.a.createElement("div",null,"Negative answer")),l.a.createElement("div",{className:"textareas-wrapper"},l.a.createElement($.a,{style:{borderBottom:t.inclusion_description&&a.inclusion_description?"solid 1px #d81e1e":""},name:"inclusion_description",component:"textarea",placeholder:"Type what the answer should include (optional)"}),l.a.createElement($.a,{style:{borderBottom:t.exclusion_description&&a.exclusion_description?"solid 1px #d81e1e":""},name:"exclusion_description",component:"textarea",placeholder:"Type what the answer should not include (optional)"})),l.a.createElement("button",{type:"submit",disabled:r||!n},"Update Filter"))})},Jt=function(e){var t=e.project_id,a=e.filter,r=e.callDelete,n=e.yup,s=Object(c.useState)(a),i=Object(f.a)(s,2),o=i[0],u=i[1],m=Object(c.useState)(!1),p=Object(f.a)(m,2),d=p[0],h=p[1],b=Object(c.useState)(!1),E=Object(f.a)(b,2),g=E[0],v=E[1];return g?l.a.createElement(Gt,{project_id:t,filter:o,setFilter:u,yup:n,setEditing:v}):l.a.createElement("div",{className:d?"disabled":""},l.a.createElement(me,{options:["delete","update"],handler:function(e,t){"delete"===t?(h(!0),r(e)):"update"===t&&v(!0)},target:o.id,cls:"card-options"}),l.a.createElement("h3",null,l.a.createElement("span",{className:"filter-label"},o.data.name)," ",o.data.predicate),l.a.createElement("div",{className:"answer"},l.a.createElement("p",null,l.a.createElement("span",null,l.a.createElement("span",null,"Include"),l.a.createElement("span",null,":"))," ",o.data.inclusion_description||l.a.createElement("i",null,"empty criterion"))),l.a.createElement("div",{className:"answer"},l.a.createElement("p",null,l.a.createElement("span",null,l.a.createElement("span",null,"Exclude"),l.a.createElement("span",null,":"))," ",o.data.exclusion_description||l.a.createElement("i",null,"empty criterion"))))},Yt=function(e){return l.a.createElement("svg",{version:"1.1",id:"no-filters",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("polyline",{className:"st0-no-filters",points:"927.7,149.1 948.9,123.8 915.9,123.8 \t\t"}),l.a.createElement("line",{className:"st1-no-filters",x1:"806.2",y1:"123.8",x2:"138.9",y2:"123.8"}),l.a.createElement("polyline",{className:"st0-no-filters",points:"84.1,123.8 51.1,123.8 72.3,149.1 \t\t"}),l.a.createElement("path",{className:"st2-no-filters",d:"M136.4,225.6l260.1,310.2c11.4,13.6,17.7,30.8,17.7,48.6v271.2c0,37.9,30.8,68.7,68.7,68.7h34.3 c37.9,0,68.7-30.8,68.7-68.7V584.3c0-17.8,6.3-35,17.7-48.6l292.1-348.4"}))},Kt=function(e){var t=e.filtersList,r=e.setFiltersList,n=e.project_id,s=Object(c.useRef)(!1),i=Object(c.useContext)(L),o=a(54);function u(e){return m.apply(this,arguments)}function m(){return(m=Object(d.a)(p.a.mark(function e(a){var n,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleting "+a),e.next=3,Ut.deleteFilter(a);case 3:n=e.sent,s.current&&n.message?i.setError(n):s.current&&null!==n&&(i.setNotificationMessage("Successfully deleted"),c=t.filter(function(e){return e.id!==a}),r(c));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}Object(c.useEffect)(function(){return s.current=!0,function(){s.current=!1}},[]);return 0===t.length?l.a.createElement("div",{className:"empty-list-wrapper empty-filters"}," ",l.a.createElement(Yt,null),l.a.createElement("p",{className:"empty-list-description"}," There are no filters here, you can add new ones by filling the form to the right")):l.a.createElement(l.a.Fragment,null,t.map(function(e){return l.a.createElement("div",{key:e.id,className:"generic-card filter-card"},l.a.createElement(Jt,{project_id:n,filter:e,filtersList:t,callDelete:u,yup:o}))}))},Wt=[{label:"orderBy",default:"date_created"},{label:"sort",default:"ASC"},{label:"start",default:0},{label:"count",default:10}],$t=function(e){var t=Object(c.useState)([]),a=Object(f.a)(t,2),r=a[0],n=a[1],s=Object(c.useState)(!0),i=Object(f.a)(s,2),o=i[0],u=i[1],m=Object(c.useState)(0),h=Object(f.a)(m,2),b=h[0],E=h[1],g=Object(c.useContext)(L),v=oe(e.location.search,Wt);return Object(c.useEffect)(function(){var t=!0;return function(){var a=Object(d.a)(p.a.mark(function a(){var r;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return u(!0),a.next=3,Ut.getFiltersList(Object(R.a)({project_id:e.project_id},v));case 3:r=a.sent,console.log(r),t&&r&&"Not Found"===r.message?(n([]),E(0),u(!1)):t&&r&&r.message?g.setError(r):t&&r&&(n(r.results),E(r.totalResults),u(!1));case 6:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}()(),function(){t=!1}},[v.start,v.count,v.sort,v.orderBy]),l.a.createElement(l.a.Fragment,null,l.a.createElement(Vt,{project_id:e.project_id,start:v.start,filtersList:r,setFiltersList:n}),l.a.createElement("div",{className:"left-side-wrapper filters-wrapper"},o?l.a.createElement(W,{class:"small"}):l.a.createElement(l.a.Fragment,null,l.a.createElement(Kt,{filtersList:r,setFiltersList:n,project_id:e.project_id}),l.a.createElement(ee,{start:v.start,count:v.count,totalResults:b,path:e.match.url}))))},Zt=[{label:"0.00",value:0},{label:"0.10",value:.1},{label:"0.20",value:.2},{label:"0.30",value:.3},{label:"0.40",value:.4},{label:"0.50",value:.5},{label:"0.60",value:.6},{label:"0.70",value:.7},{label:"0.80",value:.8},{label:"0.90",value:.9},{label:"1.00",value:1}],Qt=[{label:"0.00",value:0}],ea=[{label:"1.00",value:1}],ta=[{value:"date_created",label:"Recently Added"},{value:"title",label:"Title"}],aa=[{label:"orderBy",default:"date_created"},{label:"min_confidence",default:0},{label:"max_confidence",default:1},{label:"sort",default:"ASC"},{label:"start",default:0},{label:"count",default:10}],ra=Object(u.f)(function(e){var t,a=e.project_id,r=e.totalResults,n=e.setTotalResults,s=e.match,i=e.location,o=e.history,u=Object(c.useState)([]),m=Object(f.a)(u,2),h=m[0],b=m[1],E=Object(c.useState)([]),g=Object(f.a)(E,2),v=g[0],y=g[1],x=Object(c.useState)(!1),j=Object(f.a)(x,2),w=j[0],N=j[1],O=Object(c.useContext)(L),k=oe(i.search,aa),S=Object(c.useState)(k.sort),_=Object(f.a)(S,2),C=_[0],F=_[1];return Object(c.useEffect)(function(){var e=!0;return"date_created"!==k.orderBy&&C!==k.sort&&(F(k.sort),document.getElementById("ani-order-arrow").beginElement()),function(){var t=Object(d.a)(p.a.mark(function t(){var r,c;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return N(!1),ea=Zt.filter(function(e){return e.value>parseFloat(k.min_confidence)}),Qt=Zt.filter(function(e){return e.value<parseFloat(k.max_confidence)}),t.next=5,Ut.getFiltersList({project_id:a});case 5:return r=t.sent,e&&r&&"Not Found"===r.message?y([]):e&&r&&r.message?O.setError(r):e&&r&&y(r.results),t.next=9,Ie.getPapersList(Object(R.a)({project_id:a,type:"backlog"},k));case 9:c=t.sent,e&&c&&"Not Found"===c.message?(b([]),n(0),N(!0)):e&&c&&c.message?O.setError(c):e&&null!==c&&(b(c.results),n(c.totalResults),N(!0));case 11:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[k.start,k.count,k.sort,k.orderBy,k.min_confidence,k.max_confidence]),t=!1===w?l.a.createElement(l.a.Fragment,null,l.a.createElement(W,{class:"small"})):l.a.createElement(l.a.Fragment,null,l.a.createElement(Ge,{papersList:h,filtersList:v}),l.a.createElement(ee,{start:k.start,count:k.count,totalResults:r,path:s.url})),l.a.createElement("div",{className:0===h.length?"center-side-wrapper":"left-side-wrapper"},l.a.createElement("div",{className:"paper-card-holder large"},l.a.createElement("div",{className:"order",style:{pointerEvents:w&&0!==h.length?"":"none",opacity:0===h.length?"0.0":"1.0"}},l.a.createElement("div",{className:"order-flex-item"},l.a.createElement("label",null,"sort by:"),l.a.createElement(Ye,{options:ta,selected:ie(ta,"value",k.orderBy),handler:function(e){var t=parseInt(e.target.getAttribute("data-value"));"date_created"===k.orderBy&&(k.sort="ASC"),k.orderBy=ta[t].value;var a=se(k);o.push(a)},type:"medium",code:0}),l.a.createElement("button",{type:"button",onClick:function(e){"ASC"===k.sort?k.sort="DESC":k.sort="ASC";var t=se(k);o.push(t)},style:{display:"date_created"===k.orderBy?"none":""}},l.a.createElement($e,{up:C}))),l.a.createElement("div",{className:"order-flex-item"},l.a.createElement("label",null,"min confidence:"),l.a.createElement(Ye,{options:Qt,selected:ie(Qt,"value",parseFloat(k.min_confidence)),handler:function(e){var t=parseInt(e.target.getAttribute("data-value"));k.min_confidence=Qt[t].value;var a=se(k);o.push(a)},type:"mini",code:1}),l.a.createElement("label",null,"max confidence:"),l.a.createElement(Ye,{options:ea,selected:ie(ea,"value",parseFloat(k.max_confidence)),handler:function(e){var t=parseInt(e.target.getAttribute("data-value"));k.max_confidence=ea[t].value;var a=se(k);o.push(a)},type:"mini",code:2}))),t))});function na(){return(na=Object(d.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.auto_screening,e.next=3,_.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ca(){return(ca=Object(d.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.auto_screening,e.next=3,_.get(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function la(){return(la=Object(d.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.screenings+"/"+t,e.next=3,_.get(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function sa(){return(sa=Object(d.a)(p.a.mark(function e(t){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.screenings+"/"+t+"/next",e.next=3,_.get(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ia(){return(ia=Object(d.a)(p.a.mark(function e(){var t,a,r,n=arguments;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",a=h.home+h.screenings,e.next=4,_.get(a,t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oa(){return(oa=Object(d.a)(p.a.mark(function e(t){var a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.votes,e.next=3,_.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ua={startAutoScreening:function(e){return na.apply(this,arguments)},getAutoScreeningStatus:function(e){return ca.apply(this,arguments)},getScreening:function(e){return la.apply(this,arguments)},getProjectPaperToScreen:function(e){return sa.apply(this,arguments)},getProjectsToScreen:function(){return ia.apply(this,arguments)},submitVote:function(e){return oa.apply(this,arguments)},abortRequest:_.abortRequest},ma=[{label:"0.90",value:.9},{label:"0.80",value:.8},{label:"0.70",value:.7},{label:"0.60",value:.6},{label:"0.50",value:.5},{label:"0.40",value:.4},{label:"0.30",value:.3},{label:"0.20",value:.2},{label:"0.10",value:.1}];var pa=function(e){var t=Object(c.useRef)(!1),a=Object(c.useContext)(L);return Object(c.useEffect)(function(){return t.current=!0,function(){t.current=!1}},[]),l.a.createElement(l.a.Fragment,null,l.a.createElement($.c,{initialValues:{threshold:.9},onSubmit:function(){var r=Object(d.a)(p.a.mark(function r(n,c){var l,s,i;return p.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return l=c.setSubmitting,s={project_id:e.project_id,threshold:n.threshold},r.next=4,ua.startAutoScreening(s);case 4:i=r.sent,t.current&&i.message?a.setError(i):t.current&&(l(!1),e.setVisibility(!e.visibility),e.setAutoScreeningFlag(!0));case 6:case"end":return r.stop()}},r)}));return function(e,t){return r.apply(this,arguments)}}(),validateOnBlur:!1},function(t){t.errors,t.touched;var a=t.isSubmitting;return t.isValid,t.setErrors,t.validateField,t.handleChange,l.a.createElement($.b,{className:"modal floating-form start-auto-screening",style:{visibility:e.visibility?"":"hidden"}},l.a.createElement("button",{type:"button",className:"close-btn",onClick:function(t){e.setVisibility(!e.visibility)}},l.a.createElement(Z,null)),l.a.createElement("h2",null,"Start automated screening?"),l.a.createElement("p",null,"The process will analyze the papers in the backlog and will assing a confidence score to each one, this may take a while. You can select a confidence threshold and, as the process is proceeding, all papers with a resulting confidence level above the threshold will be automatically set as screened (in). The remaining ones will be here in the backlog."),l.a.createElement($.a,{name:"threshold",render:function(e){var t=e.field,a=e.form;return l.a.createElement(wt,Object.assign({options:ma},t,{form:a,type:"mini"}))}}),l.a.createElement("button",{className:"start-btn",type:"submit",disabled:a},"Start Auto-screening"))}))},da=function(e){var t=e.label,a=e.name,r=e.val,n=e.isChecked,s=e.form,i=e.className,o=e.disabled,u=Object(c.useState)(l.a.createElement(l.a.Fragment,null)),m=Object(f.a)(u,2),p=m[0],d=m[1];return Object(c.useEffect)(function(){d(n?l.a.createElement(Qe,null):l.a.createElement(l.a.Fragment,null))},[n]),l.a.createElement("label",{className:i?"radiobox-container "+i:"radiobox-container"},l.a.createElement("input",{type:"radio",value:r,name:a,checked:n,onChange:function(){s.setFieldValue(a,r)},disabled:o}),l.a.createElement("span",{className:"radiomark"},p),l.a.createElement("span",null,t))},fa=function(e){var t=e.user,a=e.alreadyScreeners,r=e.form,n=e.name;return console.log(a.current),l.a.createElement("button",{type:"button",className:"user-data",onClick:function(){a.current.includes(t.id)||(r.values.screeners.includes(t.id)?r.setFieldValue(n,r.values.screeners.filter(function(e){return e!==t.id})):r.setFieldValue(n,[].concat(Object(be.a)(r.values.screeners),[t.id])))},disabled:a.current.includes(t.id)},l.a.createElement("div",{className:"user-data-image-wrapper"},l.a.createElement("div",{className:"img-wrapper-cover",style:{opacity:r.values.screeners.includes(t.id)||a.current.includes(t.id)?"0.9":"0.0"}},l.a.createElement(je,{color:"white"})),l.a.createElement(Be,{className:"user-data-image",alt:"profile image",src:t.data.picture||t.data.image,type:"profile-pic"})),l.a.createElement("p",{className:"user-data-names"},t.data.name," ",t.data.surname))},ha=a(100);var ba=function(e){var t=Object(c.useRef)(!1),a=Object(c.useContext)(L),r=Object(c.useState)(!0),n=Object(f.a)(r,2),s=n[0],i=n[1],o=Object(c.useState)([]),u=Object(f.a)(o,2),m=u[0],h=u[1],b=Object(c.useRef)([]),E=Object(c.useState)(!1),g=Object(f.a)(E,2),v=g[0],y=g[1];return Object(c.useEffect)(function(){return t.current=!0,function(){var r=Object(d.a)(p.a.mark(function r(){var n,c,l;return p.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,K.getProjectCollaborators(e.project_id);case 2:if(n=r.sent,!(t.current&&n&&n.message)){r.next=7;break}a.setError(n),r.next=18;break;case 7:if(!t.current||!n){r.next=18;break}return h(n),r.next=11,Ut.getFiltersList({project_id:e.project_id});case 11:return c=r.sent,t.current&&c&&"Not Found"===c.message?y(!1):t.current&&c&&c.message?a.setError(c):t.current&&c&&y(!0),r.next=15,K.getProjectScreeners(e.project_id);case 15:l=r.sent,t.current&&l&&l.message?a.setError(l):b.current=l.map(function(e){return e.id}),i(!1);case 18:case"end":return r.stop()}},r)}));return function(){return r.apply(this,arguments)}}()(),function(){t.current=!1}},[]),l.a.createElement(l.a.Fragment,null,l.a.createElement($.c,{initialValues:{screeners:[],screening_mode:"single-predicate"},onSubmit:function(){var r=Object(d.a)(p.a.mark(function r(n,c){var l,s,i,o;return p.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(l=c.setSubmitting,s=c.resetForm,i={array_user_ids:n.screeners,manual_screening_type:n.screening_mode},!(n.screeners.length>0)){r.next=13;break}if(0!==b.current.length){r.next=9;break}return r.next=6,K.postProjectManualScreeningData(e.project_id,i);case 6:o=r.sent,r.next=12;break;case 9:return r.next=11,K.putProjectManualScreeningData(e.project_id,i);case 11:o=r.sent;case 12:t.current&&o.message?a.setError(o):t.current&&(l(!1),e.setVisibility(!e.visibility),e.setManualStarted(!0),b.current=ha.union(n.screeners,b.current),s({screeners:[],screening_mode:"-"}));case 13:case"end":return r.stop()}},r)}));return function(e,t){return r.apply(this,arguments)}}(),validateOnBlur:!1},function(t){t.errors,t.touched;var a=t.isSubmitting,r=(t.isValid,t.setErrors,t.validateField,t.handleChange,t.values),n="";return n=s?l.a.createElement(W,{class:"small"}):l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"tip"},0===b.current.length?"Is a good practice to select at least two people for screening":""),l.a.createElement("div",{className:"users-list"},l.a.createElement($.a,{name:"screeners",render:function(e){var t=e.field,a=e.form;return l.a.createElement(l.a.Fragment,null,m.map(function(e){if(""!==e.data.name)return l.a.createElement("div",{key:e.id},l.a.createElement(fa,Object.assign({user:e,alreadyScreeners:b},t,{form:a})))}))}})),l.a.createElement("div",{className:0!==b.current.length?"screening-type disabled":"screening-type",style:{height:0!==b.current.length?"0px":"",overflow:0!==b.current.length?"hidden":""}},l.a.createElement("label",null,"Screening mode : "),l.a.createElement($.a,{name:"screening_mode",render:function(e){var t=e.field,a=e.form;return l.a.createElement(l.a.Fragment,null,l.a.createElement(da,Object.assign({label:"single-predicate"},t,{val:"single-predicate",form:a,isChecked:"single-predicate"===r.screening_mode,disabled:0!==b.current.length})),l.a.createElement(da,Object.assign({className:v?"":"disabled",label:"multi-predicate"},t,{val:"multi-predicate",form:a,isChecked:"multi-predicate"===r.screening_mode,disabled:0!==b.current.length})))}}))),l.a.createElement($.b,{className:"modal floating-form start-manual-screening",style:{visibility:e.visibility?"":"hidden"}},l.a.createElement("button",{type:"button",className:"close-btn",onClick:function(t){e.setVisibility(!e.visibility)}},l.a.createElement(Z,null)),l.a.createElement("h2",null,"Select screeners"),n,l.a.createElement("button",{className:"start-btn",type:"submit",style:{visibility:s?"hidden":""},disabled:0===r.screeners.length||a},0===b.current.length?"Start Manual-screening":"Add extra screeners"))}))},Ea=function(e){return l.a.createElement("svg",{id:"manual-screening",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("path",{className:"st0-msi",d:"M327.9,827.9c0,0.1,0.1,0.3,0.1,0.4L97.5,911.8c-5.7,2.1-11.3-3.5-9.2-9.2l83.6-230.6c0.1,0,0.2,0.1,0.4,0.1 C250.7,698.5,301.7,749.5,327.9,827.9z"}),l.a.createElement("path",{className:"st0-msi",d:"M824.8,341.6L366.1,800.3c-4.2,4.2-11.4,2.8-13.6-2.8c-28.8-70.7-79.2-121-150-149.9c-5.5-2.3-7-9.4-2.8-13.6l458.7-458.7 c4.8-4.8,12-6.3,18.5-4c0,0,0.1,0,0.1,0C753.6,197,803.2,246.6,828.8,323c0,0,0,0.1,0,0.1C831.1,329.6,829.6,336.8,824.8,341.6z"}),l.a.createElement("path",{className:"st0-msi",d:"M882.5,283.9l-13.6,13.6c-29.9-80.4-85.8-136.3-166.4-166.4l13.6-13.6c45.6-45.6,119.7-46.2,165.5-0.7 c0.5,0.5,1.1,1.1,1.6,1.6C928.7,164.4,928.1,238.3,882.5,283.9z"}))},ga=function(e){return l.a.createElement("svg",{id:"auto-screening",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("path",{className:"st0-asi",d:"M578.7,404.1c-17.9,11-35.8,22.3-53.5,33.7c-28.2-27.2-61.5-47.2-97-59.4c2.1-20.9,4-42.1,5.7-63 c-26.1-7.6-52.9-11.8-79.9-12.6c-4.8,20.6-9.5,41.1-13.9,61.7c-37.7,0.6-75.5,9.3-110.8,26.6c-13.3-16.4-26.8-32.3-40.5-48.5 c-12,6.5-23.4,13.7-34.4,21.7c-11,8-21.5,16.7-31.2,25.9c11,17.9,22.3,35.8,33.7,53.5c-27.2,28.2-47.2,61.5-59.4,97 c-20.9-2.1-42.1-4-63-5.7c-7.6,26.1-11.8,52.9-12.6,79.9c20.6,4.8,41.1,9.5,61.7,13.9c0.6,37.7,9.3,75.5,26.6,110.8 c-16.4,13.3-32.3,26.8-48.5,40.5c6.5,12,13.7,23.4,21.7,34.4c8.2,11,16.7,21.5,25.9,31.2c17.9-11,35.8-22.3,53.5-33.7 c28.2,27.2,61.5,47.2,97,59.4c-2.1,20.9-4,42.1-5.7,63c26.1,7.6,52.9,11.8,79.9,12.6c4.8-20.6,9.5-41.1,13.9-61.7 c37.7-0.6,75.5-9.3,110.8-26.6c13.3,16.4,26.8,32.3,40.5,48.5c11.8-6.5,23-13.7,34.3-21.9c11-8.2,21.5-16.7,31.2-25.9 c-11-17.9-22.3-35.8-33.7-53.5c27.2-28.2,47.2-61.5,59.4-97c20.9,2.1,42.1,4,63,5.7c7.6-26.1,11.8-52.9,12.6-79.9 c-20.6-4.8-41.1-9.5-61.7-13.9c-0.6-37.7-9.3-75.5-26.6-110.8c16.4-13.3,32.3-26.8,48.5-40.5c-6.5-11.8-13.7-23-21.9-34.3 C596.4,424.3,587.8,413.8,578.7,404.1z M487.3,608.7c2.9,26.1-1.1,52.3-12,76.1c-4.8,10.7-11,20.7-18.5,30.1 c-8,10.1-17.3,19-28.2,26.8c-10.8,7.8-22.3,14.1-34.3,18.5c-11.2,4.2-22.6,6.9-34.3,8.2c-26.1,2.9-52.3-1.1-76.1-12 c-10.7-4.8-20.7-11-30.1-18.5c-10.1-8-19-17.3-26.8-28.2c-7.8-10.8-14.1-22.3-18.5-34.3c-4.2-11.2-6.9-22.6-8.2-34.3 c-2.9-26.1,1.1-52.3,12-76.1c4.8-10.7,11-20.7,18.5-30.1c8-10.1,17.3-19,28.2-26.8c10.8-7.8,22.3-14.1,34.3-18.5 c11.2-4.2,22.6-6.9,34.3-8.2c26.1-2.9,52.3,1.1,76.1,12c10.7,4.8,20.7,11,30.1,18.5c10.1,8,19,17.3,26.8,28.2 c7.8,10.8,14.1,22.3,18.5,34.3C483.3,585.4,486.2,597,487.3,608.7z"}),l.a.createElement("path",{className:"st1-asi",d:"M976.6,328.2c-12.7-6.7-25.7-13.3-38.6-19.8c6.3-26.1,6.3-52.7,1.1-78c13.1-6.1,26.1-12.4,39-18.6 c-4.6-17.9-11.6-35.4-20.6-51.6c-13.7,4.4-27.6,8.8-41.3,13.3c-13.5-22.1-31.8-41.3-54.4-55.9c4.9-13.5,9.7-27.2,14.5-40.9 c-8-4.8-16.2-8.9-24.9-12.7c-8.6-3.8-17.3-6.9-26.3-9.3c-6.7,12.7-13.3,25.7-19.8,38.6c-26.1-6.3-52.7-6.3-78-1.1 c-6.1-13.1-12.4-26.1-18.6-39c-17.9,4.6-35.4,11.6-51.6,20.6c4.4,13.7,8.8,27.6,13.3,41.3c-22.1,13.5-41.3,31.8-55.9,54.4 c-13.5-4.9-27.2-9.7-40.9-14.5c-4.8,8-8.9,16.2-12.7,24.9c-3.8,8.8-6.9,17.3-9.3,26.3c12.7,6.7,25.7,13.3,38.6,19.8 c-6.3,26.1-6.3,52.7-1.1,78c-13.1,6.1-26.1,12.4-39,18.6c4.6,17.9,11.6,35.4,20.6,51.6c13.7-4.4,27.6-8.8,41.3-13.3 c13.5,22.1,31.8,41.3,54.4,55.9c-4.9,13.5-9.7,27.2-14.5,40.9c8,4.6,16.2,8.8,24.7,12.6s17.3,6.9,26.3,9.3 c6.7-12.7,13.3-25.7,19.8-38.6c26.1,6.3,52.7,6.3,78,1.1c6.1,13.1,12.4,26.1,18.6,39c17.9-4.6,35.4-11.6,51.6-20.6 c-4.4-13.7-8.8-27.6-13.3-41.3c22.1-13.5,41.3-31.8,55.9-54.4c13.5,4.9,27.2,9.7,40.9,14.5c4.6-8,8.8-16.2,12.6-24.7 C970.9,345.7,974.1,336.9,976.6,328.2z M824.2,345.9c-14.3,10.8-31.2,17.7-49.1,19.6c-8,1-16,0.8-24.2-0.4 c-8.8-1.1-17.3-3.6-25.7-7.2c-8.4-3.6-16-8.2-22.8-13.7c-6.3-5.1-12-11-16.9-17.3c-10.8-14.3-17.7-31.2-19.6-49.1 c-1-8-0.8-16,0.4-24.2c1.1-8.8,3.6-17.3,7.2-25.7c3.6-8.4,8.2-16,13.7-22.8c5.1-6.3,11-12,17.3-16.9c14.3-10.8,31.2-17.7,49.1-19.6 c8-1,16-0.8,24.2,0.4c8.8,1.1,17.3,3.6,25.7,7.2s16,8.2,22.8,13.7c6.3,5.1,12,11,16.9,17.3c10.8,14.3,17.7,31.2,19.6,49.1 c1,8,0.8,16-0.4,24.2c-1.1,8.8-3.6,17.3-7.2,25.7c-3.6,8.4-8.2,16-13.7,22.8C836.3,335.4,830.6,340.9,824.2,345.9z"}))},va=function(e){return l.a.createElement("svg",{id:"undecided-answer",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("g",null,l.a.createElement("circle",{className:"st0-csi",cx:"253.1",cy:"277",r:"131.8"}),l.a.createElement("path",{className:"st0-csi",d:"M474.8,671.4c21.5,0,38.2-19.2,34.8-40.7c-16.4-106.8-97.2-218.1-250.1-218.1S25.8,523.9,9.4,630.7 c-3.2,21.3,13.2,40.7,34.8,40.7H474.8z"})),l.a.createElement("g",null,l.a.createElement("circle",{className:"st0-csi",cx:"734.1",cy:"329",r:"131.8"}),l.a.createElement("path",{className:"st0-csi",d:"M955.8,723.2c21.5,0,38.2-19.2,34.8-40.7c-16.4-106.8-97.2-218.1-250.1-218.1S506.8,575.7,490.4,682.5 c-3.2,21.3,13.2,40.7,34.8,40.7H955.8z"})),l.a.createElement("g",null,l.a.createElement("circle",{className:"st0-csi",cx:"449.2",cy:"460.3",r:"131.8"}),l.a.createElement("path",{className:"st0-csi",d:"M658.2,854.8c21.5,0,38.2-19.2,34.8-40.7c-16.4-106.8-97.4-218.1-250.1-218.1S209.2,707.2,192.8,814 c-3.2,21.3,13.2,40.7,34.8,40.7L658.2,854.8L658.2,854.8z"})))},ya=function(e){var t=e.project_id,a=(e.project,Object(c.useState)(!1)),r=Object(f.a)(a,2),n=r[0],s=r[1],i=Object(c.useState)(!1),o=Object(f.a)(i,2),u=o[0],m=o[1],h=Object(c.useState)(!1),b=Object(f.a)(h,2),E=b[0],g=b[1],v=Object(c.useState)(0),y=Object(f.a)(v,2),x=y[0],j=y[1],w=Object(c.useState)(!1),N=Object(f.a)(w,2),O=(N[0],N[1]);Object(c.useEffect)(function(){function e(){return(e=Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua.getAutoScreeningStatus({project_id:t});case 2:!1===e.sent&&g(!0);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){}},[]),Object(c.useEffect)(function(){var e=void 0;return E&&(clearInterval(e),e=setInterval(Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua.getAutoScreeningStatus({project_id:t});case 2:!0===e.sent&&g(!1);case 4:case"end":return e.stop()}},e)})),1e3)),function(){console.log("clearing polling"),clearInterval(e)}},[E]);var k=l.a.createElement(l.a.Fragment,null);return 0!==x&&(k=l.a.createElement("div",{className:"bottom-right-screening-strategy-box"},l.a.createElement("h3",null,"Screening strategy"),l.a.createElement("div",{className:"screening-strategy-buttons"},l.a.createElement("div",{className:"screening-strategy-btn-holder"},l.a.createElement("button",{className:"screening-strategy-btn manual",type:"button",onClick:function(){s(!0)}},l.a.createElement(Ea,null)),l.a.createElement("div",{className:"strategy-tooltip"},"manual")),l.a.createElement("div",{className:"screening-strategy-btn-holder"},l.a.createElement("svg",{id:"circle-progress",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("ellipse",{fill:"none",stroke:"#0b8a42",strokeWidth:"30",cx:"500",cy:"500",rx:"480",ry:"480",className:"rotate-generic",style:{strokeDasharray:"3016",opacity:E?"1.0":"0.0",strokeDashoffset:E?"2016":"3016",transition:"all 0.2s"}})),l.a.createElement("button",{className:"screening-strategy-btn auto",type:"button",disabled:E,onClick:function(){m(!0)}},l.a.createElement(ga,null)),l.a.createElement("div",{className:"strategy-tooltip"},"automatic")),l.a.createElement("div",{className:"screening-strategy-btn-holder"},l.a.createElement("button",{className:"screening-strategy-btn crowdsource",type:"button"},l.a.createElement(va,null)),l.a.createElement("div",{className:"strategy-tooltip"},"crowdsourced"))))),l.a.createElement(l.a.Fragment,null,l.a.createElement(te,{cls:n?"full-screen":"",handler:s}),l.a.createElement(ba,{visibility:n,setManualStarted:O,setVisibility:s,project_id:t}),l.a.createElement(te,{cls:u?"full-screen":"",handler:m}),l.a.createElement(pa,{visibility:u,setVisibility:m,project_id:t,setAutoScreeningFlag:g}),l.a.createElement(ra,{project_id:t,totalResults:x,setTotalResults:j}),k)},xa=[{value:"date_created",label:"Most Recent"},{value:"title",label:"Title"}],ja=[{label:"orderBy",default:"date_created"},{label:"sort",default:"ASC"},{label:"start",default:0},{label:"count",default:10}],wa=Object(u.f)(function(e){var t,a=e.project_id,r=e.match,n=e.location,s=e.history,i=Object(c.useState)([]),u=Object(f.a)(i,2),m=u[0],h=u[1],b=Object(c.useState)(0),E=Object(f.a)(b,2),g=E[0],v=E[1],y=Object(c.useState)(!1),x=Object(f.a)(y,2),j=x[0],w=x[1],N=Object(c.useContext)(L),O=oe(n.search,ja),k=Object(c.useState)(O.sort),S=Object(f.a)(k,2),_=S[0],C=S[1];return Object(c.useEffect)(function(){var e=!0;return"date_created"!==O.orderBy&&_!==O.sort&&(C(O.sort),document.getElementById("ani-order-arrow").beginElement()),function(){var t=Object(d.a)(p.a.mark(function t(){var r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w(!1),t.next=3,Ie.getPapersList(Object(R.a)({project_id:a,type:"manual"},O));case 3:r=t.sent,e&&r&&"Not Found"===r.message?(h([]),v(0),w(!0)):e&&r&&r.message?N.setError(r):e&&null!==r&&(h(r.results),v(r.totalResults),w(!0));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[O.start,O.count,O.sort,O.orderBy]),t=!1===j?l.a.createElement(l.a.Fragment,null,l.a.createElement(W,{class:"small"})):l.a.createElement(l.a.Fragment,null,l.a.createElement(ze,{papersList:m}),l.a.createElement(ee,{start:O.start,count:O.count,totalResults:g,path:r.url})),t=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"right-side-wrapper manual"},l.a.createElement("div",{className:"top-right-description"},l.a.createElement("p",{className:"manual-description"},"Here you can see the status of the manual screening process. Below each paper you can see the votes related to it",l.a.createElement("br",null),l.a.createElement("span",{className:"color-code red-color"},"RED ")," voted no",l.a.createElement("br",null),l.a.createElement("span",{className:"color-code green-color"},"GREEN ")," voted yes",l.a.createElement("br",null),l.a.createElement("span",{className:"color-code blue-color"},"BLUE ")," voted undecided",l.a.createElement("br",null)),l.a.createElement(o.b,{to:"/screenings/"+a+"/"},"(start your manual screening session)"))),l.a.createElement("div",{className:"left-side-wrapper"},l.a.createElement("div",{className:"paper-card-holder large"},l.a.createElement("div",{className:"order",style:{pointerEvents:j&&0!==m.length?"":"none",opacity:0===m.length?"0.0":"1.0"}},l.a.createElement("div",{className:"order-flex-item"},l.a.createElement("label",null,"sort by:"),l.a.createElement(Ye,{options:xa,selected:ie(xa,"value",O.orderBy),handler:function(e){var t=parseInt(e.target.getAttribute("data-value"));"date_created"===O.orderBy&&(O.sort="ASC"),O.orderBy=xa[t].value;var a=se(O);s.push(a)},type:"medium",code:0}),l.a.createElement("button",{type:"button",onClick:function(e){"ASC"===O.sort?O.sort="DESC":O.sort="ASC";var t=se(O);s.push(t)},style:{display:"date_created"===O.orderBy?"none":""}},l.a.createElement($e,{up:_})))),t)))}),Na=[{value:"date_created",label:"Recently Added"},{value:"title",label:"Title"}],Oa=[{label:"orderBy",default:"date_created"},{label:"sort",default:"ASC"},{label:"start",default:0},{label:"count",default:10}],ka=Object(u.f)(function(e){var t,a=e.project_id,r=e.match,n=e.location,s=e.history,i=Object(c.useState)([]),o=Object(f.a)(i,2),u=o[0],m=o[1],h=Object(c.useState)(0),b=Object(f.a)(h,2),E=b[0],g=b[1],v=Object(c.useState)(void 0),y=Object(f.a)(v,2),x=y[0],j=y[1],w=Object(c.useState)(!1),N=Object(f.a)(w,2),O=N[0],k=N[1],S=Object(c.useContext)(L),_=oe(n.search,Oa),C=Object(c.useState)(_.sort),F=Object(f.a)(C,2),P=F[0],I=F[1];return Object(c.useEffect)(function(){var e=!0;return"date_created"!==_.orderBy&&P!==_.sort&&(I(_.sort),document.getElementById("ani-order-arrow").beginElement()),function(){var t=Object(d.a)(p.a.mark(function t(){var r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return k(!1),t.next=3,Ie.getPapersList(Object(R.a)({project_id:a,type:"screened"},_));case 3:r=t.sent,e&&r&&"Not Found"===r.message?(m([]),g(0),j(void 0),k(!0)):e&&r&&r.message?S.setError(r):e&&null!==r&&(m(r.results),g(r.totalResults),j(r.totalPapers),k(!0));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[_.start,_.count,_.sort,_.orderBy]),t=!1===O?l.a.createElement(l.a.Fragment,null,l.a.createElement(W,{class:"small"})):l.a.createElement(l.a.Fragment,null,l.a.createElement(He,{papersList:u}),l.a.createElement(ee,{start:_.start,count:_.count,totalResults:E,path:r.url})),t=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"right-side-wrapper status"},l.a.createElement("h2",{className:"screened-status"},l.a.createElement("span",{className:"partial"},E," "),x?l.a.createElement(l.a.Fragment,null,"out of ",l.a.createElement("span",{className:"total"},x)," "):l.a.createElement(l.a.Fragment,null),"papers were screened")),l.a.createElement("div",{className:"left-side-wrapper"},l.a.createElement("div",{className:"paper-card-holder large"},l.a.createElement("div",{className:"order",style:{pointerEvents:O&&0!==u.length?"":"none",opacity:0===u.length?"0.0":"1.0"}},l.a.createElement("div",{className:"order-flex-item"},l.a.createElement("label",null,"sort by:"),l.a.createElement(Ye,{options:Na,selected:ie(Na,"value",_.orderBy),handler:function(e){var t=parseInt(e.target.getAttribute("data-value"));"date_created"===_.orderBy&&(_.sort="ASC"),_.orderBy=Na[t].value;var a=se(_);s.push(a)},type:"medium",code:0}),l.a.createElement("button",{type:"button",onClick:function(e){"ASC"===_.sort?_.sort="DESC":_.sort="ASC";var t=se(_);s.push(t)},style:{display:"date_created"===_.orderBy?"none":""}},l.a.createElement($e,{up:P})))),t)))}),Sa=function(e){var t=e.notFound,a=e.match,r=window.location.hash.split("?")[0],n="hide";switch(!0){case/#\/projects\/\d+\/screening\/backlog\/?/.test(r):n="4px";break;case/#\/projects\/\d+\/screening\/manual\/?/.test(r):n="28px";break;case/#\/projects\/\d+\/screening\/crowdsource\/?/.test(r):n="52px";break;case/#\/projects\/\d+\/screening\/screened\/?/.test(r):n="76px"}return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"screening-nav-link-wrapper",style:{display:t||"hide"===n?"none":""}},l.a.createElement("div",{className:"nav-link"},l.a.createElement(o.b,{to:le(a.url,"/backlog"),style:{paddingRight:"4px"===n?"0px":"",color:"4px"===n?"black":""}},"backlog")),l.a.createElement("div",{className:"nav-link"},l.a.createElement(o.b,{to:le(a.url,"/manual"),style:{paddingRight:"28px"===n?"0px":"",color:"28px"===n?"black":""}},"manual")),l.a.createElement("div",{className:"nav-link"},l.a.createElement(o.b,{to:le(a.url,"/crowdsource"),style:{paddingRight:"52px"===n?"0px":"",color:"52px"===n?"black":""}},"crowdsourcing")),l.a.createElement("div",{className:"nav-link"},l.a.createElement(o.b,{to:le(a.url,"/screened"),style:{paddingRight:"76px"===n?"0px":"",color:"76px"===n?"black":""}},"screened"))))},_a=Object(u.f)(function(e){var t=e.project_id,a=e.project,r=e.match,n=e.notFound,c=e.setNotFound;return l.a.createElement(l.a.Fragment,null,l.a.createElement(Sa,{notFound:n,match:r}),l.a.createElement(u.d,null,l.a.createElement(u.b,{exact:!0,path:r.url,render:function(e){return l.a.createElement(u.a,{to:le(r.url,"/backlog")})}}),l.a.createElement(u.b,{exact:!0,path:r.url+"/backlog",render:function(e){return l.a.createElement(ya,{project_id:t,project:a})}}),l.a.createElement(u.b,{exact:!0,path:r.url+"/manual",render:function(e){return l.a.createElement(wa,{project_id:t})}}),l.a.createElement(u.b,{exact:!0,path:r.url+"/crowdsource",render:function(e){return l.a.createElement("p",null,"crowdsource")}}),l.a.createElement(u.b,{path:r.url+"/screened",render:function(e){return l.a.createElement(ka,{project_id:t})}}),l.a.createElement(u.b,{render:function(e){return c(!0),l.a.createElement(It,null)}})))}),Ca=function(e){var t=e.project_id,a=e.filtersList,r=e.setFiltersList,n=Object(c.useState)(0),s=Object(f.a)(n,2),i=s[0],u=s[1],m=Object(c.useState)(!1),h=Object(f.a)(m,2),b=h[0],E=h[1],g=Object(c.useContext)(L);Object(c.useEffect)(function(){var e=!0;return function(){var a=Object(d.a)(p.a.mark(function a(){var n;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return E(!0),a.next=3,Ut.getFiltersList({project_id:t});case 3:n=a.sent,e&&n&&"Not Found"===n.message?(r([]),u(0),E(!1)):e&&n&&n.message?g.setError(n):e&&n&&(r(n.results),u(n.totalResults),E(!1));case 5:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}()(),function(){e=!1}},[]);var v="";return v=b?l.a.createElement(W,{class:"small"}):0!==i?l.a.createElement(l.a.Fragment,null,a.map(function(e){return l.a.createElement("p",{key:e.id,className:"filter-predicate"},e.data.predicate)}),l.a.createElement(o.b,{to:"/projects/"+t+"/filters"},"Go to filters details")):l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"filter-predicate"},l.a.createElement("i",null,"No filters yet in this project")),l.a.createElement(o.b,{to:"/projects/"+t+"/filters"},"Add a new filter from filters tab")),l.a.createElement("div",{className:"right-side-wrapper search-automated-right-wrapper"},l.a.createElement("div",{className:"top-right-description"},l.a.createElement("p",null,"This searching mode leverages NLP models to find relevant papers based on the topic and focus of your project and also considers the inclusion and exclusion criteria you defined."),l.a.createElement(o.b,{to:"/projects/"+t+"/search"},"(Go back to a normal search)")),l.a.createElement("div",{className:"filters-holder"},l.a.createElement("h2",null,"Filters:"),l.a.createElement("div",{className:"side-filters-wrapper"},v)))},Fa=a(73),Pa=[{label:"0.00",value:0},{label:"0.10",value:.1},{label:"0.20",value:.2},{label:"0.30",value:.3},{label:"0.40",value:.4},{label:"0.50",value:.5},{label:"0.60",value:.6},{label:"0.70",value:.7},{label:"0.80",value:.8},{label:"0.90",value:.9},{label:"1.00",value:1}],Ia=[{label:"0.00",value:0}],Ta=[{label:"1.00",value:1}],La=[{label:"min_confidence",default:0},{label:"max_confidence",default:1},{label:"start",default:0},{label:"count",default:10}],Ba=function(e){var t=e.project,a=e.location,r=e.match,n=e.history,s=Object(c.useRef)(!1),i=Object(c.useState)([]),o=Object(f.a)(i,2),u=o[0],m=o[1],h=Object(c.useState)(0),b=Object(f.a)(h,2),E=b[0],g=b[1],v=Object(c.useState)([]),y=Object(f.a)(v,2),x=y[0],j=y[1],w=Object(c.useState)(!0),N=Object(f.a)(w,2),O=N[0],k=N[1],S=Object(c.useContext)(L),_=oe(a.search,La),C=window.localStorage;window.localStorage||console.log("the browser must be support localStorage");var F=Object(c.useState)([]),P=Object(f.a)(F,2),I=P[0],T=P[1];Object(c.useEffect)(function(){return s.current=!0,function(){s.current=!1}},[]),Object(c.useEffect)(function(){var e=!0;return function(){var a=Object(d.a)(p.a.mark(function a(){var r;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return k(!1),r=void 0,console.log(_),Ta=Pa.filter(function(e){return e.value>parseFloat(_.min_confidence)}),Ia=Pa.filter(function(e){return e.value<parseFloat(_.max_confidence)}),a.next=7,xe.searchAutomated({project_id:t.id,start:_.start,count:_.count,min_confidence:_.min_confidence,max_confidence:_.max_confidence});case 7:r=a.sent,console.log(r),e&&r&&"Not Found"===r.message?(m([]),g(0),k(!0)):e&&r&&r.message?S.setError(r):e&&null!==r&&(m(r.results),g(r.totalResults),k(!0));case 10:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}()(),function(){e=!1}},[_.start,_.count,_.min_confidence,_.max_confidence]);var B="";function M(e){var t,a=e.target.value,r=e.target.name;-1===ie(I,"eid",a)?(t=Object(be.a)(I)).push({eid:a,title:r}):t=I.filter(function(e){return e.eid!==a}),T(t),C.setItem("selectedPapersList",JSON.stringify(t))}if(!1===O)B=l.a.createElement(l.a.Fragment,null,l.a.createElement(We,{project_id:t.id,selectedPapersList:I,setSelectedPapersList:T,handlePaperSelection:M,mounted:s}),l.a.createElement("div",{className:"search-loading-holder"},l.a.createElement(W,{class:"small"})));else if(0===u.length)B=l.a.createElement(l.a.Fragment,null,l.a.createElement(We,{project_id:t.id,selectedPapersList:I,setSelectedPapersList:T,handlePaperSelection:M,mounted:s}),l.a.createElement("div",{className:"no-results"}," ",l.a.createElement(Ze,null)," ",l.a.createElement("p",{className:"not-found-description"}," Nothing was found ")," "));else if(u.length>0){var R=I.map(function(e){return e.eid});B=l.a.createElement(l.a.Fragment,null,l.a.createElement(We,{project_id:t.id,selectedPapersList:I,setSelectedPapersList:T,handlePaperSelection:M,mounted:s}),l.a.createElement(Ve,{papersList:u,filtersList:x,handlePaperSelection:M,selectedEidList:R}),l.a.createElement(ee,{start:_.start,count:_.count,totalResults:E,path:r.url}))}return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ca,{project_id:t.id,filtersList:x,setFiltersList:j}),l.a.createElement("div",{className:"search-results auto"},l.a.createElement("div",{className:"paper-card-holder"},l.a.createElement("div",{className:"paper-card-holder-head",style:{pointerEvents:O&&0!==u.length?"":"none",opacity:0===u.length?"0.0":"1.0"}},l.a.createElement("div",{className:"select-all"},l.a.createElement(we,{label:"Select All",name:"select_all",val:"",isChecked:ce(I,u,"eid"),handler:function(e){var t;if(ce(I,u,"eid")){var a=u.map(function(e){return{eid:e.eid,title:e.title}});t=I.filter(function(e){return!a.some(function(t){return t.eid===e.eid})})}else{var r=u.map(function(e){return{eid:e.eid,title:e.title}}),n=[].concat(Object(be.a)(r),Object(be.a)(I));t=Fa.uniqBy(n,"eid")}T(t),C.setItem("selectedPapersList",JSON.stringify(t))}})),l.a.createElement("div",{className:"order"},l.a.createElement("label",null,"min confidence:"),l.a.createElement(Ye,{options:Ia,selected:ie(Ia,"value",parseFloat(_.min_confidence)),handler:function(e){var t=parseInt(e.target.getAttribute("data-value"));_.min_confidence=Ia[t].value;var a=se(_);n.push(a)},type:"mini",code:0}),l.a.createElement("label",null,"max confidence:"),l.a.createElement(Ye,{options:Ta,selected:ie(Ta,"value",parseFloat(_.max_confidence)),handler:function(e){var t=parseInt(e.target.getAttribute("data-value"));_.max_confidence=Ta[t].value;var a=se(_);n.push(a)},type:"mini",code:1}))),B)))},Ma=function(e){var t=e.match,a=e.notFound,r=window.location.hash.split("?")[0],n="hide";switch(!0){case/^#\/projects\/\d+\/?$/.test(r):n="20px";break;case/^#\/projects\/\d+\/filters\/?$/.test(r):n="190px";break;case/#\/projects\/\d+\/search\/?/.test(r):n="360px";break;case/#\/projects\/\d+\/screening\/?/.test(r):n="530px";break;default:console.log("no tab")}return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"project-nav-link-wrapper",style:{display:a||"hide"===n?"none":""}},l.a.createElement("div",{className:"nav-link"},l.a.createElement(o.b,{to:t.url},"papers")),l.a.createElement("div",{className:"nav-link"},l.a.createElement(o.b,{to:le(t.url,"/filters")},"filters")),l.a.createElement("div",{className:"nav-link"},l.a.createElement(o.b,{to:le(t.url,"/search")},"search")),l.a.createElement("div",{className:"nav-link"},l.a.createElement(o.b,{to:le(t.url,"/screening/backlog")},"screening")),l.a.createElement("div",{className:"underline",style:{left:n}})))},Ra=function(e){var t=Object(c.useState)({data:{name:"loading..."}}),a=Object(f.a)(t,2),r=a[0],n=a[1],s=Object(c.useState)([]),i=Object(f.a)(s,2),m=i[0],h=i[1],b=Object(c.useState)(!1),E=Object(f.a)(b,2),g=E[0],v=E[1],y=Object(c.useState)(!1),x=Object(f.a)(y,2),j=x[0],w=x[1],N=Object(c.useContext)(L),O=Object(c.useState)(!1),k=Object(f.a)(O,2),S=k[0],_=k[1],C=e.match.params.id;return Object(c.useEffect)(function(){"loading..."===r.data.name||"UNAUTHORIZED OR INEXISTENT PROJECTS"===r.data.name?N.setTitle(l.a.createElement("div",{className:"nav-elements"}," ",l.a.createElement("h2",{className:"static-title"},r.data.name)," ")):(N.setTitle(l.a.createElement(Ct,{project:r,setProject:n})),N.setProjectName(r.data.name))},[r.data.name]),Object(c.useEffect)(function(){var e=!0;return v(!1),function(){var t=Object(d.a)(p.a.mark(function t(){var a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.getProject(C);case 2:a=t.sent,e&&a.payload&&(401===a.payload.statusCode||"the token does not match any user!"===a.payload.message||"empty token id in header, the user must first login!"===a.payload.message)?(_(!0),v(!0),n({data:{name:"UNAUTHORIZED OR INEXISTENT PROJECTS"}})):e&&a&&a.message?N.setError(a):e&&a&&(_(!1),n(a),v(!0));case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[C,N.user]),!1===g?l.a.createElement(W,null):S?l.a.createElement("div",{className:"forbidden-wrapper"},l.a.createElement(Ft,null),l.a.createElement("p",null,"This project does not exist or maybe you are not allowed to see it")):l.a.createElement("div",{className:"project-wrapper"},l.a.createElement(Ma,{match:e.match,notFound:j}),l.a.createElement(u.d,null,l.a.createElement(u.b,{exact:!0,path:e.match.url,render:function(e){return w(!1),l.a.createElement(At,Object.assign({project_id:C,project:r,setProject:n,collaborators:m,setCollaborators:h},e))}}),l.a.createElement(u.b,{exact:!0,path:e.match.url+"/search",render:function(e){return w(!1),l.a.createElement(pt,Object.assign({project_id:C},e))}}),l.a.createElement(u.b,{exact:!0,path:e.match.url+"/filters",render:function(e){return w(!1),l.a.createElement($t,Object.assign({project_id:C,project:r},e))}}),l.a.createElement(u.b,{path:e.match.url+"/screening",render:function(e){return w(!1),l.a.createElement(_a,{project_id:C,project:r,notFound:j,setNotFound:w})}}),l.a.createElement(u.b,{exact:!0,path:e.match.url+"/searchautomated",render:function(e){return w(!1),l.a.createElement(Ba,Object.assign({project:r},e))}}),l.a.createElement(u.b,{exact:!0,path:e.match.url+"/searchsimilar",render:function(e){return w(!1),l.a.createElement(jt,Object.assign({project_id:C},e))}}),l.a.createElement(u.b,{path:e.match.url+"/addpaper",render:function(e){return w(!1),l.a.createElement(l.a.Fragment,null,l.a.createElement(o.b,{className:"back",to:e.match.url.substr(0,e.match.url.length-9)},"  "),l.a.createElement(St,{projectId:r.id,url:e.match.url,history:e.history}))}}),l.a.createElement(u.b,{render:function(e){return w(!0),l.a.createElement(It,null)}})))},Aa=[{label:"start",default:0},{label:"count",default:10}],Da=function(e){var t,a=e.screeningsList,r=e.path;return t=0===a.length?l.a.createElement("div",{className:"empty-folder-wrapper"}," ",l.a.createElement(ae,null)," ",l.a.createElement("p",{className:"empty-folder-description"}," You don't have any projects to screen yet ")):a.map(function(e,t){return l.a.createElement("div",{key:e.id,className:"light-modal project-card for-screening"},l.a.createElement(o.b,{to:le(r,"/"+e.id)},l.a.createElement("h3",null,e.project_data.name),l.a.createElement("p",{className:"description"},e.project_data.description)),l.a.createElement("div",{className:"screening-progress"},l.a.createElement("span",null,e.progress.screenedPapers," "),l.a.createElement("span",null," screened out of ",l.a.createElement("i",null,e.progress.totalPapers))))}),l.a.createElement("div",{className:0===a.length?"project-cards-holder-empty":"project-cards-holder"},t)},Xa=Object(u.f)(function(e){var t=Object(c.useRef)(!1),a=Object(c.useState)([]),r=Object(f.a)(a,2),n=r[0],s=r[1],i=Object(c.useState)(0),o=Object(f.a)(i,2),u=o[0],m=o[1],h=Object(c.useState)(!1),b=Object(f.a)(h,2),E=b[0],g=b[1],v=Object(c.useContext)(L),y=oe(e.location.search,Aa);return Object(c.useEffect)(function(){return t.current=!0,v.setTitle(l.a.createElement("div",{className:"nav-elements"}," ",l.a.createElement("h2",{className:"static-title"},"SCREENINGS")," ")),v.setProjectName(""),function(){t.current=!1}},[]),Object(c.useEffect)(function(){var e=!0;return function(){var t=Object(d.a)(p.a.mark(function t(){var a,r,n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return g(!1),t.next=3,ua.getProjectsToScreen(Object(R.a)({orderBy:"date_last_modified"},y));case 3:a=t.sent,e&&a&&"Not Found"===a.message?(s([]),m(0),g(!0)):e&&a&&a.message?v.setError(a):e&&a&&(r=a.results.filter(function(e,t){if(t%2)return e}),n=[],n=a.results.filter(function(e,t){if(!(t%2))return e}),s(n.concat(r)),m(a.totalResults),g(!0));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[y.start,y.count]),!1===E?l.a.createElement(W,null):l.a.createElement("div",null,l.a.createElement(Da,{screeningsList:n,path:e.match.url}),l.a.createElement(ee,{start:y.start,count:y.count,totalResults:u,path:e.match.url}))}),qa=a(81),Ha=a.n(qa),za=function(e){var t=e.focused,a=e.code,r="",n="";return t?(r={y1:"100",y2:"900"},n={y1:"500",y2:"500"}):(r={y1:"500",y2:"500"},n={y1:"100",y2:"900"}),l.a.createElement("svg",{version:"1.1",id:"plus-icon",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("line",{className:"st0-plus",x1:"900",y1:"500",x2:"100",y2:"500"}),l.a.createElement("line",{className:"st0-plus",x1:"500",y1:"100",x2:"500",y2:"900"},l.a.createElement("animate",{attributeType:"XML",id:isNaN(a)?"ani-plus-icon-y1":"ani-plus-icon-y1"+a,attributeName:"y1",from:r.y1,to:n.y1,begin:"0s",dur:"0.2s",repeatCount:"1",fill:"freeze"}),l.a.createElement("animate",{attributeType:"XML",id:isNaN(a)?"ani-plus-icon-y2":"ani-plus-icon-y2"+a,attributeName:"y2",from:r.y2,to:n.y2,begin:"0s",dur:"0.2s",repeatCount:"1",fill:"freeze"})))},Ua=function(e){var t=e.filter,a=e.code,r=e.isOpen,n=e.setIsOpen,c=e.index;return l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"filter-title",onClick:function(){document.getElementById(isNaN(a)?"ani-plus-icon-y1":"ani-plus-icon-y1"+a).beginElement(),document.getElementById(isNaN(a)?"ani-plus-icon-y2":"ani-plus-icon-y2"+a).beginElement();var e=r.map(function(e){return!1});e[c]=!r[c],n(Object(be.a)(e))}},l.a.createElement("span",null,t.predicate)," ",l.a.createElement(za,{focused:r[c],code:a})),l.a.createElement("div",{className:"filter-data",style:{maxHeight:r[c]?"300px":"0px"}},l.a.createElement("p",{className:"criteria-type"},"inclusion criteria:"),l.a.createElement("p",{className:"criteria-description"},t.inclusion_description||l.a.createElement("i",null,"empty criterion")),l.a.createElement("p",{className:"criteria-type"},"exclusion criteria:"),l.a.createElement("p",{className:"criteria-description"},t.exclusion_description||l.a.createElement("i",null,"empty criterion"))))},Va=function(e){var t=e.filtersList,a=Object(c.useState)(t.map(function(e){return!1})),r=Object(f.a)(a,2),n=r[0],s=r[1];return 0===t.length?l.a.createElement("p",{className:"empty-filters-list-description"}," There are no filters in this project"):l.a.createElement("div",{className:"filters-list"},t.map(function(e,t){return l.a.createElement("div",{key:e.id,className:"filter"},l.a.createElement(Ua,{filter:e.data,code:parseInt(e.id),isOpen:n,setIsOpen:s,index:t}))}))},Ga=function(e){var t=e.className,a=e.display,r=e.selectedTags,n=e.setSelectedTags,s=e.availableTags,i=Object(c.useRef)(!1),o=Object(c.useRef)(),u=Object(c.useState)([]),m=Object(f.a)(u,2),h=m[0],b=m[1],E=Object(c.useState)(""),g=Object(f.a)(E,2),v=g[0],y=g[1];function x(e){return j.apply(this,arguments)}function j(){return(j=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.includes(t)||(console.log("adding "+t),y(""),n([].concat(Object(be.a)(r),[t])),s.current=s.current.filter(function(e){return e!==t}),b([]));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(){return(w=Object(d.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("deleting "+t),n(r.filter(function(e){return e!==t})),s.current=[].concat(Object(be.a)(s.current),[t]);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}Object(c.useEffect)(function(){return i.current=!0,function(){i.current=!1}},[]);l.a.createElement(l.a.Fragment,null);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"right"===t?"tags-wrapper to-right":"tags-wrapper",style:{opacity:a?"1.0":"0.0"}},r.map(function(e,t){return l.a.createElement("div",{key:t,className:"tag"},e,l.a.createElement("button",{type:"button",className:"delete-tag",onClick:function(){!function(e){w.apply(this,arguments)}(e)}},l.a.createElement(Ke,null)))}),l.a.createElement("form",{className:"add-tag",onSubmit:function(){x(v)}},l.a.createElement("input",{type:"text",id:"tag-name",placeholder:"add new tag...",value:v,onChange:function(e){!function(e){clearTimeout(o.current),y(e.target.value);var t=e.target.value.toLowerCase();t?o.current=setTimeout(function(){b(s.current.map(function(e){console.log("checking '"+e+"'");var a=e.toLowerCase().indexOf(t);return-1!==a?{content:e,index:a,selectionLength:t.length}:-1}).filter(function(e){return-1!==e}))},500):b([])}(e)}}),l.a.createElement("button",{className:"add-tag-button",disabled:!v||""===v}),l.a.createElement("div",{className:"tag-suggestions",style:{display:0===h.length?"none":""}},h.map(function(e,t){return l.a.createElement("button",{key:t,type:"button",className:"tag-suggestion",onClick:function(){x(e.content)}},e.content.substring(0,e.index),l.a.createElement("span",{className:"match"},e.content.substring(e.index,e.index+e.selectionLength)),e.content.substring(e.index+e.selectionLength,e.content.length))})))))},Ja=function(e){return l.a.createElement("svg",{id:"clear-hl",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("g",null,l.a.createElement("path",{className:"st0-hl",d:"M475.2,858.4c-69.5-0.1-154.3,27.6-195.3,68.7"}),l.a.createElement("path",{className:"st1-hl",d:"M281.7,664.9l499.9-463.1c29.5,22.7,57.4,47.1,83.5,73.2c26.1,26.1,50.5,53.9,73.2,83.5L475.2,858.4"}),l.a.createElement("path",{className:"st0-hl",d:"M213,860.2c41.1-41,68.8-125.7,68.7-195.3"}),l.a.createElement("path",{className:"st2-hl",d:"M255.8,932.7l-20.9,20.9l-89.8-6.8l62.4-62.4"}),l.a.createElement("path",{className:"st3-hl",d:"M475.2,858.4c-58.6-70.5-123.1-135-193.6-193.6"}),l.a.createElement("line",{className:"st4-hl",x1:"205.4",y1:"867.9",x2:"272.3",y2:"934.8"})),l.a.createElement("line",{className:"st5-hl",x1:"75.7",y1:"96.6",x2:"411.4",y2:"432.2"}),l.a.createElement("line",{className:"st5-hl",x1:"75.7",y1:"432.2",x2:"411.4",y2:"96.6"}))},Ya=function(e){var t=e.data,a=e.disabled,r=e.highlightedData,n=e.setHighlightedData,s=e.className,i=Object(c.useRef)(0),o=Object(c.useRef)(0),u=Object(c.useRef)(),m=Object(c.useRef)(!1);l.a.createElement(l.a.Fragment,null);return console.log(a),a?l.a.createElement("div",{className:s},t):l.a.createElement("div",{className:s,onMouseDown:function(){m.current=!0},onMouseUp:function(){m.current=!1},onMouseLeave:function(){m.current=!1}},l.a.createElement("div",{className:s+"-head"},l.a.createElement("button",{className:"clear-highlight",onClick:function(){n([{data:t,start:0,end:t.length-1,type:"not_highlighted"}])},style:{opacity:1!==r.length||"not_highlighted"!==r[0].type&&"disabled"!==r[0].type?"1.0":"0.0",pointerEvents:1===r.length&&"not_highlighted"===r[0].type?"none":""}},l.a.createElement(Ja,null))),r.map(function(e,t){return"disabled"===e.type?l.a.createElement("span",{className:"not_highlighted disa",key:t},e.data):l.a.createElement("span",{className:e.type,key:t,onMouseDown:function(){i.current=t,clearTimeout(u.current)},onMouseEnter:function(){m.current||(console.log("casual enter on -> "+t),m.current=!0,i.current=t,clearTimeout(u.current))},onDoubleClick:function(e){clearTimeout(u.current),document.getSelection().empty()},onMouseUp:function(){var e;o.current=t,u.current=setTimeout(function(){var t=document.getSelection();if("#text"===t.anchorNode.nodeName){var a=t.anchorOffset,c=t.focusOffset;if(e&&(c=r[r.length-1].end),i.current==o.current&&a>c){var l=a;a=c,c=l}if(i.current>o.current){var s=i.current;i.current=o.current,o.current=s,s=a,a=c,c=s}if(console.log(t),console.log("startingBlock   > "+i.current+" | "+r[i.current].type),console.log("selection start   > "+a),console.log("endingBlock     > "+o.current+" | "+r[o.current].type),console.log("selection end     > "+c),i.current===o.current&&"not_highlighted"===r[i.current].type){var u={data:r[i.current].data.substring(0,a),start:r[i.current].start,end:r[i.current].start+a-1,type:"not_highlighted"},m={data:r[i.current].data.substring(a,c),start:r[i.current].start+a,end:r[i.current].start+c-1,type:"highlighted"},p={data:r[i.current].data.substring(c,r[i.current].end+1),start:r[i.current].start+c,end:r[i.current].end,type:"not_highlighted"};(d=r).splice(i.current,1,u,m,p)}else{var d=r;u={data:r[i.current].data.substring(0,a),start:r[i.current].start,end:r[i.current].start+a-1,type:r[i.current].type},m={data:r[i.current].data.substring(a,r[i.current].data.length),start:r[i.current].start+a,end:r[i.current].end,type:"highlighted"},d.splice(i.current,1,u,m);for(var f=i.current+2;f<=o.current;f++)d[f].type="highlighted";var h={data:r[o.current+1].data.substring(0,c),start:r[o.current+1].start,end:r[o.current+1].start+c-1,type:"highlighted"},b={data:r[o.current+1].data.substring(c,r[o.current+1].data.length),start:r[o.current+1].start+c,end:r[o.current+1].end,type:r[o.current+1].type};d.splice(o.current+1,1,h,b)}d=d.filter(function(e){return e.start<=e.end});for(var E=0;E<d.length;)if(d[E+1]&&d[E].type===d[E+1].type){var g={data:d[E].data+d[E+1].data,start:d[E].start,end:d[E+1].end,type:d[E].type};d.splice(E,2,g)}else E++;document.getSelection().empty(),n(Object(be.a)(d))}},10)}},e.data)}))},Ka=function(e){return l.a.createElement("svg",{id:"positive-answer",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("polyline",{className:"st-tick",points:"918,192.3 389.3,807.7 82,450 ",style:{stroke:e.color?e.color:""}}))},Wa=function(e){return l.a.createElement("svg",{id:"negative-answer",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("line",{className:"st-tick",x1:"181",y1:"181",x2:"819",y2:"819",style:{stroke:e.color?e.color:""}}),l.a.createElement("line",{className:"st-tick",x1:"819",y1:"181",x2:"181",y2:"819",style:{stroke:e.color?e.color:""}}))},$a=function(e){return l.a.createElement("svg",{id:"undecided-answer",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("g",null,l.a.createElement("path",{className:"st0-und",d:"M 500,661.78784 500,544.20058 C 954.19846,189.53532 376.85433,16.13961 335.29677,279.03194",style:{stroke:e.color?e.color:""}}),l.a.createElement("circle",{className:"st1-und",cx:"500",cy:"853",r:"66",style:{fill:e.color?e.color:""}})))},Za=a(100),Qa=function(e){var t=e.screening,a=e.filtersList,r=Object(c.useRef)(!1),n=Object(c.useState)(void 0),s=Object(f.a)(n,2),i=s[0],u=s[1],m=Object(c.useState)(220),h=Object(f.a)(m,2),b=h[0],E=h[1],g=Object(c.useState)(!1),v=Object(f.a)(g,2),y=v[0],x=v[1],j=Object(c.useState)(""),w=Object(f.a)(j,2),N=w[0],O=w[1],k=Object(c.useState)(void 0),S=Object(f.a)(k,2),_=S[0],C=S[1],F=Object(c.useState)([]),P=Object(f.a)(F,2),I=P[0],T=P[1],B=Object(c.useRef)(t.data.tags),M=Object(c.useContext)(L),R=Object(c.useState)(!1),A=Object(f.a)(R,2),D=A[0],X=A[1],q=Object(c.useState)(!1),H=Object(f.a)(q,2),z=H[0],U=H[1];function V(){return(V=Object(d.a)(p.a.mark(function e(t){var a,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a={project_paper_id:i.id,vote:{metadata:{type:"single-predicate",highlights:[{highlightedData:_,outcome:"0"}],tags:I}}},e.t0=t,e.next="s"===e.t0?4:"a"===e.t0?7:"d"===e.t0?11:15;break;case 4:return console.log("NO"),O("no"),e.abrupt("break",16);case 7:return console.log("YES"),O("yes"),a.vote.metadata.highlights[0].outcome="1",e.abrupt("break",16);case 11:return console.log("UND"),O("und"),a.vote.metadata.highlights[0].outcome="2",e.abrupt("break",16);case 15:return e.abrupt("break",16);case 16:return console.log("data to send _> "),console.log(a),U(!0),e.next=21,ua.submitVote(a);case 21:n=e.sent,r.current&&n&&n.message?M.setError(n):r.current&&n.data&&X(!D);case 23:case"end":return e.stop()}},e)}))).apply(this,arguments)}function G(e){"text"!==document.activeElement.type&&y&&!z&&function(e){V.apply(this,arguments)}(e)}Object(c.useEffect)(function(){return r.current=!0,function(){r.current=!1}},[]),Object(c.useEffect)(function(){var e=!0;return function(){var a=Object(d.a)(p.a.mark(function a(){var r;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return x(!1),O(""),B.current=Za.union(B.current,I),T([]),a.next=6,ua.getProjectPaperToScreen(t.id);case 6:r=a.sent,e&&r&&"Not Found"===r.message?(u({data:{title:"Finished!",abstract:l.a.createElement(l.a.Fragment,null,"There are no more papers to screen in this project",l.a.createElement("br",null),l.a.createElement(o.b,{to:"/screenings"},"Go back to screenings list"))}}),x(!0)):e&&r&&r.message?M.setError(r):e&&r&&(u(r),C([{data:r.data.abstract,start:0,end:r.data.abstract.length-1,type:"not_highlighted"}]),x(!0),U(!1));case 8:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}()(),function(){e=!1}},[t,D]),Object(c.useEffect)(function(){y&&E(document.getElementsByClassName("s-paper")[0].clientHeight+20)},[y]);var J=l.a.createElement(l.a.Fragment,null),Y=l.a.createElement(l.a.Fragment,null),K=l.a.createElement(l.a.Fragment,null);return i&&i.data&&"Finished!"!==i.data.title&&(K=l.a.createElement("form",{className:"light-modal screening-outcome"},l.a.createElement(Ae,{className:"s-p-form"},"You can cast your vote by using the keyboard:",l.a.createElement("br",null),l.a.createElement("b",null,"A : ")," ",l.a.createElement("i",null,"yes"),l.a.createElement("br",null),l.a.createElement("b",null,"S : ")," ",l.a.createElement("i",null,"no"),l.a.createElement("br",null),l.a.createElement("b",null,"D : ")," ",l.a.createElement("i",null,"undecided"),l.a.createElement("br",null)),l.a.createElement("h2",{className:"question"},"Is the paper relevant to the review?"),l.a.createElement("p",{className:"hl-tip"},"Please highlight in the text the evidence that supports your answer"),l.a.createElement("div",{className:"vote-submission-load"},z?l.a.createElement(kt,{className:"delayed"}):l.a.createElement(l.a.Fragment,null)),l.a.createElement("div",{className:"screening-choice"},l.a.createElement("div",{className:"yes-no-und"},l.a.createElement("div",{className:"btn-decision-holder"},l.a.createElement("button",{className:"yes",style:{backgroundColor:"yes"===N?"#0b8a42":""},onClick:function(){G("a")}},l.a.createElement(Ka,{color:"yes"===N?"white":"#696969"})),l.a.createElement("div",{className:"decision-tooltip"},"yes")),l.a.createElement("div",{className:"btn-decision-holder"},l.a.createElement("button",{className:"no",style:{backgroundColor:"no"===N?"#c31f1f":""},onClick:function(){G("s")}},l.a.createElement(Wa,{color:"no"===N?"white":"#696969"})),l.a.createElement("div",{className:"decision-tooltip"},"no")),l.a.createElement("div",{className:"btn-decision-holder"},l.a.createElement("button",{className:"und",style:{backgroundColor:"und"===N?"#4242e1":""},onClick:function(){G("d")}},l.a.createElement($a,{color:"und"===N?"white":"#696969"})),l.a.createElement("div",{className:"decision-tooltip"},"undecided")))))),!1===y?Y=l.a.createElement(W,{class:"small"}):i.data&&(Y=l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",{className:"paper-title"},i.data.title),l.a.createElement(Ya,{data:i.data.abstract,disabled:"Finished!"===i.data.title,className:"paragraph",highlightedData:_,setHighlightedData:C}))),J=l.a.createElement(l.a.Fragment,null,l.a.createElement(Ha.a,{handleKeys:["a","s","d"],handleFocusableElements:!0,onKeyEvent:function(e){return G(e)}}),l.a.createElement("div",{className:"right-side-wrapper filters"},l.a.createElement("h2",null,"Filters:"),l.a.createElement(Va,{filtersList:a})),l.a.createElement("div",{style:{height:b+"px",overflow:"hidden",transition:"all 0.5s linear"}},l.a.createElement("div",{className:"left-side-wrapper s-paper"},Y)),l.a.createElement("div",{style:{display:i&&i.data&&"Finished!"===i.data.title?"none":""}},l.a.createElement(Ga,{display:y,selectedTags:I,setSelectedTags:T,availableTags:B})),K),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"single-predicate-screening-wrapper"},J))},er=function(e){var t=e.filter,a=e.display,r=e.filterHighlights,n=e.setFilterHighlights,s=e.filterVotes,i=e.setFilterVotes,o=e.highlightedData,u=e.voteSubmission,m=Object(c.useState)(""),h=Object(f.a)(m,2),b=h[0],E=h[1],g=Object(c.useRef)(s.findIndex(function(e){return e.filter_id===t.id}));function v(){return(v=Object(d.a)(p.a.mark(function e(a){var r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r="",e.t0=a,e.next="s"===e.t0?4:"a"===e.t0?7:"d"===e.t0?10:13;break;case 4:return E("0"),r="0",e.abrupt("break",14);case 7:return E("1"),r="1",e.abrupt("break",14);case 10:return E("2"),r="2",e.abrupt("break",14);case 13:return e.abrupt("break",14);case 14:i(s.map(function(e){return e.filter_id===t.id?Object(R.a)({},e,{outcome:r}):e}));case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function y(e){"text"!==document.activeElement.type&&a&&!u&&function(e){v.apply(this,arguments)}(e)}Object(c.useEffect)(function(){t.id&&(g.current=s.findIndex(function(e){return e.filter_id===t.id}),E(s[g.current].outcome))},[t]),Object(c.useEffect)(function(){if(t.id&&r&&o!==r[g.current]){var e=r;e[g.current]=o,n(Object(be.a)(e))}},[o]);l.a.createElement(l.a.Fragment,null);return t.id?l.a.createElement(l.a.Fragment,null,l.a.createElement(Ha.a,{handleKeys:["a","s","d"],handleFocusableElements:!0,onKeyEvent:function(e){return y(e)}}),l.a.createElement("div",{className:"filter-data"},l.a.createElement("h2",{className:"filter-title"},t.data.predicate),l.a.createElement("p",{className:"criteria-type"},"inclusion criteria:"),l.a.createElement("p",{className:"criteria-description"},t.data.inclusion_description||l.a.createElement("i",null,"empty criterion")),l.a.createElement("p",{className:"criteria-type"},"exclusion criteria:"),l.a.createElement("p",{className:"criteria-description"},t.data.exclusion_description||l.a.createElement("i",null,"empty criterion"))),l.a.createElement("div",{className:"screening-choice multi-predicate"},l.a.createElement("h3",{className:"filter-question"},"Is the paper relevant for this eligibility criterion?"),l.a.createElement("p",{className:"hl-tip"},"Please highlight in the text the evidence that supports your answer"),l.a.createElement("div",{className:"yes-no-und"},l.a.createElement("div",{className:"btn-decision-holder"},l.a.createElement("button",{className:"yes",type:"button",style:{backgroundColor:"1"===b?"#0b8a42":""},onClick:function(){y("a")}},l.a.createElement(Ka,{color:"1"===b?"white":"#696969"})),l.a.createElement("div",{className:"decision-tooltip"},"yes")),l.a.createElement("div",{className:"btn-decision-holder"},l.a.createElement("button",{className:"no",type:"button",style:{backgroundColor:"0"===b?"#c31f1f":""},onClick:function(){y("s")}},l.a.createElement(Wa,{color:"0"===b?"white":"#696969"})),l.a.createElement("div",{className:"decision-tooltip"},"no")),l.a.createElement("div",{className:"btn-decision-holder"},l.a.createElement("button",{className:"und",type:"button",style:{backgroundColor:"2"===b?"#4242e1":""},onClick:function(){y("d")}},l.a.createElement($a,{color:"2"===b?"white":"#696969"})),l.a.createElement("div",{className:"decision-tooltip"},"undecided"))))):l.a.createElement("div",{className:"m-p-screening-summary"},s.map(function(e,t){return l.a.createElement("div",{key:t,className:"filter-vote-summary"},l.a.createElement("p",null,e.filter_predicate)," ",l.a.createElement("div",{className:"outcome-result"},"2"===e.outcome?"undecided":"1"===e.outcome?"yes":"no"))}),l.a.createElement("button",{type:"sumbit",className:"outcomes-submission",disabled:-1!==s.findIndex(function(e){return""===e.outcome})||u},"Submit your outcomes"))},tr=function(e){var t=e.paperData,a=e.tagsData,r=e.filtersList,n=e.nextPaper,s=e.setNextPaper,i=e.clearHighlights,o=e.highlightedData,u=e.setHighlightedData,m=e.display,h=e.mountRef,b=Object(c.useState)(r[0]),E=Object(f.a)(b,2),g=E[0],v=E[1],y=Object(c.useState)(r.map(function(e){return{filter_id:e.id,filter_predicate:e.data.predicate,outcome:""}})),x=Object(f.a)(y,2),j=x[0],w=x[1],N=Object(c.useState)(void 0),O=Object(f.a)(N,2),k=O[0],S=O[1],_=Object(c.useState)(0),C=Object(f.a)(_,2),F=C[0],P=C[1],I=Object(c.useState)(26),T=Object(f.a)(I,2),B=T[0],M=T[1],A=Object(c.useState)(!1),D=Object(f.a)(A,2),X=D[0],q=D[1],H=Object(c.useContext)(L);function z(){return(z=Object(d.a)(p.a.mark(function e(){var c,l,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=j.map(function(e,t){return 1===k[t].length&&"not_highlighted"===k[t][0].type?Object(R.a)({},e,{filterHighlights:[]}):Object(R.a)({},e,{filterHighlights:k[t]})}),l={project_paper_id:t.id,vote:{metadata:{type:"multi-predicate",highlights:c,tags:a}}},-1!==j.findIndex(function(e){return""===e.outcome})){e.next=8;break}return q(!0),e.next=6,ua.submitVote(l);case 6:i=e.sent,h.current&&i&&i.message?H.setError(i):h.current&&i.data&&(s(!n),w(r.map(function(e){return{filter_id:e.id,filter_predicate:e.data.predicate,outcome:""}})),q(!1));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}Object(c.useEffect)(function(){S(r.map(function(){return[]}))},[m]),Object(c.useEffect)(function(){var e=j.findIndex(function(e){return""===e.outcome});e>=0?setTimeout(function(){h.current&&v(r[e])},400):setTimeout(function(){h.current&&v("summary")},400)},[j]),Object(c.useEffect)(function(){var e=r.findIndex(function(e){return e.id===g.id}),t=void 0,a=0;if(document.getElementsByClassName("filters-nav")[0]){if(e>=0){t=document.getElementsByClassName("filters-nav")[0].childNodes[e];for(var n=0;n<e;n++)a+=document.getElementsByClassName("filters-nav")[0].childNodes[n].getBoundingClientRect().width}else{t=document.getElementsByClassName("filters-nav")[0].childNodes[j.length];for(var c=0;c<j.length;c++)a+=document.getElementsByClassName("filters-nav")[0].childNodes[c].getBoundingClientRect().width}t=t.getBoundingClientRect().width,M(t-4)}e>=0?(k&&0!==k[e].length?u(k[e]):i(),P(a+2)):(i("disabled"),P(a+2))},[g]);var U=l.a.createElement(l.a.Fragment,null);return t&&t.data&&"Finished!"!==t.data.title&&(U=l.a.createElement("form",{className:"light-modal m-p-form",onSubmit:function(){return z.apply(this,arguments)}},l.a.createElement(Ae,{className:"s-p-form"},"You can cast your vote by using the keyboard:",l.a.createElement("br",null),l.a.createElement("b",null,"A : ")," ",l.a.createElement("i",null,"yes"),l.a.createElement("br",null),l.a.createElement("b",null,"S : ")," ",l.a.createElement("i",null,"no"),l.a.createElement("br",null),l.a.createElement("b",null,"D : ")," ",l.a.createElement("i",null,"undecided"),l.a.createElement("br",null)),l.a.createElement("div",{className:"filters-nav"},r.map(function(e){return l.a.createElement("button",{key:e.id,type:"button",className:"filter-btn",onClick:function(){v(e)}},e.data.name||"[!]")}),l.a.createElement("button",{className:"filter-btn summary",type:"button",onClick:function(){v("summary")}},"Summary"),l.a.createElement("div",{className:"underline",style:{left:F+"px",width:B+"px"}})),l.a.createElement(er,{filter:g,display:m,filterHighlights:k,setFilterHighlights:S,filterVotes:j,setFilterVotes:w,highlightedData:o,voteSubmission:X}))),U},ar=a(100),rr=function(e){var t=e.screening,a=e.filtersList,r=Object(c.useRef)(!1),n=Object(c.useState)(void 0),s=Object(f.a)(n,2),i=s[0],u=s[1],m=Object(c.useState)(!1),h=Object(f.a)(m,2),b=h[0],E=h[1],g=Object(c.useState)(220),v=Object(f.a)(g,2),y=v[0],x=v[1],j=Object(c.useState)([]),w=Object(f.a)(j,2),N=w[0],O=w[1],k=Object(c.useState)([]),S=Object(f.a)(k,2),_=S[0],C=S[1],F=Object(c.useRef)(t.data.tags),P=Object(c.useContext)(L),I=Object(c.useState)(!1),T=Object(f.a)(I,2),B=T[0],M=T[1];Object(c.useEffect)(function(){return r.current=!0,function(){r.current=!1}},[]),Object(c.useEffect)(function(){b&&x(document.getElementsByClassName("s-paper")[0].clientHeight+20)},[b]),Object(c.useEffect)(function(){var e=!0;return function(){var a=Object(d.a)(p.a.mark(function a(){var r;return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return E(!1),F.current=ar.union(F.current,_),C([]),a.next=5,ua.getProjectPaperToScreen(t.id);case 5:r=a.sent,e&&r&&"Not Found"===r.message?(u({data:{title:"Finished!",abstract:l.a.createElement(l.a.Fragment,null,"There are no more papers to screen in this project",l.a.createElement("br",null),l.a.createElement(o.b,{to:"/screenings"},"Go back to screenings list"))}}),E(!0)):e&&r&&r.message?P.setError(r):e&&r&&(u(r),O([{data:r.data.abstract,start:0,end:r.data.abstract.length-1,type:"not_highlighted"}]),E(!0));case 7:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}()(),function(){e=!1}},[t,B]);var R=l.a.createElement(l.a.Fragment,null),A=l.a.createElement(l.a.Fragment,null);return!1===b?A=l.a.createElement(W,{class:"small"}):i.data&&(A=l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",{className:"paper-title"},i.data.title),l.a.createElement(Ya,{data:i.data.abstract,disabled:"Finished!"===i.data.title,className:"paragraph",highlightedData:N,setHighlightedData:O}))),R=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"right-side-wrapper tags-holder",style:{display:i&&i.data&&"Finished!"===i.data.title?"none":""}},l.a.createElement(Ga,{className:"right",display:b,selectedTags:_,setSelectedTags:C,availableTags:F})),l.a.createElement("div",{style:{height:y+"px",overflow:"hidden",transition:"all 0.5s linear"}},l.a.createElement("div",{className:"left-side-wrapper s-paper"},A)),0===a.length?l.a.createElement("p",{className:"empty-filters-description"}," There are no filters here, add new filters before starting here"):l.a.createElement(l.a.Fragment,null,l.a.createElement(tr,{paperData:i,tagsData:_,nextPaper:B,setNextPaper:M,filtersList:a,display:b,mountRef:r,clearHighlights:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"not_highlighted";N&&i&&O([{data:i.data.abstract,start:0,end:i.data.abstract.length-1,type:e}])},highlightedData:N,setHighlightedData:O}))),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"multi-predicate-screening-wrapper"},R))},nr=Object(u.f)(function(e){var t=Object(c.useRef)(!1),a=Object(c.useState)({data:{name:"loading..."}}),r=Object(f.a)(a,2),n=r[0],s=r[1],i=Object(c.useState)(!1),o=Object(f.a)(i,2),u=o[0],m=o[1],h=Object(c.useContext)(L),b=e.match.params.id,E=Object(c.useState)([]),g=Object(f.a)(E,2),v=g[0],y=g[1],x=Object(c.useState)(!1),j=Object(f.a)(x,2),w=j[0],N=j[1];return Object(c.useEffect)(function(){!t.current||"loading..."!==n.data.name&&"UNAUTHORIZED OR INEXISTENT SCREENING"!==n.data.name?t.current&&(h.setTitle(l.a.createElement("div",{className:"nav-elements"}," ",l.a.createElement("h2",{className:"static-title"},n.data.name," screening")," ")),h.setProjectName(n.data.name)):h.setTitle(l.a.createElement("div",{className:"nav-elements"}," ",l.a.createElement("h2",{className:"static-title"},n.data.name)," "))},[n.data.name]),Object(c.useEffect)(function(){return t.current=!0,N(!1),function(){var e=Object(d.a)(p.a.mark(function e(){var a,r;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua.getScreening(b);case 2:if(a=e.sent,!t.current||!a.payload||404!==a.payload.statusCode&&401!==a.payload.statusCode&&"the token does not match any user!"!==a.payload.message&&"empty token id in header, the user must first login!"!==a.payload.message){e.next=8;break}m(!0),s({data:{name:"UNAUTHORIZED OR INEXISTENT SCREENING"}}),e.next=19;break;case 8:if(!(t.current&&a&&a.message)){e.next=12;break}h.setError(a),e.next=19;break;case 12:if(!t.current||!a){e.next=19;break}return m(!1),s(a),e.next=17,Ut.getFiltersList({project_id:a.project_id,sort:"ASC"});case 17:r=e.sent,t.current&&r&&"Not Found"===r.message?y([]):t.current&&r&&r.message?h.setError(r):t.current&&r&&y(Object(be.a)(r.results));case 19:N(!0);case 20:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),function(){t.current=!1}},[b,h.user]),u?l.a.createElement("div",{className:"forbidden-wrapper"},l.a.createElement(Ft,null),l.a.createElement("p",null,"This screening does not exist or maybe you are not allowed to see it")):w&&"single-predicate"===n.data.manual_screening_type?l.a.createElement(Qa,{screening:n,filtersList:v}):w&&"multi-predicate"===n.data.manual_screening_type?l.a.createElement(rr,{screening:n,filtersList:v}):l.a.createElement(W,null)}),cr=function(e){var t=Object(c.useContext)(L);return t.userFetch?l.a.createElement(W,null):t.user?l.a.createElement(u.d,null,l.a.createElement(u.b,{exact:!0,path:"/",render:function(){return l.a.createElement(M,null)}}),l.a.createElement(u.b,{exact:!0,path:"/projects",render:function(e){return l.a.createElement(he,e)}}),l.a.createElement(u.b,{path:"/projects/:id",render:function(e){return l.a.createElement(Ra,e)}}),l.a.createElement(u.b,{exact:!0,path:"/screenings",render:function(){return l.a.createElement(Xa,null)}}),l.a.createElement(u.b,{path:"/screenings/:id",render:function(){return l.a.createElement(nr,null)}}),l.a.createElement(u.b,{render:function(e){return l.a.createElement(It,null)}})):l.a.createElement(u.d,null,l.a.createElement(u.b,{path:"/projects/:id",render:function(e){return l.a.createElement(Ra,e)}}),l.a.createElement(u.b,{render:function(){return l.a.createElement(M,null)}}))},lr=function(e){var t=Object(c.useContext)(L);return l.a.createElement("div",{className:"navigation-wrapper"},l.a.createElement("nav",{className:t.user?"main-nav":"main-nav nav-title-to-left"},t.title),e.children)},sr=function(e){var t=Object(c.useContext)(L),a=l.a.createElement("div",{className:"user"},l.a.createElement("h3",null,"you're not logged in"));return t.user&&(a=l.a.createElement("div",{className:"user"},l.a.createElement(Be,{className:"face",alt:"profile picture",src:t.user.image}),l.a.createElement("div",{className:"user-info"},l.a.createElement("span",{className:"name"},t.user.name),l.a.createElement("span",{className:"surname"},t.user.surname)))),a},ir=function(e){return l.a.createElement("svg",{id:"menu-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("path",{className:"st0",d:"M214,482.1"}),l.a.createElement("line",{className:"st-t",x1:"172",y1:"482.1",x2:"172",y2:"482.1"}),l.a.createElement("line",{className:"st-m",x1:"500",y1:"482.1",x2:"500",y2:"482.1"}),l.a.createElement("line",{className:"st-b",x1:"828",y1:"482.1",x2:"828",y2:"482.1"}))},or=function(e){return h.menu_list.map(function(t,a){return l.a.createElement("div",{key:a,className:"entry-holder"},l.a.createElement(o.b,{to:t.link,className:"menu-option",onMouseUp:e.handleMenuBlur},t.content))})},ur=function(e){var t=Object(c.useContext)(L),a=Object(c.useState)(!1),r=Object(f.a)(a,2),n=r[0],s=r[1],i=Object(c.useState)(!0),o=Object(f.a)(i,2),u=o[0],m=o[1];function h(e){s(!1)}function b(){return(b=Object(d.a)(p.a.mark(function e(a){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("logging out"),m(!0),localStorage.removeItem("userToken"),t.setUser(null);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var E="modal side-menu up",g="button-wrapper close";return u&&(E="modal side-menu"),n&&(g="button-wrapper open",E="modal side-menu down"),t.user?l.a.createElement("div",{className:"menu"},l.a.createElement(te,{cls:n?"full-screen-transparent":"",handler:h}),l.a.createElement("div",{className:g,onClick:function(){s(!n),m(!1)}},l.a.createElement(ir,null)),l.a.createElement("div",{className:E,tabIndex:-1},l.a.createElement(sr,null),l.a.createElement(or,{handleMenuBlur:h}),l.a.createElement("div",{className:"entry-holder"},l.a.createElement("button",{type:"button",className:"menu-option",onClick:function(e){return b.apply(this,arguments)},onMouseUp:h},"Log out")))):l.a.createElement("div",{className:"menu"})},mr=Object(u.f)(function(e){var t=Object(c.useContext)(L),a=l.a.createElement(l.a.Fragment,null);return t.user&&(a=function(){var a,r=e.location.pathname.split("/").filter(function(e){return e}),n="/",c=[];a=0===r.length?l.a.createElement("div",{key:0}):l.a.createElement(o.b,{key:0,to:n},"Home",l.a.createElement("span",null," > ")),c.push(a);for(var s=0;s<r.length;s++){if(n+="/"===n?r[s]:"/"+r[s],r[s-1]&&"projects"===r[s-1])a=l.a.createElement(o.b,{key:s+1,to:n},t.projectName);else if(r[s-1]&&"screenings"===r[s-1])a=l.a.createElement("span",{key:s+1},t.projectName," screening");else switch(r[s]){case"projects":a=l.a.createElement(o.b,{key:s+1,to:n},"My Projects");break;case"screenings":a=l.a.createElement(o.b,{key:s+1,to:n},"My Screenings");break;case"searchsimilar":a=l.a.createElement(o.b,{key:s+1,to:n},"Search for similar papers");break;case"searchautomated":a=l.a.createElement(o.b,{key:s+1,to:n},"Intelligent papers search");break;case"single_predicate":a=l.a.createElement(o.b,{key:s+1,to:n},"Single predicate Mode");break;case"multi_predicate":a=l.a.createElement(o.b,{key:s+1,to:n},"Multi predicate Mode");break;case"screening":a=l.a.createElement("span",{key:s+1},"Screening");break;default:a=l.a.createElement(o.b,{key:s+1,to:n},r[s].charAt(0).toUpperCase()+r[s].slice(1))}c.push(a),s<r.length-1&&c.push(l.a.createElement("span",{key:s+9999}," > "))}return c}()),l.a.createElement("div",{className:"relative-header"},l.a.createElement("div",{className:"breadcrumbs"},a))}),pr=function(e){var t=Object(c.useContext)(L),a=Object(c.useRef)(),r=l.a.createElement(l.a.Fragment,null);return t.notificationMessage&&(a.current=setTimeout(function(){t.setNotificationMessage(void 0)},5e3),r=l.a.createElement("div",{className:"top-right-notification"},l.a.createElement("div",{className:"message-content"},t.notificationMessage),l.a.createElement("button",{type:"button",className:"close-notification-btn",onClick:function(e){t.setNotificationMessage(void 0),clearTimeout(a.current)}},l.a.createElement(Z,null)))),r},dr=a(166),fr=function(e){var t=l.a.createElement(l.a.Fragment,null),a=window.localStorage,r=Object(c.useContext)(L);function n(e){return s.apply(this,arguments)}function s(){return(s=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.tokenId&&(console.log(t.profileObj),n={email:t.profileObj.email,name:t.profileObj.givenName,surname:t.profileObj.familyName,image:t.profileObj.imageUrl},r.setUser(n),a.setItem("userToken",t.tokenId));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return r.userFetch||r.user||(t=l.a.createElement("div",{className:"login-holder"},l.a.createElement(dr.GoogleLogin,{clientId:h.google_login_client_id,buttonText:"Login",onSuccess:n,onFailure:n,cookiePolicy:"single_host_origin"}))),t},hr=function(e){return l.a.createElement("div",{className:"app"},l.a.createElement(B,{testing:e.testing},l.a.createElement(lr,null,l.a.createElement(ur,null)),l.a.createElement(mr,null),l.a.createElement(pr,null),l.a.createElement("div",{className:"main-wrapper"},l.a.createElement(cr,null),l.a.createElement(fr,null))))},br=function(e){return l.a.createElement(o.a,{basename:"/"},l.a.createElement(hr,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(br,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[167,1,2]]]);
//# sourceMappingURL=main.f62cc3c1.chunk.js.map