(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t,a){e.exports=a(279)},279:function(e,t,a){"use strict";a.r(t);var r,n,l=a(0),c=a.n(l),s=a(119),o=a.n(s),i=a(4),u=a(23),p=a(1),m=a.n(p),d=a(3),h=a(2),f={home:"https://crowdai-slr-api-dev.herokuapp.com/",search:"search",scopus_search:"search-scopus",search_similar:"search/similar",projects:"projects",papers:"papers",customPapers:"customPapers",userLogin:"auth/login",userInfo:"https://www.googleapis.com/oauth2/v3/tokeninfo",userLogout:"auth/logout",menu_list:[{id:4,content:"Home",link:"/"},{id:5,content:"My projects",link:"/projects"},{id:6,content:"Account",link:"#"}],max_total_number_for_results:5e3,pdf_parse_server:"pdf",google_login_client_id:"282160526683-84sdnoqh3bc1obojfpepcbonnfg3uks4.apps.googleusercontent.com"},E=1e4,b=window.localStorage;function v(e,t,a){return g.apply(this,arguments)}function g(){return(g=Object(d.a)(m.a.mark(function e(t,a,l){var c,s,o,i,u,p;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new AbortController,c=r.signal,n=0,s=Object.assign({mode:"cors",signal:c},a),o=setTimeout(function(){return r.abort(),void(n=2)},l),e.next=8,fetch(t,s);case 8:return i=e.sent,clearTimeout(o),e.next=12,k(i);case 12:return u=e.sent,O(i,u),e.abrupt("return",u);case 17:if(e.prev=17,e.t0=e.catch(0),2!==n){e.next=25;break}return(p=new Error("Error: Time out to get response from backend")).name="timeout",e.abrupt("return",p);case 25:if(1!==n){e.next=27;break}return e.abrupt("return",null);case 27:return e.abrupt("return",e.t0);case 28:case"end":return e.stop()}},e,null,[[0,17]])}))).apply(this,arguments)}function y(){return(y=Object(d.a)(m.a.mark(function e(t){var a,r,n,l,c,s=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]?s[1]:"",r="",""!==a){for(n in r="?",a)r+=n+"="+encodeURIComponent(a[n])+"&";r=r.slice(0,r.length-1)}return(l=new Headers).append("Accept","application/json"),l.append("Content-Type","application/json;charset=UTF-8"),l.append("Authorization",b.getItem("userToken")),c={method:"GET",headers:l},e.next=10,v(t+r,c,E);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function x(){return(x=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Headers).append("Authorization",b.getItem("userToken")),r={method:"DELETE",headers:a},e.next=5,v(t,r,E);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(){return(w=Object(d.a)(m.a.mark(function e(t){var a,r,n,l,c=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"",(r=new Headers).append("Accept","application/json, text/plain, */*"),r.append("Cache-Control","no-cache"),r.append("Content-Type","application/json;charset=UTF-8"),r.append("Authorization",b.getItem("userToken")),n=JSON.stringify(a,null,2),l={method:"POST",headers:r,body:n},e.next=10,v(t,l,E);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(){return(j=Object(d.a)(m.a.mark(function e(t){var a,r,n,l=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:"",1e4,(r=new Headers).append("Accept","application/json, text/plain, */*"),r.append("Cache-Control","no-cache"),r.append("Authorization",b.getItem("userToken")),n={method:"POST",headers:r,body:a},e.next=9,v(t,n,1e4);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(){return(N=Object(d.a)(m.a.mark(function e(t){var a,r,n,l,c=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"",(r=new Headers).append("Accept","application/json, text/plain, */*"),r.append("Cache-Control","no-cache"),r.append("Content-Type","application/json;charset=UTF-8"),r.append("Authorization",b.getItem("userToken")),n=JSON.stringify(a,null,2),l={method:"PUT",headers:r,body:n},e.next=10,v(t,l,E);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e,t){if(e.status<200||e.status>=300){var a=new Error(e.statusText);throw a.data=e,t.payload&&(a.payload=t.payload),a}}function k(e){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.headers.get("Content-Type"),r=null,null==a){e.next=21;break}if(!(a.indexOf("text")>-1)){e.next=7;break}return e.next=6,t.text();case 6:r=e.sent;case 7:if(!(a.indexOf("form")>-1)){e.next=11;break}return e.next=10,t.formData();case 10:r=e.sent;case 11:if(!(a.indexOf("video")>-1)){e.next=15;break}return e.next=14,t.blob();case 14:r=e.sent;case 15:if(!(a.indexOf("json")>-1)){e.next=19;break}return e.next=18,t.json();case 18:r=e.sent;case 19:e.next=25;break;case 21:if(null==t){e.next=25;break}return e.next=24,t.text();case 24:r=e.sent;case 25:return e.abrupt("return",r);case 26:case"end":return e.stop()}},e)}))).apply(this,arguments)}var C={get:function(e){return y.apply(this,arguments)},post:function(e){return w.apply(this,arguments)},delete:function(e){return x.apply(this,arguments)},put:function(e){return N.apply(this,arguments)},postFile:function(e){return j.apply(this,arguments)},abortRequest:function(){r.abort(),n=1,console.log("abort")}};function P(){return(P=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.home+f.userLogin,e.next=3,C.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(){return(I=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.userInfo,e.next=3,C.get(a,{id_token:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(){return(B=Object(d.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.home+f.userLogout,e.next=3,C.get(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var _={postTokenId:function(e){return P.apply(this,arguments)},getUserByTokenId:function(e){return I.apply(this,arguments)},logoutUser:function(){return B.apply(this,arguments)}},T=Object(u.e)(function(e){var t=Object(l.useState)(!0),a=Object(h.a)(t,2),r=a[0],n=a[1],s=Object(l.useContext)(L),o=e.history,i=e.location;Object(l.useEffect)(function(){r?(console.log("error mountes"),n(!1)):s.setError(null)},[i.pathname]),Object(l.useEffect)(function(){try{if(console.log(s.error.payload.statusCode),401===s.error.payload.statusCode||"the token does not match any user!"===s.error.payload.message){console.log("unauth call");var e=window.localStorage;if(e.getItem("userToken")){var t=function(){var t=Object(d.a)(m.a.mark(function t(){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.getUserByTokenId(e.getItem("userToken"));case 2:(a=t.sent)&&a.message?(console.log("INVALID TOKEN"),e.removeItem("userToken"),s.setUser(null)):console.log("VALID TOKEN");case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();console.log("checking token"),t()}console.log("pushing back"),o.goBack()}}catch(a){console.log("YOU MAY NEED TO CHANGE THE HOME URL PARAMETER FROM 'config/index.js'")}return function(){s.setError(null)}},[]);var u=c.a.createElement(c.a.Fragment,null);return u=s.error.payload?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Error code:"),c.a.createElement("p",null,s.error.payload.statusCode),c.a.createElement("p",null,"Error name:"),c.a.createElement("p",null,s.error.payload.error),c.a.createElement("p",null,"Error message"),c.a.createElement("p",null,s.error.payload.message)):c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Error name:"),c.a.createElement("p",null,s.error.name),c.a.createElement("p",null,"Error message"),c.a.createElement("p",null,s.error.message)),u=c.a.createElement("div",{className:"error-wrapper",style:{textAlign:"center"}},u,c.a.createElement("br",null),c.a.createElement("button",{type:"button",onClick:function(){o.goBack(),s.setError(null)}},c.a.createElement("u",null,"return to previous page")),c.a.createElement("br",null),c.a.createElement("p",null,"or"),c.a.createElement("br",null),c.a.createElement("button",{type:"button",onClick:function(){s.setError(null)}},c.a.createElement("u",null,"refresh")))}),L=c.a.createContext(),F=function(e){var t=Object(l.useState)(null),a=Object(h.a)(t,2),r=a[0],n=a[1],s=Object(l.useState)(!0),o=Object(h.a)(s,2),i=o[0],u=o[1],p=Object(l.useState)(null),f=Object(h.a)(p,2),E=f[0],b=f[1],v=Object(l.useState)(c.a.createElement("div",{className:"nav-elements"}," ",c.a.createElement("h2",{className:"static-title"},"HOME")," ")),g=Object(h.a)(v,2),y=g[0],x=g[1],w=Object(l.useState)(void 0),j=Object(h.a)(w,2),N=j[0],O=j[1],k=Object(l.useState)(""),S=Object(h.a)(k,2),C=S[0],P=S[1],I={user:r,setUser:n,userFetch:i,setUserFetch:u,error:E,setError:b,title:y,setTitle:x,notificationMessage:N,setNotificationMessage:O,projectName:C,setProjectName:P};return Object(l.useEffect)(function(){var e=window.localStorage;e.getItem("userToken")?function(){var t=Object(d.a)(m.a.mark(function t(){var a,r;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.getUserByTokenId(e.getItem("userToken"));case 2:(a=t.sent)&&a.message||!a.email?e.removeItem("userToken"):(r={email:a.email,name:a.given_name,surname:a.family_name,image:a.picture},n(r)),u(!1);case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()():u(!1)},[]),E?c.a.createElement(L.Provider,{value:I},c.a.createElement(T,null)):c.a.createElement(L.Provider,{value:I},e.children)},M=Object(u.e)(function(e){var t=Object(l.useContext)(L);Object(l.useEffect)(function(){t.setTitle(c.a.createElement("div",{className:"nav-elements"}," ",c.a.createElement("h2",{className:"static-title"},"HOME")," "))},[]);var a=e.history,r=e.location;return Object(l.useEffect)(function(){t.user||a.push("/")},[r.pathname]),c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"Systematic Literature Review manager"),c.a.createElement("h2",{style:{fontSize:22,fontWeight:"normal"}},"the system right now allows you to"),c.a.createElement("ul",{style:{fontSize:18,fontWeight:"lighter"}},c.a.createElement("li",null,"browse a list of prjects"),c.a.createElement("li",null,"add a new project"),c.a.createElement("li",null,"browse the list of papers on a project"),c.a.createElement("li",null,"search(from scopus) and add papers to a project"),c.a.createElement("li",null,"add custom papers based on a file or form data"),c.a.createElement("li",null,"'fake search' similar papers")),c.a.createElement("h2",{style:{fontSize:22,fontWeight:"normal"}},"notes"),c.a.createElement("ul",{style:{fontSize:18,fontWeight:"lighter"}},c.a.createElement("li",null,c.a.createElement("i",null,"the scopus search works partially(can't retrieve the description)"),c.a.createElement("ul",null,c.a.createElement("li",{style:{fontSize:16}},c.a.createElement("i",null,'from Elsevier developer portal : "The data available depends on your institutional subscriptions, and only when you\'re making calls from within your institutional network are you considered a subscriber"')))),c.a.createElement("li",null,c.a.createElement("i",null,"the options don't affect the search, for now"))))}),A=a(8),D=a(16),X=a.n(D);function q(){return(q=Object(d.a)(m.a.mark(function e(){var t,a,r,n=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",a=f.home+f.projects,e.next=4,C.get(a,t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(){return(R=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.home+f.projects+"/"+t,e.next=3,C.get(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function U(){return(U=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.home+f.projects+"/"+t+"/collaborators",e.next=3,C.get(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(){return(z=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.home+f.projects,e.next=3,C.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(){return(H=Object(d.a)(m.a.mark(function e(t,a){var r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.home+f.projects+"/"+t+"/collaborators",e.next=3,C.post(r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function J(){return(J=Object(d.a)(m.a.mark(function e(t,a){var r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.home+f.projects+"/"+t,e.next=3,C.put(r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function V(){return(V=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.home+f.projects+"/"+t,e.next=3,C.delete(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function G(){return(G=Object(d.a)(m.a.mark(function e(t,a){var r,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.home+f.projects+"/"+t+"/collaborators/"+a,e.next=3,C.delete(r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Y={getProjectsList:function(){return q.apply(this,arguments)},getProject:function(e){return R.apply(this,arguments)},postProject:function(e){return z.apply(this,arguments)},putProject:function(e,t){return J.apply(this,arguments)},deleteProject:function(e){return V.apply(this,arguments)},abortRequest:C.abortRequest,getProjectCollaborators:function(e){return U.apply(this,arguments)},removeProjectCollaborator:function(e,t){return G.apply(this,arguments)},addProjectCollaborator:function(e,t){return H.apply(this,arguments)}},W=function(e){return c.a.createElement("svg",{id:"loading-icon",className:e.class,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("g",null,c.a.createElement("path",{id:"loading-circle1",d:" M 500, 500 m -160, 0 a 160,160 0 1,0 320,0 a 160,160 0 1,0 -320,0 "}),c.a.createElement("path",{id:"loading-circle2",d:" M 500, 500 m -305, 0 a 305,305 0 1,0 610,0 a 305,305 0 1,0 -610,0 "})))},K=a(9),$=function(e){return c.a.createElement("svg",{id:"close-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("line",{className:"ln",x1:"134",y1:"866",x2:"866",y2:"134"}),c.a.createElement("line",{className:"ln",x1:"134",y1:"134",x2:"866",y2:"866"}))};var Z=function(e){var t=a(75),r=Object(l.useState)(!1),n=Object(h.a)(r,2),s=(n[0],n[1],t.object().shape({name:t.string().required("please enter a title"),description:t.string().required("please enter a description")})),o=Object(l.useContext)(L);return c.a.createElement(c.a.Fragment,null,c.a.createElement(K.c,{initialValues:{name:"",description:""},validationSchema:s,onSubmit:function(){var t=Object(d.a)(m.a.mark(function t(a,r){var n,l,c;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.setSubmitting,l={name:a.name,description:a.description},t.next=4,Y.postProject(l);case 4:(c=t.sent).message?o.setError(c):e.history.push("/projects/"+c.id),n(!1);case 7:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),validateOnBlur:!1},function(t){var a=t.errors,r=t.touched,n=t.isSubmitting,l=(t.setErrors,t.validateField),s=t.handleChange;return c.a.createElement(K.b,{className:"modal add-project",style:{visibility:e.visibility?"":"hidden"}},c.a.createElement("button",{type:"button",className:"close-btn",onClick:function(t){e.setVisibility(!e.visibility)}},c.a.createElement($,null)),c.a.createElement("br",null),c.a.createElement(K.a,{style:{borderBottom:a.name&&r.name?"solid 1px #d81e1e":""},name:"name",type:"text",placeholder:"Project Name",onChange:function(e){s(e),l("name")}}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(K.a,{style:{borderBottom:a.description&&r.description?"solid 1px #d81e1e":""},name:"description",component:"textarea",placeholder:"Project Description"}),c.a.createElement("br",null),c.a.createElement("button",{type:"submit",disabled:n||a.name&&r.name||a.description&&r.description},"Add Project"))}))};var Q=function(e){var t=e.start,a=e.count,r=e.totalResults,n=e.path;r>f.max_total_number_for_results&&(r=f.max_total_number_for_results),n=function(e){var t=window.location.href.split("?")[1];if(t){t=t.split("#")[0];for(var a="",r=t.split("&"),n=0;n<r.length;n++){var l=r[n].split("=")[0];"start"!==l&&"count"!==l&&(a+=r[n]+"&")}e=e+"?"+a}else e+="?";return e}(n);var l="",s="",o="",u="",p=[],m=Math.floor(t/a)+1,d=Math.ceil(r/a);if(d>1){m>1&&(l=c.a.createElement("li",null,c.a.createElement(i.b,{className:"prev-page",to:n+"start="+((m-1)*a>0?(m-2)*a:0)+"&count="+a},"<"))),m<d&&(s=c.a.createElement("li",null,c.a.createElement(i.b,{className:"next-page",to:n+"start="+m*a+"&count="+a},">"))),m>6&&(o=c.a.createElement(c.a.Fragment,null,c.a.createElement("li",null,c.a.createElement(i.b,{className:"first-page",to:n+"start=0&count="+a},"1")),c.a.createElement("li",null,c.a.createElement("span",null,"...")))),m<d-5&&(u=c.a.createElement(c.a.Fragment,null,c.a.createElement("li",null,c.a.createElement("span",null,"...")),c.a.createElement("li",null,c.a.createElement(i.b,{style:{display:"inline-block"},className:"last-page",to:n+"start="+(d-1)*a+"&count="+a},d))));for(var h=m-4;h<=m+4;h++)h>0&&h<=d&&(h!==m?p.push(c.a.createElement(i.b,{className:"normal-page",to:n+"start="+(h-1)*a+"&count="+a},h)):p.push(c.a.createElement("span",{className:"current-page"},m)))}return c.a.createElement("ul",{className:"pagination"},l,o,p.map(function(e,t){return c.a.createElement("li",{style:{display:"inline-block",margin:10},key:t},e)}),u,s)};function ee(e,t,a){if(null===e||null===t)return!1;if(0===e.length||0===t.length)return!1;for(var r=function(r){if(!e.some(function(e){return e[a]===t[r][a]}))return{v:!1}},n=0;n<t.length;++n){var l=r(n);if("object"===typeof l)return l.v}return!0}function te(e,t){return"/"===e.charAt(e.length-1)?e.slice(0,-1)+t:e+t}function ae(e){for(var t="?",a=Object.keys(e),r=0;r<a.length;r++)"date_created"===e.orderBy&&"sort"===a[r]||(t+=a[r]+"="+encodeURIComponent(e[a[r]]),r!==a.length-1&&(t+="&"));return t}function re(e,t,a){for(var r=-1,n=0;n<e.length;n++)if(e[n][t]===a){r=n;break}return r}var ne=function(e){var t=e.cls,a=e.handler;return c.a.createElement("div",{className:"cover "+t,onClick:function(e){a(!1)}})},le=function(e){return c.a.createElement("svg",{version:"1.1",id:"options-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("path",{className:"st0",d:"M214,482.1"}),c.a.createElement("line",{className:"st-options",x1:"500",y1:"250",x2:"500",y2:"250"}),c.a.createElement("line",{className:"st-options",x1:"500",y1:"500",x2:"500",y2:"500"}),c.a.createElement("line",{className:"st-options",x1:"500",y1:"750",x2:"500",y2:"750"}))},ce=function(e){var t=e.cls,a=e.options,r=e.handler,n=e.target,s=e.data,o=Object(l.useState)(!1),i=Object(h.a)(o,2),u=i[0],p=i[1];return c.a.createElement("div",{className:t},c.a.createElement("button",{type:"button",onBlur:function(e){u&&p(!1)},onMouseDown:function(e){p(!u)}},c.a.createElement(le,null)),c.a.createElement("div",{style:{fontSize:u?"12px":"0px",padding:u?"2px":"0px",border:u?"solid 1px #e8e8e8":"solid 0px #e8e8e800"},className:"options-list"},a.map(function(e,t){return c.a.createElement("div",{key:t,onMouseDown:function(t){return r(n,e,s)},className:"option"},e)})))},se=function(e){return c.a.createElement("svg",{version:"1.1",id:"empty-folder",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{className:"st0-empty-folder",d:"M967.9,448.6v260c0,15.1-12.2,27.3-27.3,27.3H59.4c-15.1,0-27.3-12.2-27.3-27.3v-260c0-0.3,0-0.7,0-1 c0-0.2,0-0.4,0.1-0.6c0-0.2,0-0.4,0.1-0.7c0-0.2,0.1-0.4,0.1-0.6c0-0.3,0.1-0.6,0.2-1c0.6-2.4,1.7-4.7,3.5-6.8l141.3-168.3 c2.9-3.4,7.1-5.4,11.6-5.4h89.1c8.5,0,15.9,5.4,18.5,13.5l11.4,35.1c6.3,19.3,24.3,32.4,44.7,32.4h294.4 c20.3,0,38.4-13.1,44.7-32.4l11.4-35.1c2.6-8,10.1-13.5,18.5-13.5h89.1c4.5,0,8.8,2,11.6,5.4l141.3,168.3c1.8,2.1,2.9,4.4,3.5,6.8 c0.1,0.3,0.2,0.6,0.2,1c0,0.2,0.1,0.4,0.1,0.6s0.1,0.5,0.1,0.7s0.1,0.4,0.1,0.6C967.8,447.9,967.9,448.2,967.9,448.6z"}),c.a.createElement("path",{d:"M974.9,448.6c0.1,31-0.8,62-1.4,93c-0.2,7.8-0.3,15.5-0.4,23.3c-0.1,7.8-0.1,15.5-0.2,23.3v46.5v46.5v23.3v2.9 c0,0.5,0,0.9,0,1.5l-0.1,1.7c0,1.1-0.2,2.3-0.4,3.4c-0.1,1.1-0.5,2.2-0.7,3.4c-1.2,4.4-3.4,8.6-6.4,12.1s-6.7,6.4-10.8,8.3 c-4.1,2-8.7,3.1-13.3,3.1l-23.3,0.1l-46.5,0.1l-372.1,1.1L127,742.9L80.5,743H68.9h-5.8h-2.9h-0.7h-0.9l-1.8-0.1 c-4.9-0.4-9.7-1.8-14-4.2s-8-5.7-11-9.6c-2.9-3.9-5-8.5-6.1-13.3c-0.3-1.2-0.4-2.4-0.6-3.6c-0.1-1.2-0.1-2.4-0.2-3.7v-5.8v-23.3 L24.8,633v-93l0.2-46.5l0.1-23.3l0.1-11.6v-5.8v-2.9c0-0.5,0-0.9,0-1.5v-0.9c0,0,0-0.6,0.1-0.9c0-0.3,0.1-0.7,0.1-1l-0.1,1.4 c0-0.5,0.1-1,0.1-1.5l0.1-0.6l0.1-0.6l-0.1,0.5l0.2-1c0.1-0.3,0.2-0.7,0.2-1c0.1-0.5,0.3-1.1,0.5-1.6c0.4-1.1,0.8-2.1,1.3-3.1 s1.1-1.9,1.7-2.8c0.3-0.4,0.6-0.9,1-1.3l0.9-1l6.1-7.1l12.1-14.3L73.6,383l48.4-57l48.5-56.9l1.5-1.8l0.8-0.9l0.4-0.5l0.5-0.6 c1.4-1.6,3.1-2.9,5-4c1.8-1.1,3.9-1.8,5.9-2.3c1-0.2,2.1-0.4,3.2-0.4c0.3,0,0.5,0,0.8,0h0.7h1.2l18.7,0.1l37.4,0.3l18.7,0.1 l9.4,0.1h2.3h1.2l1.4,0.1c1.9,0.1,3.9,0.4,5.7,1c3.7,1.1,7.1,3.2,9.9,6c1.4,1.4,2.6,2.9,3.6,4.6s1.8,3.4,2.4,5.3l5.7,17.8 l5.7,17.8c1.8,5.3,4.6,10.3,8.3,14.6c7.4,8.5,18.3,13.9,29.7,14.5l2.1,0.1h2.3h4.7h9.4l18.7,0.1l37.4,0.1l74.8,0.1l74.8-0.1 l37.4-0.1l18.7-0.1h9.4h4.7h2.3l2.1-0.1c11.3-0.5,22.2-6,29.6-14.5c3.7-4.2,6.5-9.2,8.3-14.5l5.7-17.8l5.6-17.8 c0.6-1.9,1.4-3.6,2.4-5.3c1-1.7,2.3-3.2,3.6-4.6c2.8-2.8,6.2-4.9,10-6c1.9-0.6,3.8-0.9,5.8-1.1l1.5-0.1h1.2h2.3l9.4-0.1l18.7-0.1 l37.4-0.3l18.7-0.1h1.2h0.7c0.3,0,0.5,0,0.8,0c1.1,0.1,2.2,0.2,3.2,0.4c2.1,0.5,4.2,1.2,6,2.3c1.9,1.1,3.6,2.4,5.1,4l0.5,0.6 l0.4,0.5l0.8,0.9l1.5,1.8l48.5,56.9l48.4,57.1l24.1,28.6l12.1,14.3l6,7.1l0.9,1.1c0.3,0.4,0.7,0.9,1,1.3c0.6,0.9,1.2,1.8,1.7,2.8 s0.9,2,1.3,3.1c0.2,0.5,0.3,1.1,0.5,1.6c0.1,0.2,0.1,0.6,0.2,1l0.2,1l-0.1-0.5l0.1,0.6l0.1,0.6c0.1,0.5,0.1,1,0.1,1.5l-0.1-1.4 c0.1,0.4,0.1,0.8,0.2,1.2v0.6v0.3L974.9,448.6z M960.8,448.6v-0.7v-0.2c0,0.1,0,0.1,0,0.2s0,0.2,0.1,0.4l-0.1-1.4 c0,0.1,0,0.2,0,0.2l0,0V447l-0.1-0.5l0,0v-0.1c0,0,0,0,0-0.2c-0.1-0.3-0.1-0.4-0.2-0.6c-0.1-0.4-0.3-0.8-0.5-1.2 c-0.2-0.4-0.4-0.8-0.7-1.2c-0.1-0.2-0.3-0.4-0.4-0.6l-0.6-0.7l-6-7.2l-12-14.4l-24-28.7l-47.8-57.5l-47.7-57.6l-2.8-3.4 c-0.6-0.7-1.4-1.3-2.2-1.8s-1.7-0.8-2.6-1.1c-0.5-0.1-0.9-0.2-1.4-0.2c-0.1,0-0.2,0-0.4,0c-0.1,0-0.2,0-0.4,0h-1.2l-18.7-0.1 l-37.4-0.3l-18.7-0.1l-9.4-0.1h-2.3h-1.2h-0.9c-1.1,0.1-2.3,0.2-3.4,0.6c-4.4,1.3-8.1,4.8-9.6,9.2l-5.9,17.8l-5.9,17.8 c-2.3,6.5-5.7,12.5-10.3,17.6c-9.1,10.2-22.4,16.6-36,17.2L500,349.2l-149.8,0.2c-13.6-0.6-26.9-6.9-35.9-17.2 c-4.6-5.1-8-11.1-10.3-17.6l-5.9-17.8l-5.9-17.8c-1.5-4.5-5.2-8.1-9.7-9.4c-1.1-0.4-2.3-0.5-3.4-0.6h-0.9H277h-2.3l-9.4,0.1 l-18.7,0.1l-37.4,0.3l-18.7,0.1h-1.2c-0.2,0-0.3,0-0.5,0c-0.1,0-0.2,0-0.4,0c-0.5,0-1,0.1-1.5,0.2c-1,0.2-1.9,0.6-2.7,1.1 c-0.9,0.5-1.6,1.1-2.3,1.9l-2.8,3.4l-47.7,57.6l-47.8,57.6l-23.9,28.8l-11.9,14.4l-6,7.2l-0.6,0.8c-0.1,0.2-0.3,0.4-0.4,0.6 c-0.3,0.4-0.5,0.8-0.7,1.2c-0.2,0.4-0.4,0.8-0.5,1.2c-0.1,0.2-0.1,0.4-0.2,0.6c0,0.2,0,0.1,0,0.2v0.1v0.1l-0.1,0.5v0.1 c0,0,0,0.1,0,0s0-0.2,0-0.2l-0.1,1.4c0-0.1,0.1-0.2,0.1-0.3c0-0.1,0-0.3,0-0.2v0.6c0,0.4,0,0.9,0,1.4v2.9v5.8l0.1,11.6l0.1,23.3 l0.2,46.5v93l-0.1,46.5v23.3v5.8l0.1,2.1c0.1,0.7,0.2,1.4,0.3,2.1c0.6,2.8,1.8,5.4,3.5,7.7s3.9,4.2,6.4,5.6 c2.5,1.4,5.3,2.2,8.1,2.4l1.1,0.1h0.5h0.7h2.9H69h11.6l46.5,0.1l372.1,0.8l372.1,1.1l46.5,0.1H941c6.3-0.1,12.5-3,16.6-7.9 c2.1-2.4,3.5-5.3,4.4-8.3c0.2-0.8,0.4-1.5,0.5-2.3s0.3-1.6,0.3-2.4l0.1-1.2c0-0.4,0-0.9,0-1.4v-2.9V681v-46.5V588 c0-7.8-0.1-15.5-0.2-23.3c-0.1-7.8-0.2-15.5-0.4-23.3C961.6,510.6,960.7,479.6,960.8,448.6z"})),c.a.createElement("g",null,c.a.createElement("path",{className:"st1-empty-folder",d:"M952.8,686.4l-120.7-220l-9.8-17.9c-2.7-4.8-7.7-7.8-13.2-7.8H190.9c-5.5,0-10.6,3-13.2,7.8l-9.8,17.9 L50,681.3"}),c.a.createElement("path",{className:"st2-empty-folder",d:"M951.1,687.4L915,622.6l-36-64.9l-35.8-65l-17.9-32.5l-4.5-8.1l-1.1-2c-0.3-0.6-0.6-1.1-1-1.6 c-0.8-1-1.7-1.8-2.7-2.6c-2-1.4-4.5-2.2-7-2.2h-9.3l-296.8,0.2l-296.8-0.2h-9.3h-4.6H191h-0.9c-0.6,0.1-1.2,0.1-1.8,0.3 c-2.4,0.5-4.6,1.8-6.3,3.7c-0.4,0.5-0.8,1-1.1,1.5c-0.2,0.3-0.3,0.5-0.5,0.8l-0.6,1l-2.2,4.1l-17.9,32.5l-35.8,65l-36,64.9 l-36.1,64.8l-3.5-1.9L83.5,615l35.4-65.2l35.6-65.1l17.8-32.6l2.2-4.1l0.6-1c0.2-0.4,0.5-0.8,0.7-1.2c0.5-0.8,1.1-1.5,1.7-2.2 c2.5-2.8,5.8-4.7,9.5-5.6c0.9-0.2,1.8-0.3,2.8-0.4h1.4h1.2h4.6h9.3l296.8-0.2l296.8,0.2h9.3c3.7,0,7.4,1.2,10.5,3.3 c1.5,1.1,2.9,2.4,4,3.8c0.6,0.7,1.1,1.5,1.5,2.3l1.1,2l4.5,8.1l17.8,32.6l35.6,65.1l35.4,65.2l35.3,65.3L951.1,687.4z"})),c.a.createElement("path",{className:"st3-empty-folder",d:"M967.9,448.6v260c0,15.1-12.2,27.3-27.3,27.3H59.4c-15.1,0-27.3-12.2-27.3-27.3v-260c0,8.7,6.8,16.9,16.8,16.9 h111.4c12.9,0,24.4,8.3,28.3,20.6l17.4,53.8c9.6,29.6,37.2,49.7,68.4,49.7h451c31.2,0,58.8-20.1,68.4-49.7l17.4-53.8 c4-12.3,15.4-20.6,28.3-20.6H951C961.1,465.5,967.9,457.3,967.9,448.6z"})))},oe=function(e){var t,a=e.projectsList,r=e.path,n=e.handleDelete,l=["delete"];return t=0===a.length?c.a.createElement("div",{className:"empty-folder-wrapper"}," ",c.a.createElement(se,null)," ",c.a.createElement("p",{className:"empty-folder-description"}," You don't have any projects yet ")):a.map(function(e,t){return c.a.createElement("div",{key:e.id,className:"light-modal project-card"},c.a.createElement(ce,{options:l,handler:n,target:e.id,cls:"card-options project-card-options"}),c.a.createElement(i.b,{to:te(r,"/"+e.id)},c.a.createElement("h3",null,e.data.name),c.a.createElement("p",{className:"description"},e.data.description),c.a.createElement("div",{className:"project-dates"},c.a.createElement("p",null),c.a.createElement("p",null,"last modified on ",c.a.createElement("i",null,e.date_last_modified.slice(0,10))))))}),c.a.createElement("div",{className:0===a.length?"project-cards-holder-empty":"project-cards-holder"},t)};var ie=function(e){var t=Object(l.useState)([]),a=Object(h.a)(t,2),r=a[0],n=a[1],s=Object(l.useState)(0),o=Object(h.a)(s,2),i=o[0],u=o[1],p=Object(l.useState)(!1),f=Object(h.a)(p,2),E=f[0],b=f[1],v=Object(l.useState)(!1),g=Object(h.a)(v,2),y=g[0],x=g[1],w=Object(l.useContext)(L),j=function(e){var t=X.a.parse(e),a=t.count||10;return{start:t.start||0,count:a}}(e.location.search);function N(){return(N=Object(d.a)(m.a.mark(function e(t){var a,l;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleting "+t),e.next=3,Y.deleteProject(t);case 3:(a=e.sent)&&a.message?w.setError(a):a&&null!==a&&(l=r.filter(function(e){return e.id!==t}),n(l),w.setNotificationMessage("Successfully deleted"));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(l.useEffect)(function(){w.setTitle(c.a.createElement("div",{className:"nav-elements"}," ",c.a.createElement("h2",{className:"static-title"},"PROJECTS")," ")),w.setProjectName("")},[]),Object(l.useEffect)(function(){var e=!0;return function(){var t=Object(d.a)(m.a.mark(function t(){var a,r,l;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return b(!1),t.next=3,Y.getProjectsList(Object(A.a)({orderBy:"date_last_modified"},j));case 3:a=t.sent,e&&a&&"Not Found"===a.message?(n([]),u(0),b(!0)):e&&a&&a.message?w.setError(a):e&&a&&(r=a.results.filter(function(e,t){if(t%2)return e}),l=[],l=a.results.filter(function(e,t){if(!(t%2))return e}),n(l.concat(r)),u(a.totalResults),b(!0));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[j.start,j.count]),!1===E?c.a.createElement(W,null):c.a.createElement("div",null,c.a.createElement(ne,{cls:y?"full-screen":"",handler:x}),c.a.createElement(oe,{projectsList:r,path:e.match.url,handleDelete:function(e){return N.apply(this,arguments)}}),c.a.createElement(Q,{start:j.start,count:j.count,totalResults:i,path:e.match.url}),c.a.createElement(Z,{visibility:y,setVisibility:x,history:e.history}),c.a.createElement("button",{className:"bottom-left-btn add-project-btn",type:"button",value:"toggle-insert-form",onClick:function(e){x(!y)}},c.a.createElement("div",{className:"btn-title"},"Add Project"),c.a.createElement("div",{className:"btn-icon"}," ")))},ue=a(10);function pe(){return(pe=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.home+f.search,e.next=3,C.get(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(){return(me=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.home+f.papers+"/"+t,e.next=3,C.get(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function de(){return(de=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.home+f.search_similar,console.log(t),e.next=4,C.post(a,t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var he={search:function(e){return pe.apply(this,arguments)},selectById:function(e){return me.apply(this,arguments)},searchSimilar:function(e){return de.apply(this,arguments)},abortRequest:C.abortRequest};function fe(){return(fe=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.home+f.papers,e.next=3,C.get(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ee(){return(Ee=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.home+f.papers+"/"+t,e.next=3,C.get(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function be(){return(be=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.home+f.papers,e.next=3,C.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ve(){return(ve=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.home+f.customPapers,e.next=3,C.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ge(){return(ge=Object(d.a)(m.a.mark(function e(t,a){var r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.home+f.papers+"/"+t,e.next=3,C.put(r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ye(){return(ye=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.home+f.papers+"/"+t,e.next=3,C.delete(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var xe={getPapersList:function(e){return fe.apply(this,arguments)},getPaper:function(e){return Ee.apply(this,arguments)},postPaperIntoProject:function(e){return be.apply(this,arguments)},postCustomPaperIntoProject:function(e){return ve.apply(this,arguments)},putPaper:function(e,t){return ge.apply(this,arguments)},deletePaper:function(e){return ye.apply(this,arguments)},abortRequest:C.abortRequest},we=function(e){return c.a.createElement("svg",{id:"select-tick",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("polyline",{className:"st-tick",points:"918,192.3 389.3,807.7 82,450 "},c.a.createElement("animate",{attributeName:"points",dur:"0.2s",repeatCount:"1",fill:"freeze",from:"500,600 400,700 200,750",to:"918,192.3 389.3,807.7 82,450 "})))},je=function(e){var t=e.val,a=e.name,r=e.label,n=e.isChecked,s=e.handler,o=Object(l.useState)(c.a.createElement(c.a.Fragment,null)),i=Object(h.a)(o,2),u=i[0],p=i[1];return Object(l.useEffect)(function(){p(n?c.a.createElement(we,null):c.a.createElement(c.a.Fragment,null))},[n]),c.a.createElement("label",{className:"checkbox-container"},c.a.createElement("input",{type:"checkbox",value:t,name:a,checked:n,onChange:function(e){s(e)}}),c.a.createElement("span",{className:"checkmark"},u),c.a.createElement("span",{className:"name"},r))},Ne=function(e){return c.a.createElement("svg",{id:"radio-tick",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("circle",{className:"st-circle",cx:"500",cy:"500",r:"375"},c.a.createElement("animate",{attributeName:"r",dur:"0.2s",repeatCount:"1",fill:"freeze",from:"0",to:"375"})))},Oe=function(e){var t=e.label,a=e.name,r=e.val,n=e.isChecked,s=e.handler,o=Object(l.useState)(c.a.createElement(c.a.Fragment,null)),i=Object(h.a)(o,2),u=i[0],p=i[1];return Object(l.useEffect)(function(){p(n?c.a.createElement(Ne,null):c.a.createElement(c.a.Fragment,null))},[n]),c.a.createElement("label",{className:"radiobox-container"},c.a.createElement("input",{type:"radio",value:r,name:a,checked:n,onChange:s}),c.a.createElement("span",{className:"radiomark"},u),c.a.createElement("span",null,t))},ke=a(36),Se=a.n(ke),Ce=function(e){return c.a.createElement("svg",{version:"1.1",id:"no-papers",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("line",{className:"st0-no-papers",x1:"790",y1:"223.1",x2:"790",y2:"255.6"}),c.a.createElement("line",{className:"st1-no-papers",x1:"790",y1:"357.8",x2:"790",y2:"801.3"}),c.a.createElement("polyline",{className:"st0-no-papers",points:"790,852.4 790,884.9 757.5,884.9 \t\t"}),c.a.createElement("line",{className:"st2-no-papers",x1:"635.6",y1:"884.9",x2:"303.4",y2:"884.9"}),c.a.createElement("polyline",{className:"st0-no-papers",points:"242.5,884.9 210,884.9 210,852.4 \t\t"}),c.a.createElement("line",{className:"st3-no-papers",x1:"210",y1:"757.8",x2:"210",y2:"194.9"}),c.a.createElement("polyline",{className:"st0-no-papers",points:"210,147.6 210,115.1 242.5,115.1 \t\t"}),c.a.createElement("polyline",{className:"st4-no-papers",points:"338.4,115.1 682,115.1 733.1,166.2 \t\t"}),c.a.createElement("polyline",{className:"st0-no-papers",points:"767,200.1 790,223.1 757.5,223.1 \t\t"}),c.a.createElement("polyline",{className:"st0-no-papers",points:"714.5,223.1 682,223.1 682,190.6 \t\t"}),c.a.createElement("line",{className:"st0-no-papers",x1:"682",y1:"147.6",x2:"682",y2:"115.1"}))},Pe=function(e){var t=e.papersList,a=e.location,r=e.history,n=Object(l.useState)(t),s=Object(h.a)(n,2),o=s[0],u=s[1],p=Object(l.useContext)(L),f=["delete","search similar"];function E(e,t,a){return b.apply(this,arguments)}function b(){return(b=Object(d.a)(m.a.mark(function e(t,n,l){var c,s;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("delete"!==n){e.next=8;break}return console.log("deleting "+t),e.next=4,xe.deletePaper(t);case 4:(c=e.sent).message?p.setError(c):null!==c&&(p.setNotificationMessage("Successfully deleted"),s=o.filter(function(e){return e.id!==t}),u(s)),e.next=9;break;case 8:"search similar"===n&&(console.log("here you want to search for a similar paper"),console.log(a),window.localStorage.setItem("similarPaperData",JSON.stringify(l)),r.push(te(a.pathname,"/searchsimilar")));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}return 0===o.length?c.a.createElement("div",{className:"empty-project-wrapper"}," ",c.a.createElement(Ce,null)," ",c.a.createElement("p",{className:"empty-project-description"}," There are no papers here, you can add new ones by searching ")):o.map(function(e){return c.a.createElement("div",{key:e.id,className:"paper-card"},c.a.createElement(ce,{options:f,handler:E,target:e.id,data:e.data,cls:"card-options paper-card-options"}),c.a.createElement(i.b,{to:"#"},c.a.createElement("h3",null,e.data.title)),c.a.createElement("div",{className:"extra-info"},c.a.createElement("p",{className:"authors"},e.data.authors),c.a.createElement("p",{className:"eid"},e.data.eid||e.data.doi),c.a.createElement("p",{className:"date"},e.data.year)),c.a.createElement(Se.a,{text:e.data.abstract,lines:4,ellipsis:"...",className:"paragraph",moreText:"more",lessText:"less"}))})},Ie=Object(u.e)(function(e){var t=e.papersList,a=e.handlePaperSelection,r=e.selectedEidList,n=e.history,s=e.match,o=e.setSimilarPaperData,u=["search similar"],p=Object(l.useContext)(L);function h(e,t,a){return f.apply(this,arguments)}function f(){return(f=Object(d.a)(m.a.mark(function e(t,a,r){var l,c,i;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("delete"!==a){e.next=8;break}return console.log("deleting "+t),e.next=4,xe.deletePaper(t);case 4:(l=e.sent).message?p.setError(l):null!==l&&p.setNotificationMessage("Successfully deleted!"),e.next=9;break;case 8:"search similar"===a&&(console.log("here you want to search for a similar paper"),console.log(r),c="/"===s.path[s.path.length-1]?s.path.substring(0,s.path.length-1):s.path,i=c,"h"===c[c.length-1]?(i=c+"similar",window.localStorage.setItem("similarPaperData",JSON.stringify(r)),n.push(i)):o(r));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}return t.map(function(e,t){return c.a.createElement("div",{key:t,className:"paper-card"},c.a.createElement(je,{name:e.title,label:"",val:e.eid,isChecked:r.includes(e.eid),handler:a}),c.a.createElement(ce,{options:u,handler:h,target:e.id,data:e,cls:"card-options paper-card-options"}),c.a.createElement(i.b,{to:"#"},c.a.createElement("h3",null,e.title)),c.a.createElement("div",{className:"extra-info"},c.a.createElement("p",{className:"authors"},e.authors),c.a.createElement("p",{className:"eid"},e.eid),c.a.createElement("p",{className:"date"},e.year)),c.a.createElement(Se.a,{text:e.abstract,lines:4,ellipsis:"...",className:"paragraph",moreText:"more",lessText:"less"}))})}),Be=function(e){var t="",a="";return e.focused?(t="90,295.5 500,704.5 910,295.5 ",a="90,704.5 500,295.5 910,704.5 "):(t="90,704.5 500,295.5 910,704.5 ",a="90,295.5 500,704.5 910,295.5 "),c.a.createElement("svg",{version:"1.1",id:"arrow-select",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("polyline",{className:"st-arrow-select",points:t},c.a.createElement("animate",{attributeType:"XML",id:"ani-select-arrow",attributeName:"points",from:t,to:a,begin:"0s",dur:"0.2s",repeatCount:"1",fill:"freeze"})))},_e=function(e){var t=e.options,a=e.selected,r=e.handler,n=Object(l.useState)(!1),s=Object(h.a)(n,2),o=s[0],i=s[1];function u(e){document.getElementById("ani-select-arrow").beginElement(),i(!o)}return c.a.createElement("div",{className:"custom-select"},c.a.createElement("div",{className:"selected",tabIndex:-2,onBlur:u,onFocus:u},t[a].label," ",c.a.createElement("div",{className:"arrow"},c.a.createElement(Be,{focused:o}))),c.a.createElement("div",{className:"options-holder",style:{fontSize:o?"15px":"0px",borderBottom:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderLeft:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderRight:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderTop:"none"}},t.map(function(e,t){return c.a.createElement("div",{key:t,"data-value":t,className:"option",style:{padding:o?"2px":"0px"},onMouseDown:r},e.label)})))},Te=function(e){return c.a.createElement("svg",{id:"search-icon",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("path",{className:"st0",d:"M626.9,644.3c-73.5,0-142.6-28.6-194.6-80.6s-80.6-121.1-80.6-194.6s28.6-142.6,80.6-194.6 c52-52,121.1-80.6,194.6-80.6c73.5,0,142.6,28.6,194.6,80.6c52,52,80.6,121.1,80.6,194.6s-28.6,142.6-80.6,194.6 S700.4,644.3,626.9,644.3z"}),c.a.createElement("line",{className:"st1",x1:"145.2",y1:"850.8",x2:"431.7",y2:"564.3"}))},Le=function(e){return c.a.createElement("svg",{id:"similar-paper-search-icon",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("polyline",{className:"st0-sps",points:"795.8,214 734.8,214 736.8,146 \t\t"}),c.a.createElement("polyline",{className:"st0-sps",points:"842.8,214 842.8,875.8 262.8,875.8 262.8,106 734.8,106 \t\t"}),c.a.createElement("line",{className:"st0-sps",x1:"842.8",y1:"214",x2:"734.8",y2:"106"}),c.a.createElement("line",{className:"st1-sps",x1:"350.8",y1:"198.9",x2:"644.8",y2:"198.9"}),c.a.createElement("line",{className:"st2-sps",x1:"346.8",y1:"385.4",x2:"752.8",y2:"385.4"}),c.a.createElement("line",{className:"st2-sps",x1:"544",y1:"485.9",x2:"752.8",y2:"485.9"}),c.a.createElement("line",{className:"st3-sps",x1:"346.8",y1:"485.9",x2:"544",y2:"485.9"}),c.a.createElement("line",{className:"st2-sps",x1:"575.9",y1:"586.4",x2:"752.8",y2:"586.4"}),c.a.createElement("line",{className:"st3-sps",x1:"346.8",y1:"586.4",x2:"575.9",y2:"586.4"}),c.a.createElement("line",{className:"st2-sps",x1:"555.5",y1:"686.9",x2:"752.8",y2:"686.9"}),c.a.createElement("line",{className:"st3-sps",x1:"346.8",y1:"686.9",x2:"555.5",y2:"686.9"}),c.a.createElement("circle",{className:"st4-sps",cx:"410.8",cy:"594.3",r:"171.7"}),c.a.createElement("line",{className:"st4-sps",x1:"111.2",y1:"894",x2:"289.4",y2:"715.7"}))},Fe=function(e){var t=e.display,a=e.up,r="",n="",s="";"ASC"===a?(n="371.7,293 500,165 628.3,293 ",s="371.7,491.9 500,619.9 628.3,491.9 "):(n="371.7,491.9 500,619.9 628.3,491.9 ",s="371.7,293 500,165 628.3,293 ");var o=Object(l.useState)(s),i=Object(h.a)(o,2),u=i[0],p=i[1];return Object(l.useEffect)(function(){p(s)},[s]),t&&(r=c.a.createElement("svg",{version:"1.1",id:"order-arrow",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("polyline",{className:"st-order-arrow-head",points:"371.7,293 500,165 628.3,293 ",transform:"matrix(1.5303008,0,0,1.5303008,-279.47582,-105.57059)"},c.a.createElement("animate",{attributeType:"XML",id:"ani-order-arrow",attributeName:"points",from:n,to:u,begin:"0s",dur:"0.2s",repeatCount:"1",fill:"freeze"})),c.a.createElement("line",{className:"st-order-arrow",x1:"485.67453",y1:"145.09268",x2:"485.67453",y2:"827.75989"}))),r},Me=function(e){return c.a.createElement("svg",{id:"remove-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("line",{className:"rb",x1:"134",y1:"866",x2:"866",y2:"134"}),c.a.createElement("line",{className:"rb",x1:"134",y1:"134",x2:"866",y2:"866"}))},Ae=function(e){return c.a.createElement("svg",{version:"1.1",id:"no-results",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("circle",{className:"st0-no-results",cx:"585.3",cy:"419.7",r:"271.7"}),c.a.createElement("line",{className:"st3-no-results",x1:"111.2",y1:"894",x2:"393.2",y2:"611.8"}),c.a.createElement("path",{className:"st1-no-results",d:"M460.6,533c83.1-20,166.2-20,249.4,0"}),c.a.createElement("line",{className:"st2-no-results",x1:"683.8",y1:"329",x2:"683.8",y2:"337"}),c.a.createElement("line",{className:"st2-no-results",x1:"512.8",y1:"329",x2:"512.8",y2:"337"}))},De=a(116),Xe=[{label:"Title",value:"title"},{label:"Date",value:"date"}],qe=[{label:"all",value:"all"},{label:"author",value:"author"},{label:"content",value:"content"},{label:"adv. query",value:"advanced"}],Re=(new Date).getFullYear()+2,Ue=["all"].concat(Object(ue.a)(De.range(2017,Re).map(String))),ze=function(e){var t=e.selectedPapersList,a=e.handlePaperSelection;return c.a.createElement("div",{className:"selected-papers-list",style:{opacity:t.length>0?"1.0":"0.0",pointerEvents:t.length>0?"auto":"none"}},c.a.createElement("h3",null,"SELECTED PAPERS"," ",c.a.createElement("br",null),c.a.createElement("span",null,"(total : ",t.length,")")),c.a.createElement("div",{className:"submission-wrapper"},c.a.createElement("div",{className:"papers-wrapper",style:{border:t.length>0?"":"0px"}},c.a.createElement("div",{className:"papers-flex",style:{padding:t.length>0?"":"0px"}},t.map(function(e,t){return c.a.createElement("p",{key:t},c.a.createElement("span",null,e.title),c.a.createElement("button",{type:"button",className:"remove-btn",name:e.title,value:e.eid,onClick:function(t){a({target:{name:e.title,value:e.eid}})}},c.a.createElement(Me,null)))}))),c.a.createElement("button",{style:{border:t.length>0?"":"0px",margin:t.length>0?"":"0px",height:t.length>0?"":"0px",pointerEvents:t.length>0?"auto":"none"},className:"ti-btn add-resultpaper-btn",type:"submit",value:"Submit"},c.a.createElement("div",{className:"btn-title"},"Add Selected Paper"),c.a.createElement("div",{className:"btn-icon"}))))};var He=function(e){var t,a=e.project_id,r=e.location,n=e.match,s=e.history,o=Object(l.useState)([]),u=Object(h.a)(o,2),p=u[0],f=u[1],E=Object(l.useState)(!0),b=Object(h.a)(E,2),v=b[0],g=b[1],y=Object(l.useState)(0),x=Object(h.a)(y,2),w=x[0],j=x[1],N=Object(l.useContext)(L),O=function(e){var t,a=X.a.parse(e),r=a.query||"",n=a.searchBy||"all",l=a.orderBy||"title",c=a.sort||"ASC",s=a.start||0,o=a.count||10;t=void 0===a.scopus||"true"===a.scopus;var i="true"===a.googleScholar&&!t,u="true"===a.arXiv&&!t&&!i;t||i||u||(t=!0);var p=a.year||"all";return{query:r,searchBy:n,orderBy:l,sort:c,scopus:t,googleScholar:i,arXiv:u,year:p,start:s,count:o}}(r.search),k=window.localStorage;window.localStorage||console.log("the browser must be support localStorage"),t=k.getItem("selectedPapersList")?JSON.parse(k.getItem("selectedPapersList")):[];var S=Object(l.useState)(t),C=Object(h.a)(S,2),P=C[0],I=C[1],B=Object(l.useState)("_"),_=Object(h.a)(B,2),T=_[0],F=_[1],M=Object(l.useState)({scopus:!0,googleScholar:!1,arXiv:!1}),D=Object(h.a)(M,2),q=D[0],R=D[1],U=Object(l.useState)("all"),z=Object(h.a)(U,2),H=z[0],J=z[1],V=Object(l.useState)("all"),G=Object(h.a)(V,2),Y=G[0],K=G[1],$=Object(l.useState)(O.sort),Z=Object(h.a)($,2),te=Z[0],ne=Z[1];function le(e){var t=parseInt(e.target.getAttribute("data-value"));O.orderBy=Xe[t].value;var a=ae(O);s.push(a)}function ce(e){"ASC"===O.sort?O.sort="DESC":O.sort="ASC";var t=ae(O);s.push(t)}function se(e){var t,a=e.target.value,r=e.target.name;-1===re(P,"eid",a)?(t=Object(ue.a)(P)).push({eid:a,title:r}):t=P.filter(function(e){return e.eid!==a}),I(t),k.setItem("selectedPapersList",JSON.stringify(t))}function oe(e){var t;if(ee(P,p,"eid")){var a=p.map(function(e){return{eid:e.eid,title:e.title}});t=P.filter(function(e){return!a.some(function(t){return t.eid===e.eid})})}else{var r=p.map(function(e){return{eid:e.eid,title:e.title}}),n=[].concat(Object(ue.a)(r),Object(ue.a)(P));t=De.uniqBy(n,"eid")}I(t),k.setItem("selectedPapersList",JSON.stringify(t))}function ie(){return(ie=Object(d.a)(m.a.mark(function e(t){var r,n,l;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==P.length){e.next=5;break}N.setNotificationMessage("The list is empty!"),e.next=16;break;case 5:return r=P,I([]),k.removeItem("selectedPapersList"),n=r.map(function(e){return e.eid}),e.next=11,xe.postPaperIntoProject({arrayEid:n,project_id:a});case 11:if(!(l=e.sent)||!l.message){e.next=15;break}return N.setError(l),e.abrupt("return",null);case 15:N.setNotificationMessage("Insert completed");case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pe(){return(pe=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),""===T?N.setNotificationMessage("Search string is empty"):(O.query=T,O.scopus=q.scopus,O.googleScholar=q.googleScholar,O.arXiv=q.arXiv,O.searchBy=H,O.year=Y,a=ae(O),s.push(a));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(e){var t;switch(e.target.name){case"query":F(e.target.value);break;case"scopus":(t=Object(A.a)({},q)).scopus=!0,t.googleScholar=!1,t.arXiv=!1,R(t);break;case"googleScholar":(t=Object(A.a)({},q)).scopus=!1,t.googleScholar=!0,t.arXiv=!1,R(t);break;case"arXiv":(t=Object(A.a)({},q)).scopus=!1,t.googleScholar=!1,t.arXiv=!0,R(t);break;case"searchBy":J(e.target.value);break;case"year":K(e.target.value)}}Object(l.useEffect)(function(){var e=!0;return te!==O.sort&&(ne(O.sort),document.getElementById("ani-order-arrow")&&document.getElementById("ani-order-arrow").beginElement()),function(){var t=Object(d.a)(m.a.mark(function t(){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(F(O.query),R({scopus:O.scopus,googleScholar:O.googleScholar,arXiv:O.arXiv}),J(O.searchBy),K(O.year),""===O.query){t.next=10;break}return g(!1),t.next=8,he.search(O);case 8:a=t.sent,e&&a&&"Not Found"===a.message?(f([]),j(0),g(!0)):e&&a&&a.message?N.setError(a):e&&a&&(f(a.results),j(a.totalResults),g(!0));case 10:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[a,O.query,O.orderBy,O.searchBy,O.sort,O.year,O.start,O.count,O.scopus,O.googleScholar,O.arXiv]);var de=c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{className:""===O.query?"search-form":"search-form small",onSubmit:function(e){return pe.apply(this,arguments)}},c.a.createElement("div",{style:{position:"relative"}},c.a.createElement("input",{type:"text",placeholder:"search",name:"query",value:T,onChange:me}),c.a.createElement("button",{className:"go-search",type:"submit",value:"Submit"},c.a.createElement(Te,null)),c.a.createElement(i.b,{to:"/projects/"+a+"/searchsimilar"},c.a.createElement("button",{className:"go-similar",type:"button"},c.a.createElement(Le,null)))),c.a.createElement("div",{className:"option-holder"},c.a.createElement("label",null,"Source:"),c.a.createElement("br",null),c.a.createElement("div",{className:"checkboxes-holder"},c.a.createElement(Oe,{label:"Scopus",name:"scopus",val:"",isChecked:q.scopus,handler:me}),c.a.createElement(Oe,{label:"Google Scholar",name:"googleScholar",val:"",isChecked:q.googleScholar,handler:me}),c.a.createElement(Oe,{label:"arXiv",name:"arXiv",val:"",isChecked:q.arXiv,handler:me})),c.a.createElement("label",null,"Search by:"),c.a.createElement("br",null),c.a.createElement("div",{className:"checkboxes-holder"},c.a.createElement(Oe,{label:qe[0].label,name:"searchBy",val:qe[0].value,isChecked:H===qe[0].value,handler:me}),c.a.createElement(Oe,{label:qe[1].label,name:"searchBy",val:qe[1].value,isChecked:H===qe[1].value,handler:me}),c.a.createElement(Oe,{label:qe[2].label,name:"searchBy",val:qe[2].value,isChecked:H===qe[2].value,handler:me}),c.a.createElement(Oe,{label:qe[3].label,name:"searchBy",val:qe[3].value,isChecked:H===qe[3].value,handler:me})),c.a.createElement("label",null,"Year:"),c.a.createElement("br",null),c.a.createElement("div",{className:"checkboxes-holder"},Ue.map(function(e,t){return c.a.createElement(Oe,{key:t,label:e,name:"year",val:e,isChecked:Y===e,handler:me})}))))),fe="";if(!1===v)fe=c.a.createElement("div",{className:"paper-card-holder"},c.a.createElement("div",{className:"paper-card-holder-head",style:{pointerEvents:"none"}},c.a.createElement("div",{className:"select-all"},c.a.createElement(je,{label:"Select All",name:"select_all",val:"",isChecked:!1,handler:oe})),c.a.createElement("div",{className:"order"},c.a.createElement("label",null,"sort by:"),c.a.createElement(_e,{options:Xe,selected:re(Xe,"value",O.orderBy),handler:le}),c.a.createElement("button",{type:"button",onClick:ce},c.a.createElement(Fe,{display:!0,up:O.sort})))),c.a.createElement(ze,{selectedPapersList:P}),c.a.createElement("div",{className:"search-loading-holder"},c.a.createElement(W,{class:"small"})));else if(0===p.length&&""!==O.query)fe=c.a.createElement("div",{className:"no-results"}," ",c.a.createElement(Ae,null)," ",c.a.createElement("p",{className:"not-found-description"}," Nothing was found ")," ");else if(p.length>0&&""!==O.query){var Ee=P.map(function(e){return e.eid});fe=c.a.createElement("div",{className:"paper-card-holder"},c.a.createElement("div",{className:"paper-card-holder-head"},c.a.createElement("div",{className:"select-all"},c.a.createElement(je,{label:"Select All",name:"select_all",val:"",isChecked:ee(P,p,"eid"),handler:oe})),c.a.createElement("div",{className:"order"},c.a.createElement("label",null,"sort by:"),c.a.createElement(_e,{options:Xe,selected:re(Xe,"value",O.orderBy),handler:le}),c.a.createElement("button",{type:"button",onClick:ce},c.a.createElement(Fe,{display:!0,up:O.sort})))),c.a.createElement(ze,{selectedPapersList:P,handlePaperSelection:se}),c.a.createElement(Ie,{papersList:p,handlePaperSelection:se,selectedEidList:Ee}),c.a.createElement(Q,{start:O.start,count:O.count,totalResults:w,path:n.url}))}return c.a.createElement(c.a.Fragment,null,de,c.a.createElement("form",{className:"search-results",onSubmit:function(e){return ie.apply(this,arguments)}},fe))};function Je(){return(Je=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.home+f.pdf_parse_server,e.next=3,C.postFile(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ve={updatePdf:function(e){return Je.apply(this,arguments)},abortRequest:C.abortRequest},Ge=function(e){return c.a.createElement("svg",{id:"go-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("polyline",{className:"st1-go",points:"371.7,481.9 500,609.9 628.3,481.9 ",transform:"matrix(0,-1.4834458,1.4856134,0,-92.453824,1228.1491)"}),c.a.createElement("line",{className:"st0-go",x1:"810.69312",y1:"486.42624",x2:"206.34099",y2:"486.42624"}))},Ye=function(e){e.close;var t=e.style,a=e.project_id,r=e.input,n=e.handler,s=e.paperInfo,o=e.fetching,u=e.setPaperInfo,p=e.setPaperFile,h=e.history,f="",E="",b=Object(l.useRef)(null);function v(){return(v=Object(d.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b.current.files[0]&&p(b.current.files[0]);case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return f=o?c.a.createElement("div",{className:"load-icon-similar-paper"},c.a.createElement(W,null)):s&&s.title?c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",{className:"similar-paper-title"},s.title),c.a.createElement(Se.a,{text:s.abstract,lines:4,ellipsis:"...",className:"similar-paper-paragraph",moreText:"more",lessText:"less"})):c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:"similar-description"},"Search for Similar Papers"),c.a.createElement("div",{className:"DOI-holder"},c.a.createElement("input",{type:"text",placeholder:"type DOI, EID, or paper title",value:r,onChange:n,name:"query"}),c.a.createElement("button",{className:"go-search-similar DOI-btn",type:"submit",value:"Submit"},c.a.createElement(Ge,null))),c.a.createElement("p",{className:"or"},"or"),c.a.createElement("div",{className:"file-input-container"},c.a.createElement("input",{type:"file",id:"real-input",ref:b,onChange:function(){return v.apply(this,arguments)}}),c.a.createElement("button",{type:"button",className:"browse-btn",onClick:function(){b.current.click()}},"Upload a Paper"))),E=s?c.a.createElement("button",{type:"button",className:"close-btn red-x",onClick:function(e){u(void 0),p(void 0),h.push({})}},c.a.createElement($,null)):c.a.createElement(i.b,{to:"/projects/"+a+"/search"},c.a.createElement("button",{type:"button",className:"close-btn"},c.a.createElement($,null))),c.a.createElement("div",{style:Object(A.a)({},t),className:"light-modal similar-search-paper-upload"},E,f)},We=a(116),Ke=[{label:"Title",value:"title"},{label:"Date",value:"date"}],$e=(new Date).getFullYear()+2,Ze=["all"].concat(Object(ue.a)(We.range(2017,$e).map(String))),Qe=function(e){var t=e.selectedPapersList,a=e.handlePaperSelection;return c.a.createElement("div",{className:"selected-papers-list",style:{opacity:t.length>0?"1.0":"0.0",pointerEvents:t.length>0?"auto":"none"}},c.a.createElement("h3",null,"SELECTED PAPERS"," ",c.a.createElement("br",null),c.a.createElement("span",null,"(total : ",t.length,")")),c.a.createElement("div",{className:"submission-wrapper"},c.a.createElement("div",{className:"papers-wrapper",style:{border:t.length>0?"":"0px"}},c.a.createElement("div",{className:"papers-flex",style:{padding:t.length>0?"":"0px"}},t.map(function(e,t){return c.a.createElement("p",{key:t},c.a.createElement("span",null,e.title),c.a.createElement("button",{type:"button",className:"remove-btn",name:e.title,value:e.eid,onClick:function(t){a({target:{name:e.title,value:e.eid}})}},c.a.createElement(Me,null)))}))),c.a.createElement("button",{style:{border:t.length>0?"":"0px",margin:t.length>0?"":"0px",height:t.length>0?"":"0px",pointerEvents:t.length>0?"auto":"none"},className:"ti-btn add-resultpaper-btn",type:"submit",value:"Submit"},c.a.createElement("div",{className:"btn-title"},"Add Selected Paper"),c.a.createElement("div",{className:"btn-icon"}," "))))};var et=function(e){var t=e.project_id,a=e.location,r=e.match,n=e.history;window.onbeforeunload=function(e){window.localStorage.removeItem("similarPaperData")};var s,o,i=Object(l.useState)([]),u=Object(h.a)(i,2),p=u[0],f=u[1],E=Object(l.useState)(!0),b=Object(h.a)(E,2),v=b[0],g=b[1],y=Object(l.useState)(0),x=Object(h.a)(y,2),w=x[0],j=x[1],N=Object(l.useContext)(L),O=function(e){var t,a=X.a.parse(e),r=a.query||"",n=a.orderBy||"title",l=a.sort||"ASC",c=a.start||0,s=a.count||10;t=void 0===a.scopus||"true"===a.scopus;var o="true"===a.googleScholar&&!t,i="true"===a.arXiv&&!t&&!o;t||o||i||(t=!0);var u=a.year||"all";return{query:r,orderBy:n,sort:l,scopus:t,googleScholar:o,arXiv:i,year:u,start:c,count:s}}(a.search),k=window.localStorage;window.localStorage||console.log("the browser must be support localStorage"),s=k.getItem("selectedPapersList")?JSON.parse(k.getItem("selectedPapersList")):[],o=k.getItem("similarPaperData")?JSON.parse(k.getItem("similarPaperData")):null;var S=Object(l.useState)(s),C=Object(h.a)(S,2),P=C[0],I=C[1],B=Object(l.useState)(""),_=Object(h.a)(B,2),T=_[0],F=_[1],M=Object(l.useState)({scopus:!0,googleScholar:!1,arXiv:!1}),D=Object(h.a)(M,2),q=D[0],R=D[1],U=Object(l.useState)("all"),z=Object(h.a)(U,2),H=z[0],J=z[1],V=Object(l.useState)(o),G=Object(h.a)(V,2),Y=G[0],K=G[1],$=Object(l.useState)(void 0),Z=Object(h.a)($,2),te=Z[0],ne=Z[1],le=Object(l.useState)(O.sort),ce=Object(h.a)(le,2),se=ce[0],oe=ce[1],ie=Object(l.useState)(!1),pe=Object(h.a)(ie,2),me=pe[0],de=pe[1],fe=Object(l.useState)(!1),Ee=Object(h.a)(fe,2),be=Ee[0],ve=Ee[1];function ge(e){var t;switch(e.target.name){case"query":F(e.target.value);break;case"scopus":(t=Object(A.a)({},q)).scopus=!0,t.googleScholar=!1,t.arXiv=!1,R(t);break;case"googleScholar":(t=Object(A.a)({},q)).scopus=!1,t.googleScholar=!0,t.arXiv=!1,R(t);break;case"arXiv":(t=Object(A.a)({},q)).scopus=!1,t.googleScholar=!1,t.arXiv=!0,R(t);break;case"year":J(e.target.value)}}Object(l.useEffect)(function(){var e=!0;return console.log("RUNNING THE BIG EFFECT"),console.log(O),se!==O.sort&&(oe(O.sort),document.getElementById("ani-order-arrow")&&document.getElementById("ani-order-arrow").beginElement()),function(){var t=Object(d.a)(m.a.mark(function t(){var a,r,n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(F(O.query),R({scopus:O.scopus,googleScholar:O.googleScholar,arXiv:O.arXiv}),J(O.year),!te){t.next=22;break}if(console.log("FILE NAME : "+te.name),f([]),j(0),/\.(pdf|PDF)$/.test(te.name)&&-1!==te.type.indexOf("application/pdf")){t.next=11;break}N.setNotificationMessage("The file must be a pdf!"),t.next=20;break;case 11:return ve(!0),console.log("FETCHING PARSE PDF"),(a=new FormData).append("file",te),console.log("CALLING THE PAPER PARSER SERVICE"),t.next=18,Ve.updatePdf(a);case 18:r=t.sent,e&&r&&r.message?(N.setNotificationMessage("Error during parsing file"),g(!0),ve(!1)):e&&(console.log(r),K(r),ve(!1));case 20:t.next=34;break;case 22:if(""===O.query){t.next=33;break}return f([]),j(0),ve(!0),t.next=28,he.search({query:O.query,scopus:!0});case 28:n=t.sent,console.log(n),e&&n&&n.message?N.setError(n):e&&(console.log(n),K(n.results[0]),ve(!1)),t.next=34;break;case 33:console.log("no file (& no similarPaperString)");case 34:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){console.log("unmounting searchSimilar component"),localStorage.removeItem("similarPaperData"),e=!1}},[t,te,O.query]),Object(l.useEffect)(function(){var e=!0;return console.log("RUNNING THE SMALL EFFECT"),Y?function(){var t=Object(d.a)(m.a.mark(function t(){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return g(!1),k.setItem("similarPaperData",JSON.stringify(Y)),t.next=4,he.searchSimilar({paperData:Y,start:O.start,count:O.count,scopus:!0});case 4:a=t.sent,console.log(a),e&&a&&"Not Found"===a.message?(f([]),j(0),g(!0)):e&&a&&a.message?N.setError(a):e&&null!==a&&(f(a.results),j(a.totalResults),g(!0));case 7:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()():k.removeItem("similarPaperData"),function(){e=!1}},[Y,O.orderBy,O.sort,O.year,O.start,O.count,O.scopus,O.googleScholar,O.arXiv]);var ye=c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{className:""!==O.query||te||Y?"search-form small":"search-form",style:{marginTop:me?"30px":"60px"},onSubmit:function(e){if(console.log("SUBMITTING SEARCH"),e&&e.preventDefault(),console.log("similarity search was called"),""!==T||te){te?(console.log("there's a file"),O.query=""):(console.log("there isn't a file"),O.query=T),O.scopus=q.scopus,O.googleScholar=q.googleScholar,O.arXiv=q.arXiv,O.year=H;var t=ae(O);n.push(t)}else N.setNotificationMessage("Similar paper string is empty")}},c.a.createElement(Ye,{style:{boxShadow:"0px 0px 3px -1px rgba(0, 0, 0, 0.25)"},project_id:t,close:de,handler:ge,input:T,paperInfo:Y,fetching:be,setPaperInfo:K,setPaperFile:ne,history:n}),c.a.createElement("div",{className:"option-holder"},c.a.createElement("label",null,"Year:"),c.a.createElement("br",null),c.a.createElement("div",{className:"checkboxes-holder"},Ze.map(function(e,t){return c.a.createElement(Oe,{key:t,label:e,name:"year",val:e,isChecked:H===e,handler:ge})}))))),we="";function Ne(e){var t=parseInt(e.target.getAttribute("data-value"));O.orderBy=Ke[t].value;var a=ae(O);n.push(a)}function ke(e){"ASC"===O.sort?O.sort="DESC":O.sort="ASC";var t=ae(O);n.push(t)}function Se(e){var t,a=e.target.value,r=e.target.name;-1===re(P,"eid",a)?(t=Object(ue.a)(P)).push({eid:a,title:r}):t=P.filter(function(e){return e.eid!==a}),I(t),k.setItem("selectedPapersList",JSON.stringify(t))}function Ce(e){var t;if(ee(P,p,"eid")){var a=p.map(function(e){return{eid:e.eid,title:e.title}});t=P.filter(function(e){return!a.some(function(t){return t.eid===e.eid})})}else{var r=p.map(function(e){return{eid:e.eid,title:e.title}}),n=[].concat(Object(ue.a)(r),Object(ue.a)(P));t=We.uniqBy(n,"eid")}I(t),k.setItem("selectedPapersList",JSON.stringify(t))}function Pe(){return(Pe=Object(d.a)(m.a.mark(function e(a){var r,n,l;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),r=P,I([]),k.removeItem("selectedPapersList"),n=r.map(function(e){return e.eid}),e.next=7,xe.postPaperIntoProject({arrayEid:n,project_id:t});case 7:if(!(l=e.sent)||!l.message){e.next=11;break}return N.setError(l),e.abrupt("return",null);case 11:I([]),k.removeItem("selectedPapersList"),N.setNotificationMessage("Insert completed");case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}if(!1===v)we=c.a.createElement("div",{className:"paper-card-holder"},c.a.createElement("div",{className:"paper-card-holder-head",style:{pointerEvents:"none"}},c.a.createElement("div",{className:"select-all"},c.a.createElement(je,{label:"Select All",name:"select_all",val:"",isChecked:!1,handler:Ce})),c.a.createElement("div",{className:"order"},c.a.createElement("label",null,"sort by:"),c.a.createElement(_e,{options:Ke,selected:re(Ke,"value",O.orderBy),handler:Ne}),c.a.createElement("button",{type:"button",onClick:ke},c.a.createElement(Fe,{display:!0,up:O.sort})))),c.a.createElement(Qe,{selectedPapersList:P}),c.a.createElement("div",{className:"search-loading-holder"},c.a.createElement(W,{class:"small"})));else if(0!==p.length||""===O.query&&!te&&!Y||be){if(p.length>0&&(""!==O.query||te||Y)){var Be=P.map(function(e){return e.eid});we=c.a.createElement("div",{className:"paper-card-holder"},c.a.createElement("div",{className:"paper-card-holder-head"},c.a.createElement("div",{className:"select-all"},c.a.createElement(je,{label:"Select All",name:"select_all",val:"",isChecked:ee(P,p,"eid"),handler:Ce})),c.a.createElement("div",{className:"order"},c.a.createElement("label",null,"sort by:"),c.a.createElement(_e,{options:Ke,selected:re(Ke,"value",O.orderBy),handler:Ne}),c.a.createElement("button",{type:"button",onClick:ke},c.a.createElement(Fe,{display:!0,up:O.sort})))),c.a.createElement(Qe,{selectedPapersList:P,handlePaperSelection:Se}),c.a.createElement(Ie,{papersList:p,handlePaperSelection:Se,selectedEidList:Be,setSimilarPaperData:K}),c.a.createElement(Q,{start:O.start,count:O.count,totalResults:w,path:r.url}))}}else we=c.a.createElement("div",{className:"no-results"}," ",c.a.createElement(Ae,null)," ",c.a.createElement("p",{className:"not-found-description"}," Nothing was found ")," ");return c.a.createElement(c.a.Fragment,null,ye,c.a.createElement("form",{className:"search-results",onSubmit:function(e){return Pe.apply(this,arguments)}},we))},tt=[{value:"date_created",label:"Recently Added"},{value:"title",label:"Title"},{value:"authors",label:"Authors"}];var at=function(e){var t,a=e.project_id,r=e.location,n=e.match,s=e.history,o=Object(l.useState)([]),i=Object(h.a)(o,2),u=i[0],p=i[1],f=Object(l.useState)(0),E=Object(h.a)(f,2),b=E[0],v=E[1],g=Object(l.useState)(!1),y=Object(h.a)(g,2),x=y[0],w=y[1],j=Object(l.useContext)(L),N=function(e){var t=X.a.parse(e),a=t.count||10,r=t.start||0,n=t.orderBy||"date_created",l=t.sort||"ASC";return"date_created"===n&&(l="DESC"),{orderBy:n,sort:l,start:r,count:a}}(r.search),O=Object(l.useState)(N.sort),k=Object(h.a)(O,2),S=k[0],C=k[1];function P(e){var t=parseInt(e.target.getAttribute("data-value"));"date_created"===N.orderBy&&(N.sort="ASC"),N.orderBy=tt[t].value;var a=ae(N);s.push(a)}function I(e){"ASC"===N.sort?N.sort="DESC":N.sort="ASC";var t=ae(N);s.push(t)}return Object(l.useEffect)(function(){var e=!0;return"date_created"!==N.orderBy&&S!==N.sort&&(C(N.sort),document.getElementById("ani-order-arrow").beginElement()),function(){var t=Object(d.a)(m.a.mark(function t(){var r;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w(!1),t.next=3,xe.getPapersList(Object(A.a)({project_id:a},N));case 3:r=t.sent,e&&r&&"Not Found"===r.message?(p([]),v(0),w(!0)):e&&r&&r.message?j.setError(r):e&&r&&(p(r.results),v(r.totalResults),w(!0));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[N.start,N.count,N.sort,N.orderBy]),t=!1===x?c.a.createElement("div",{className:"paper-card-holder"},c.a.createElement("div",{className:"order",style:{pointerEvents:"none"}},c.a.createElement("label",null,"sort by:"),c.a.createElement(_e,{options:tt,selected:re(tt,"value",N.orderBy),handler:P}),c.a.createElement("button",{type:"button",onClick:I},c.a.createElement(Fe,{display:"date_created"!==N.orderBy,up:S}))),c.a.createElement(W,{class:"small"})):c.a.createElement("div",{className:"paper-card-holder"},c.a.createElement("div",{className:"order"},c.a.createElement("label",null,"sort by:"),c.a.createElement(_e,{options:tt,selected:re(tt,"value",N.orderBy),handler:P}),c.a.createElement("button",{type:"button",onClick:I},c.a.createElement(Fe,{display:"date_created"!==N.orderBy,up:S}))),c.a.createElement(Pe,{papersList:u,location:r,history:s}),c.a.createElement(Q,{start:N.start,count:N.count,totalResults:b,path:n.url})),t=c.a.createElement("div",{className:"papers-list"},t)},rt=function(e){var t=e.options,a=e.form,r=e.name,n=Object(l.useState)(!1),s=Object(h.a)(n,2),o=s[0],i=s[1],u=Object(l.useState)(0),p=Object(h.a)(u,2),m=p[0],d=p[1];function f(e){var t=parseInt(e.target.getAttribute("data-value"));d(t)}function E(e){document.getElementById("ani-select-arrow").beginElement(),i(!o)}return Object(l.useEffect)(function(){a.setFieldValue(r,t[m].value)},[m]),c.a.createElement("div",{className:"custom-select"},c.a.createElement("div",{className:"selected",tabIndex:-2,onBlur:E,onFocus:E},t[m].label," ",c.a.createElement("div",{className:"arrow"},c.a.createElement(Be,{focused:o}))),c.a.createElement("div",{className:"options-holder",style:{fontSize:o?"15px":"0px",borderBottom:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderLeft:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderRight:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderTop:"none"}},t.map(function(e,t){return c.a.createElement("div",{key:t,"data-value":t,className:"option",style:{padding:o?"2px":"0px"},onMouseDown:f},e.label)})))},nt=[{value:"article",label:"Article"},{value:"book_chapter",label:"Book Chapter"},{value:"conf_publication",label:"Conf. Publication"}];var lt=function(e){var t=a(75),r=(a(276),t.object().shape({title:t.string().required("please enter a title"),authors:t.string().required("please enter an author"),year:t.number().required("please enter a year").min(1e3).max((new Date).getFullYear()+1).integer(),abstract:t.string().required("please enter the abstract")})),n=Object(l.useContext)(L);return c.a.createElement(c.a.Fragment,null,c.a.createElement(K.c,{initialValues:{title:e.customPaper&&e.customPaper.title||"",authors:e.customPaper&&e.customPaper.authors||"",year:e.customPaper&&e.customPaper.year||"",abstract:e.customPaper&&e.customPaper.abstract||"",document_type:e.customPaper&&e.customPaper.document_type||"",doi:e.customPaper&&e.customPaper.doi||""},validationSchema:r,onSubmit:function(){var t=Object(d.a)(m.a.mark(function t(a,r){var l,c,s;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return l=r.setSubmitting,void 0===a.doi&&(a.doi=""),c=Object(A.a)({},a,{year:a.year.toString(),source_title:a.title,link:"custom_paper",source:"slr_custom_papers",abstract_structured:"0",filter_oa_include:"0",filter_study_include:"0",notes:"",manual:"true"}),console.log(c),t.next=6,xe.postCustomPaperIntoProject({paper:c,project_id:e.projectId});case 6:(s=t.sent)&&s.message?n.setError(s):e.history.push(e.url),l(!1);case 9:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),validateOnBlur:!1},function(e){var t=e.errors,a=e.touched,r=e.isSubmitting;return c.a.createElement(K.b,{className:"new-paper-form"},c.a.createElement(K.a,{style:{borderBottom:t.title&&a.title?"1px solid #d81e1e":""},id:"title",name:"title",type:"text",placeholder:"Paper Title"}),c.a.createElement("div",{className:"new-paper-form-ad"},c.a.createElement("div",{className:"author-year"},c.a.createElement(K.a,{style:{borderBottom:t.authors&&a.authors?"1px solid #d81e1e":""},name:"authors",type:"text",placeholder:"paper author"}),c.a.createElement(K.a,{style:{borderBottom:t.year&&a.year?"1px solid #d81e1e":""},name:"year",type:"number",placeholder:"year"})),c.a.createElement("div",{className:"type-doi"},c.a.createElement(K.a,{name:"document_type",render:function(e){var t=e.field,a=e.form;return c.a.createElement(rt,Object.assign({options:nt},t,{form:a}))}}),c.a.createElement(K.a,{name:"doi",type:"text",placeholder:"DOI(optional)"}))),c.a.createElement(K.a,{style:{borderBottom:t.abstract&&a.abstract?"1px solid #d81e1e":""},name:"abstract",placeholder:"Paper Abstract",component:"textarea"}),c.a.createElement("button",{type:"submit",disabled:r||t.title&&a.title||t.authors&&a.authors||t.year&&a.year||t.abstract&&a.abstract},"Add paper"))}))};var ct=function(e){var t=e.projectId,a=e.url,r=e.history,n=Object(l.useState)(!1),s=Object(h.a)(n,2),o=s[0],i=s[1],u=Object(l.useState)(void 0),p=Object(h.a)(u,2),f=p[0],E=p[1],b=Object(l.useState)(!1),v=Object(h.a)(b,2),g=v[0],y=v[1],x=Object(l.useRef)(null),w=Object(l.useContext)(L);function j(){return(j=Object(d.a)(m.a.mark(function e(){var t,a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=x.current.files[0])){e.next=14;break}if(/\.(pdf|PDF)$/.test(t.name)&&-1!==t.type.indexOf("application/pdf")){e.next=6;break}w.setNotificationMessage("The file must be a pdf!"),e.next=14;break;case 6:return i(!0),(a=new FormData).append("file",t),e.next=11,Ve.updatePdf(a);case 11:(r=e.sent)&&r.message?w.setNotificationMessage("Error during parsing file"):(E(r),y(!0)),i(!1);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}return g||o?o?c.a.createElement("div",{className:"new-paper-page-wrapper"},c.a.createElement("div",{className:"file-input-container"},c.a.createElement("input",{type:"file",id:"real-input"}),c.a.createElement("button",{type:"button",className:"browse-btn"},c.a.createElement(W,null))),"or",c.a.createElement("br",null),c.a.createElement("button",{type:"button",onClick:function(){i(!1),y(!0)}},"abort and insert data manually")):c.a.createElement(lt,{projectId:t,url:a,history:r,customPaper:f}):c.a.createElement("div",{className:"new-paper-page-wrapper"},c.a.createElement("div",null,c.a.createElement("div",{className:"file-input-container"},c.a.createElement("input",{type:"file",name:"file",id:"real-input",ref:x,onChange:function(){return j.apply(this,arguments)}}),c.a.createElement("button",{type:"button",className:"browse-btn",onClick:function(){x.current.click()}},"Upload a Paper")),"or",c.a.createElement("br",null),c.a.createElement("button",{type:"button",onClick:function(){y(!0)}},"insert data manually")))},st=function(e){var t=e.confirm;c.a.createElement(c.a.Fragment,null);return t?c.a.createElement("svg",{version:"1.1",id:"confirm-edit-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("polyline",{className:"st-confirm",points:"918,192.3 389.3,807.7 82,450 "})):c.a.createElement("svg",{version:"1.1",id:"edit-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("path",{className:"st-pencil",d:"M224,632.3l-81.6,225.3L367.7,776l0,0L833,310.7c39.4-39.4,39.9-103.3,0.7-142.9c-0.5-0.5-1-1-1.4-1.4 c-39.6-39.2-103.6-38.7-142.9,0.7L224,632.3L224,632.3z"}),c.a.createElement("path",{className:"st-pencil-border",d:"M367.7,776c-24-71.7-71.9-119.6-143.7-143.7"}),c.a.createElement("path",{className:"st-pencil",d:"M805.7,338c-24-71.7-71.9-119.6-143.7-143.7"}))},ot=function(e){var t=e.project_id,a=e.description,r=e.update,n=e.date_last_modified,s=e.date_created,o=e.collaborators,i=e.setCollaborators,u=Object(l.useState)(!1),p=Object(h.a)(u,2),f=p[0],E=p[1],b=Object(l.useState)(""),v=Object(h.a)(b,2),g=v[0],y=v[1],x=Object(l.useState)(!0),w=Object(h.a)(x,2),j=w[0],N=w[1],O=Object(l.useContext)(L),k=(c.a.createElement(c.a.Fragment,null),!0);function S(e){return c.a.createElement("span",{className:"date"},e.slice(0,10)," at ",e.slice(11,19))}function C(){return(C=Object(d.a)(m.a.mark(function e(a){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("removing "+a+" from "+t),function(){var e=Object(d.a)(m.a.mark(function e(){var r,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.removeProjectCollaborator(t,a);case 2:r=e.sent,k&&r&&r.message?O.setError(r):k&&(n=o.filter(function(e){return e.id!==a}),console.log(n),i(n));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()();case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(){return(P=Object(d.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o.includes(g)||(console.log("adding "+g),function(){var e=Object(d.a)(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.addProjectCollaborator(t,{email:g});case 2:a=e.sent,k&&a&&a.message?O.setError(a):k&&a&&(y(""),i([].concat(Object(ue.a)(o),[a])));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()());case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(l.useEffect)(function(){return function(){var e=Object(d.a)(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.getProjectCollaborators(t);case 2:a=e.sent,k&&a&&a.message?O.setError(a):k&&a&&(i(a),N(!1));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),function(){k=!1}},[]),j?c.a.createElement("div",{className:"project-description hidden-form-description"},c.a.createElement("h2",null,"Description:"),c.a.createElement(W,null)):c.a.createElement("div",{className:f?"project-description":"project-description hidden-form-description"},c.a.createElement("h2",null,"Description:"),c.a.createElement("p",{style:{fontSize:f?"0px":"15px"}}," ",a),c.a.createElement("form",{className:"edit-project-description",style:{height:f?"":"0px"}},c.a.createElement("textarea",{id:"edit-project-description-input",defaultValue:a,style:{width:f?"100%":"0%",padding:f?"":"0px",height:f?"":"0px"},onBlur:function(e){console.log("blurring"),E(!1)}}),c.a.createElement("button",{className:"edit-button",onMouseDown:function(e){console.log("CLICK"),f?r():(setTimeout(function(){document.getElementById("edit-project-description-input").focus()},100),E(!0),console.log(f))},type:"button"},c.a.createElement(st,{confirm:f}))),c.a.createElement("h2",null,"Additional info:"),c.a.createElement("p",{className:"project-date-info"}," ",c.a.createElement("span",null,"Created")," ",S(s)," "),c.a.createElement("p",{className:"project-date-info"}," ",c.a.createElement("span",null,"Last edited")," ",S(n)," "),c.a.createElement("h2",null,"Collaborators:"),0===o.length?"You're not sharing this project with anyone":"",o.map(function(e,t){return c.a.createElement("div",{className:"collaborator-wrapper",key:t},c.a.createElement("p",{className:"collaborator"},e.data.email),c.a.createElement("button",{type:"button",className:"remove-btn",name:e.data.email,value:e.data.email,onClick:function(t){!function(e){C.apply(this,arguments)}(e.id)}},c.a.createElement(Me,null)))}),c.a.createElement("form",{className:"add-collaborator",onSubmit:function(){return P.apply(this,arguments)}},c.a.createElement("input",{type:"text",id:"edit-project-description-input",placeholder:"add a collaborator",value:g,onChange:function(e){y(e.target.value)}}),c.a.createElement("button",{className:"add-collaborator-button",disabled:!g||""===g})))},it=function(e){var t=e.name,a=e.update,r=Object(l.useState)(!1),n=Object(h.a)(r,2),s=n[0],o=n[1];return c.a.createElement("div",{className:s?"nav-elements":"nav-elements hidden-form"}," ",c.a.createElement("h2",{style:{fontSize:s?"0px":"21px"}},t),c.a.createElement("form",{className:"edit-project-name",onClick:function(e){s||(document.getElementById("edit-project-name-input").focus(),o(!s))},onSubmit:function(e){e.preventDefault()}},c.a.createElement("input",{type:"text",id:"edit-project-name-input",defaultValue:t,style:{width:s?"":"0px",padding:s?"":"0px"},onBlur:function(e){o(!1)}}),c.a.createElement("button",{className:"edit-button",onMouseDown:function(e){s&&(a(),o(!s))},type:"button"},c.a.createElement(st,{confirm:s}))))},ut=function(e){return c.a.createElement("svg",{version:"1.1",id:"forbidden",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("circle",{className:"st0-forbidden",cx:"500",cy:"500",r:"397"}),c.a.createElement("g",null,c.a.createElement("line",{className:"st1-forbidden",x1:"780.2",y1:"780.2",x2:"218.8",y2:"218.8"})))},pt=function(e){return c.a.createElement("svg",{version:"1.1",id:"ghost",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("path",{class:"st0-ghost",d:"M949.5,759c-34.3-97-89.7-188.9-98.5-293.2c0-0.3,0-0.6,0-0.9s-0.8-0.1-0.1-1c-5.7-99-58.2-209-174.7-205.1 C550.8,263,499.5,395.2,512,505.6c16.2,110.9,19.6,217.5,6.4,329"}),c.a.createElement("ellipse",{transform:"matrix(1.122617e-02 -0.9999 0.9999 1.122617e-02 200.0576 961.9827)",cx:"586.5",cy:"379.8",rx:"21.8",ry:"27.4"}),c.a.createElement("ellipse",{transform:"matrix(1.122617e-02 -0.9999 0.9999 1.122617e-02 329.3011 1095.6136)",cx:"718.6",cy:"381.3",rx:"21.8",ry:"29.1"}),c.a.createElement("path",{d:"M678.8,453.7c2.3,22-9.1,49.7-35.9,45.1c-26.8-4.6-21.4-27.8-21.6-47.3c-0.2-19.5-3-38.9,20.7-41.1S676.5,431.7,678.8,453.7 z"}),c.a.createElement("path",{class:"st1-ghost",d:"M407.8,331.6c31.9-17.6,51.3-40.8,51.3-66.3c0-55.2-91.5-100-204.3-100s-204.3,44.8-204.3,100 s91.5,100,204.3,100c33.7,0,65.5-4,93.6-11.1c21.9,31.4,51.9,40.2,98.4,39.6C417.6,378.1,408.1,355.2,407.8,331.6z"}),c.a.createElement("text",{transform:"matrix(1 0 0 1 159.4091 299.821)",class:"st2-ghost"},"404"),c.a.createElement("path",{class:"st0-ghost",d:"M518.4,834.6l18.3-11.6c25.3-16.1,57.5-16.4,83.2-0.9l0,0c25.3,15.3,56.9,15.2,82.1-0.2l33.1-20.3 c34.3-21,76.8-23.7,113.5-7.1l0,0c37.7,17,82.1,1.4,100.8-35.5l0,0"}))},mt=function(e){return c.a.createElement("div",{className:"page-not-found-wrapper"},c.a.createElement(pt,null))},dt=function(e){var t=e.match,a=e.notFound,r=window.location.hash.substr(window.location.hash.length-9),n="#"+t.url===window.location.hash.split("?")[0]||"/addpaper"===r||"addpaper/"===r;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"project-nav-link-wrapper",style:{display:a||"/addpaper"===r||"addpaper/"===r?"none":""}},c.a.createElement("div",{className:"nav-link"},c.a.createElement(i.b,{to:t.url},"papers")),c.a.createElement("div",{className:"nav-link"},c.a.createElement(i.b,{to:te(t.url,"/search")},"search")),c.a.createElement("div",{className:"underline",style:{left:n?"25px":"175px"}})))},ht=function(e){var t=Object(l.useState)({data:{name:"loading..."}}),a=Object(h.a)(t,2),r=a[0],n=a[1],s=Object(l.useState)([]),o=Object(h.a)(s,2),p=o[0],f=o[1],E=Object(l.useState)(!1),b=Object(h.a)(E,2),v=b[0],g=b[1],y=Object(l.useState)(!1),x=Object(h.a)(y,2),w=x[0],j=x[1],N=Object(l.useContext)(L),O=Object(l.useState)(!1),k=Object(h.a)(O,2),S=k[0],C=k[1],P=e.match.params.id;function I(){return B.apply(this,arguments)}function B(){return(B=Object(d.a)(m.a.mark(function e(){var t,a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("edit-project-name-input").value,a=document.getElementById("edit-project-description-input").value,t===r.data.name&&a===r.data.description){e.next=7;break}return e.next=5,Y.putProject(P,{name:t,description:a});case 5:(n=e.sent)&&n.message?N.setError(n):n&&null!==n&&(console.log("UPDATED SUCCESSFULLY!"),window.location.reload());case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(l.useEffect)(function(){"loading..."===r.data.name?N.setTitle(c.a.createElement("div",{className:"nav-elements"}," ",c.a.createElement("h2",{className:"static-title"},r.data.name)," ")):(N.setTitle(c.a.createElement(it,{name:r.data.name,update:I})),N.setProjectName(r.data.name))},[r]),Object(l.useEffect)(function(){var e=!0;return g(!1),function(){var t=Object(d.a)(m.a.mark(function t(){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("fetch project page"),t.next=3,Y.getProject(P);case 3:a=t.sent,e&&a.payload&&(401===a.payload.statusCode||"the token does not match any user!"===a.payload.message||"empty token id in header, the user must first login!"===a.payload.message)?(C(!0),g(!0),n({data:{name:"UNAUTHORIZED OR INEXISTENT PROJECTS"}})):e&&a&&a.message?N.setError(a):e&&a&&(C(!1),n(a),g(!0));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[P,N.user]),!1===v?c.a.createElement(W,null):S?c.a.createElement("div",{className:"forbidden-wrapper"},c.a.createElement(ut,null),c.a.createElement("p",null,"This project does not exist or maybe you are not allowed to see it")):c.a.createElement("div",{className:"project-wrapper"},c.a.createElement(dt,{match:e.match,notFound:w}),c.a.createElement(u.c,null,c.a.createElement(u.a,{exact:!0,path:e.match.url,render:function(e){return j(!1),c.a.createElement(c.a.Fragment,null,c.a.createElement(ot,{project_id:P,description:r.data.description,update:I,date_last_modified:r.date_last_modified,date_created:r.date_created,collaborators:p,setCollaborators:f}),c.a.createElement(at,{project_id:P,location:e.location,match:e.match,history:e.history}),c.a.createElement(i.b,{to:te(e.match.url,"/addpaper")},c.a.createElement("button",{className:"bottom-left-btn add-custompaper-btn"},c.a.createElement("div",{className:"btn-title"},"Add Custom Paper"),c.a.createElement("div",{className:"btn-icon"}," "))))}}),c.a.createElement(u.a,{exact:!0,path:e.match.url+"/search",render:function(e){return j(!1),c.a.createElement(He,Object.assign({project_id:P},e))}}),c.a.createElement(u.a,{exact:!0,path:e.match.url+"/searchsimilar",render:function(e){return j(!1),c.a.createElement(et,Object.assign({project_id:P},e))}}),c.a.createElement(u.a,{path:e.match.url+"/addpaper",render:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(i.b,{className:"back",to:e.match.url},"  "),c.a.createElement(ct,{projectId:r.id,url:e.match.url,history:e.history}))}}),c.a.createElement(u.a,{render:function(e){return j(!0),c.a.createElement(mt,null)}})))},ft=function(e){var t="",a=Object(l.useContext)(L);return t=a.userFetch?c.a.createElement(W,null):a.user?c.a.createElement(u.c,null,c.a.createElement(u.a,{exact:!0,path:"/",render:function(){return c.a.createElement(M,null)}}),c.a.createElement(u.a,{exact:!0,path:"/projects",render:function(e){return c.a.createElement(ie,e)}}),c.a.createElement(u.a,{path:"/projects/:id",render:function(e){return c.a.createElement(ht,e)}}),c.a.createElement(u.a,{render:function(e){return c.a.createElement(mt,null)}})):c.a.createElement(u.c,null,c.a.createElement(u.a,{path:"/projects/:id",render:function(e){return c.a.createElement(ht,e)}}),c.a.createElement(u.a,{render:function(){return c.a.createElement(M,null)}})),c.a.createElement("div",{className:"main-wrapper"},t)},Et=function(e){var t=Object(l.useContext)(L);return c.a.createElement("div",{className:"navigation-wrapper"},c.a.createElement("nav",{className:t.user?"main-nav":"main-nav nav-title-to-left"},t.title),e.children)},bt=function(e){var t=Object(l.useContext)(L),a=c.a.createElement("div",{className:"user"},c.a.createElement("h3",null,"you're not logged in"));return t.user&&(a=c.a.createElement("div",{className:"user"},c.a.createElement("img",{className:"face",alt:"profile",src:t.user.image}),c.a.createElement("div",{className:"user-info"},t.user.name,c.a.createElement("br",null),t.user.surname))),a},vt=function(e){return c.a.createElement("svg",{id:"menu-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("path",{className:"st0",d:"M214,482.1"}),c.a.createElement("line",{className:"st-t",x1:"172",y1:"482.1",x2:"172",y2:"482.1"}),c.a.createElement("line",{className:"st-m",x1:"500",y1:"482.1",x2:"500",y2:"482.1"}),c.a.createElement("line",{className:"st-b",x1:"828",y1:"482.1",x2:"828",y2:"482.1"}))},gt=function(e){return f.menu_list.map(function(t,a){return c.a.createElement("div",{key:a,className:"entry-holder"},c.a.createElement(i.b,{to:t.link,className:"menu-option",onMouseUp:e.handleMenuBlur},t.content))})},yt=function(e){var t=Object(l.useContext)(L),a=Object(l.useState)(!1),r=Object(h.a)(a,2),n=r[0],s=r[1],o=Object(l.useState)(!0),i=Object(h.a)(o,2),u=i[0],p=i[1];function f(e){s(!1)}function E(){return(E=Object(d.a)(m.a.mark(function e(a){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("logging out"),p(!0),localStorage.removeItem("userToken"),t.setUser(null);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var b="modal side-menu up",v="button-wrapper close";return u&&(b="modal side-menu"),n&&(v="button-wrapper open",b="modal side-menu down"),t.user?c.a.createElement("div",{className:"menu"},c.a.createElement(ne,{cls:n?"full-screen-transparent":"",handler:f}),c.a.createElement("div",{className:v,onClick:function(){s(!n),p(!1)}},c.a.createElement(vt,null)),c.a.createElement("div",{className:b,tabIndex:-1},c.a.createElement(bt,null),c.a.createElement(gt,{handleMenuBlur:f}),c.a.createElement("div",{className:"entry-holder"},c.a.createElement("button",{type:"button",className:"menu-option",onClick:function(e){return E.apply(this,arguments)},onMouseUp:f},"Log out")))):c.a.createElement("div",{className:"menu"})},xt=Object(u.e)(function(e){var t=Object(l.useContext)(L),a=c.a.createElement(c.a.Fragment,null);return t.user&&(a=function(){var a,r=e.location.pathname.split("/").filter(function(e){return e}),n="/",l=[];a=0===r.length?c.a.createElement("div",{key:0}):c.a.createElement(i.b,{key:0,to:n},"Home",c.a.createElement("span",null," > ")),l.push(a);for(var s=0;s<r.length;s++){if(n+="/"===n?r[s]:"/"+r[s],r[s-1]&&"projects"===r[s-1])a=c.a.createElement(i.b,{key:s+1,to:n},t.projectName);else switch(r[s]){case"projects":a=c.a.createElement(i.b,{key:s+1,to:n},"My Projects");break;case"searchsimilar":a=c.a.createElement(i.b,{key:s+1,to:n},"Search for similar papers");break;case"search":a=c.a.createElement(i.b,{key:s+1,to:n},"Search");break;default:a=c.a.createElement(i.b,{key:s+1,to:n},r[s])}l.push(a),s<r.length-1&&l.push(c.a.createElement("span",{key:s+9999}," > "))}return l}()),c.a.createElement("div",{className:"relative-header"},c.a.createElement("div",{className:"breadcrumbs"},a))}),wt=function(e){var t=Object(l.useContext)(L),a=c.a.createElement(c.a.Fragment,null);return t.notificationMessage&&(setTimeout(function(){t.setNotificationMessage(void 0)},5e3),a=c.a.createElement("div",{className:"top-right-notification"},c.a.createElement("div",{className:"message-content"},t.notificationMessage),c.a.createElement("button",{type:"button",className:"close-notification-btn",onClick:function(e){t.setNotificationMessage(void 0)}},c.a.createElement($,null)))),a},jt=a(123),Nt=Object(u.e)(function(e){var t=c.a.createElement(c.a.Fragment,null),a=window.localStorage,r=(e.history,Object(l.useContext)(L));function n(e){return s.apply(this,arguments)}function s(){return(s=Object(d.a)(m.a.mark(function e(t){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.tokenId&&(console.log(t.profileObj),n={email:t.profileObj.email,name:t.profileObj.givenName,surname:t.profileObj.familyName,image:t.profileObj.imageUrl},r.setUser(n),a.setItem("userToken",t.tokenId));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return r.userFetch||r.user||(t=c.a.createElement("div",{className:"login-holder"},c.a.createElement(jt.GoogleLogin,{clientId:f.google_login_client_id,buttonText:"Login",onSuccess:n,onFailure:n,cookiePolicy:"single_host_origin"}))),t}),Ot=function(e){return c.a.createElement(i.a,null,c.a.createElement("div",{className:"app"},c.a.createElement(F,null,c.a.createElement(Et,null,c.a.createElement(yt,null)),c.a.createElement(xt,null),c.a.createElement(wt,null),c.a.createElement(ft,null),c.a.createElement(Nt,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(Ot,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[124,1,2]]]);
//# sourceMappingURL=main.35ef192c.chunk.js.map