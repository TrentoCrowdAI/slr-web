(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{125:function(e,t,a){e.exports=a(280)},280:function(e,t,a){"use strict";a.r(t);var r,n,l=a(0),c=a.n(l),s=a(120),o=a.n(s),i=a(4),u=a(25),p=a(1),m=a.n(p),d=a(3),h=a(2),f=function(e){var t=e.confirm;c.a.createElement(c.a.Fragment,null);return t?c.a.createElement("svg",{version:"1.1",id:"confirm-edit-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("polyline",{className:"st-confirm",points:"918,192.3 389.3,807.7 82,450 "})):c.a.createElement("svg",{version:"1.1",id:"edit-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("path",{className:"st-pencil",d:"M224,632.3l-81.6,225.3L367.7,776l0,0L833,310.7c39.4-39.4,39.9-103.3,0.7-142.9c-0.5-0.5-1-1-1.4-1.4 c-39.6-39.2-103.6-38.7-142.9,0.7L224,632.3L224,632.3z"}),c.a.createElement("path",{className:"st-pencil-border",d:"M367.7,776c-24-71.7-71.9-119.6-143.7-143.7"}),c.a.createElement("path",{className:"st-pencil",d:"M805.7,338c-24-71.7-71.9-119.6-143.7-143.7"}))},E=function(e){var t=Object(l.useContext)(A);return c.a.createElement("div",{className:"navigation-wrapper"},c.a.createElement("nav",{className:"main-nav"},t.title),e.children)},b=function(){var e,t=Object(l.useContext)(A);return Object(l.useEffect)(function(){return function(){t.setError(null)}}),e=t.error.payload?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Error code:"),c.a.createElement("p",null,t.error.payload.statusCode),c.a.createElement("p",null,"Error name:"),c.a.createElement("p",null,t.error.payload.error),c.a.createElement("p",null,"Error message"),c.a.createElement("p",null,t.error.payload.message)):c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Error name:"),c.a.createElement("p",null,t.error.name),c.a.createElement("p",null,"Error message"),c.a.createElement("p",null,t.error.message)),e=c.a.createElement("div",{className:"error-wrapper",style:{textAlign:"center"}},e,c.a.createElement("br",null),c.a.createElement("button",{type:"button",onClick:function(){window.history.back(),t.setError(null)}},c.a.createElement("u",null,"return to previous page")),c.a.createElement("br",null),c.a.createElement("p",null,"or"),c.a.createElement("br",null),c.a.createElement("button",{type:"button",onClick:function(){t.setError(null)}},c.a.createElement("u",null,"refresh")))},v=1e4,g=window.localStorage;function y(e,t,a){return x.apply(this,arguments)}function x(){return(x=Object(d.a)(m.a.mark(function e(t,a,l){var c,s,o,i,u,p;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new AbortController,c=r.signal,n=0,s=Object.assign({credentials:"include",mode:"cors",signal:c},a),o=setTimeout(function(){return r.abort(),void(n=2)},l),e.next=8,fetch(t,s);case 8:return i=e.sent,clearTimeout(o),e.next=12,C(i);case 12:return u=e.sent,S(i,u),e.abrupt("return",u);case 17:if(e.prev=17,e.t0=e.catch(0),2!==n){e.next=25;break}return(p=new Error("Error: Time out to get response from backend")).name="timeout",e.abrupt("return",p);case 25:if(1!==n){e.next=27;break}return e.abrupt("return",null);case 27:return e.abrupt("return",e.t0);case 28:case"end":return e.stop()}},e,null,[[0,17]])}))).apply(this,arguments)}function w(){return(w=Object(d.a)(m.a.mark(function e(t){var a,r,n,l,c,s=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]?s[1]:"",r="",""!==a){for(n in r="?",a)r+=n+"="+encodeURIComponent(a[n])+"&";r=r.slice(0,r.length-1)}return(l=new Headers).append("Accept","application/json"),l.append("Content-Type","application/json;charset=UTF-8"),l.append("Authorization",g.getItem("userToken")),c={method:"GET",headers:l},e.next=10,y(t+r,c,v);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(){return(j=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Headers).append("Authorization",g.getItem("userToken")),r={method:"DELETE",headers:a},e.next=5,y(t,r,v);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(){return(k=Object(d.a)(m.a.mark(function e(t){var a,r,n,l,c=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"",(r=new Headers).append("Accept","application/json, text/plain, */*"),r.append("Cache-Control","no-cache"),r.append("Content-Type","application/json;charset=UTF-8"),r.append("Authorization",g.getItem("userToken")),n=JSON.stringify(a,null,2),l={method:"POST",headers:r,body:n},e.next=10,y(t,l,v);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(){return(N=Object(d.a)(m.a.mark(function e(t){var a,r,n,l=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:"",1e4,(r=new Headers).append("Accept","application/json, text/plain, */*"),r.append("Cache-Control","no-cache"),r.append("Authorization",g.getItem("userToken")),n={method:"POST",headers:r,body:a},e.next=9,y(t,n,1e4);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(){return(O=Object(d.a)(m.a.mark(function e(t){var a,r,n,l,c=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"",(r=new Headers).append("Accept","application/json, text/plain, */*"),r.append("Cache-Control","no-cache"),r.append("Content-Type","application/json;charset=UTF-8"),r.append("Authorization",g.getItem("userToken")),n=JSON.stringify(a,null,2),l={method:"PUT",headers:r,body:n},e.next=10,y(t,l,v);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(e,t){if(e.status<200||e.status>=300){var a=new Error(e.statusText);throw a.data=e,t.payload&&(a.payload=t.payload),a}}function C(e){return P.apply(this,arguments)}function P(){return(P=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.headers.get("Content-Type"),r=null,null==a){e.next=21;break}if(!(a.indexOf("text")>-1)){e.next=7;break}return e.next=6,t.text();case 6:r=e.sent;case 7:if(!(a.indexOf("form")>-1)){e.next=11;break}return e.next=10,t.formData();case 10:r=e.sent;case 11:if(!(a.indexOf("video")>-1)){e.next=15;break}return e.next=14,t.blob();case 14:r=e.sent;case 15:if(!(a.indexOf("json")>-1)){e.next=19;break}return e.next=18,t.json();case 18:r=e.sent;case 19:e.next=25;break;case 21:if(null==t){e.next=25;break}return e.next=24,t.text();case 24:r=e.sent;case 25:return e.abrupt("return",r);case 26:case"end":return e.stop()}},e)}))).apply(this,arguments)}var B={get:function(e){return w.apply(this,arguments)},post:function(e){return k.apply(this,arguments)},delete:function(e){return j.apply(this,arguments)},put:function(e){return O.apply(this,arguments)},postFile:function(e){return N.apply(this,arguments)},abortRequest:function(){r.abort(),n=1,console.log("abort")}},I={home:"https://crowdai-slr-api-dev.herokuapp.com/",search:"search",scopus_search:"search-scopus",search_similar:"search/similar",projects:"projects",papers:"papers",customPapers:"customPapers",userLogin:"auth/login",userInfo:"user-info",userLogout:"auth/logout",menu_list:[{id:4,content:"home",link:"/"},{id:5,content:"my projects",link:"/projects"},{id:6,content:"account",link:"#"}],max_total_number_for_results:5e3,pdf_parse_server:"pdf",google_login_client_id:"282160526683-84sdnoqh3bc1obojfpepcbonnfg3uks4.apps.googleusercontent.com"};function _(){return(_=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=I.home+I.userLogin,e.next=3,B.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(){return(T=Object(d.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.home+I.userInfo,e.next=3,B.get(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function L(){return(L=Object(d.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.home+I.userLogout,e.next=3,B.get(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var F={postTokenId:function(e){return _.apply(this,arguments)},getUserByTokenId:function(){return T.apply(this,arguments)},logoutUser:function(){return L.apply(this,arguments)}},A=c.a.createContext(),D=function(e){var t=Object(l.useState)(null),a=Object(h.a)(t,2),r=a[0],n=a[1],s=Object(l.useState)(!0),o=Object(h.a)(s,2),i=o[0],u=o[1],p=Object(l.useState)(null),f=Object(h.a)(p,2),E=f[0],v=f[1],g=Object(l.useState)(c.a.createElement("div",{className:"nav-elements"}," ",c.a.createElement("h2",{className:"static-title"},"HOME")," ")),y=Object(h.a)(g,2),x=y[0],w=y[1],j=Object(l.useState)(""),k=Object(h.a)(j,2),N=k[0],O=k[1],S={user:r,setUser:n,userFetch:i,setUserFetch:u,error:E,setError:v,title:x,setTitle:w,projectName:N,setProjectName:O};return Object(l.useEffect)(function(){var e=window.localStorage;e.getItem("userToken")?function(){var t=Object(d.a)(m.a.mark(function t(){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.getUserByTokenId(e.getItem("userToken"));case 2:a=t.sent,n(a.user),u(!1);case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()():u(!1)},[]),E?c.a.createElement(A.Provider,{value:S},c.a.createElement(b,null)):c.a.createElement(A.Provider,{value:S},e.children)},q=function(e){var t=Object(l.useContext)(A);return Object(l.useEffect)(function(){t.setTitle(c.a.createElement("div",{className:"nav-elements"}," ",c.a.createElement("h2",{className:"static-title"},"HOME")," "))},[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"Systematic Literature Review manager"),c.a.createElement("h2",{style:{fontSize:22,fontWeight:"normal"}},"the system right now allows you to"),c.a.createElement("ul",{style:{fontSize:18,fontWeight:"lighter"}},c.a.createElement("li",null,"browse a list of prjects"),c.a.createElement("li",null,"add a new project"),c.a.createElement("li",null,"browse the list of papers on a project"),c.a.createElement("li",null,"search(from scopus) and add papers to a project"),c.a.createElement("li",null,"add custom papers based on a file or form data"),c.a.createElement("li",null,"'fake search' similar papers")),c.a.createElement("h2",{style:{fontSize:22,fontWeight:"normal"}},"notes"),c.a.createElement("ul",{style:{fontSize:18,fontWeight:"lighter"}},c.a.createElement("li",null,c.a.createElement("i",null,"the scopus search works partially(can't retrieve the description)"),c.a.createElement("ul",null,c.a.createElement("li",{style:{fontSize:16}},c.a.createElement("i",null,'from Elsevier developer portal : "The data available depends on your institutional subscriptions, and only when you\'re making calls from within your institutional network are you considered a subscriber"')))),c.a.createElement("li",null,c.a.createElement("i",null,"the options don't affect the search, for now"))))},X=a(9),R=a(16),U=a.n(R);function M(){return(M=Object(d.a)(m.a.mark(function e(){var t,a,r,n=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",a=I.home+I.projects,e.next=4,B.get(a,t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(){return(z=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=I.home+I.projects+"/"+t,e.next=3,B.get(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function J(){return(J=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=I.home+I.projects,e.next=3,B.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(){return(H=Object(d.a)(m.a.mark(function e(t,a){var r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=I.home+I.projects+"/"+t,e.next=3,B.put(r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Y(){return(Y=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=I.home+I.projects+"/"+t,e.next=3,B.delete(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var V={getProjectsList:function(){return M.apply(this,arguments)},getProject:function(e){return z.apply(this,arguments)},postProject:function(e){return J.apply(this,arguments)},putProject:function(e,t){return H.apply(this,arguments)},deleteProject:function(e){return Y.apply(this,arguments)},abortRequest:B.abortRequest},G=function(e){return c.a.createElement("svg",{id:"loading-icon",className:e.class,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("g",null,c.a.createElement("path",{id:"loading-circle1",d:" M 500, 500 m -160, 0 a 160,160 0 1,0 320,0 a 160,160 0 1,0 -320,0 "}),c.a.createElement("path",{id:"loading-circle2",d:" M 500, 500 m -305, 0 a 305,305 0 1,0 610,0 a 305,305 0 1,0 -610,0 "})))},W=a(10),$=function(e){return c.a.createElement("svg",{id:"close-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("line",{className:"ln",x1:"134",y1:"866",x2:"866",y2:"134"}),c.a.createElement("line",{className:"ln",x1:"134",y1:"134",x2:"866",y2:"866"}))};var K=function(e){var t=a(75),r=Object(l.useState)(!1),n=Object(h.a)(r,2),s=(n[0],n[1],t.object().shape({name:t.string().required("please enter a title"),description:t.string().required("please enter a description")})),o=Object(l.useContext)(A);return c.a.createElement(c.a.Fragment,null,c.a.createElement(W.c,{initialValues:{name:"",description:""},validationSchema:s,onSubmit:function(){var t=Object(d.a)(m.a.mark(function t(a,r){var n,l,c;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.setSubmitting,l={name:a.name,description:a.description},t.next=4,V.postProject(l);case 4:(c=t.sent).message?o.setError(c):e.history.push("/projects/"+c.id),n(!1);case 7:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),validateOnBlur:!1},function(t){var a=t.errors,r=t.touched,n=t.isSubmitting,l=(t.setErrors,t.validateField),s=t.handleChange;return c.a.createElement(W.b,{className:"modal add-project",style:{visibility:e.visibility?"":"hidden"}},c.a.createElement("button",{type:"button",className:"close-btn",onClick:function(t){e.setVisibility(!e.visibility)}},c.a.createElement($,null)),c.a.createElement("br",null),c.a.createElement(W.a,{style:{borderBottom:a.name&&r.name?"solid 1px #d81e1e":""},name:"name",type:"text",placeholder:"Project Name",onChange:function(e){s(e),l("name")}}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(W.a,{style:{borderBottom:a.description&&r.description?"solid 1px #d81e1e":""},name:"description",component:"textarea",placeholder:"Project Description"}),c.a.createElement("br",null),c.a.createElement("button",{type:"submit",disabled:n||a.name&&r.name||a.description&&r.description},"Add Project"))}))};var Q=function(e){var t=e.start,a=e.count,r=e.totalResults,n=e.path;r>I.max_total_number_for_results&&(r=I.max_total_number_for_results),n=function(e){var t=window.location.href.split("?")[1];if(t){t=t.split("#")[0];for(var a="",r=t.split("&"),n=0;n<r.length;n++){var l=r[n].split("=")[0];"start"!==l&&"count"!==l&&(a+=r[n]+"&")}e=e+"?"+a}else e+="?";return e}(n);var l="",s="",o="",u="",p=[],m=Math.floor(t/a)+1,d=Math.ceil(r/a);if(d>1){m>1&&(l=c.a.createElement("li",null,c.a.createElement(i.b,{className:"prev-page",to:n+"start="+((m-1)*a>0?(m-2)*a:0)+"&count="+a},"<"))),m<d&&(s=c.a.createElement("li",null,c.a.createElement(i.b,{className:"next-page",to:n+"start="+m*a+"&count="+a},">"))),m>6&&(o=c.a.createElement(c.a.Fragment,null,c.a.createElement("li",null,c.a.createElement(i.b,{className:"first-page",to:n+"start=0&count="+a},"1")),c.a.createElement("li",null,c.a.createElement("span",null,"...")))),m<d-5&&(u=c.a.createElement(c.a.Fragment,null,c.a.createElement("li",null,c.a.createElement("span",null,"...")),c.a.createElement("li",null,c.a.createElement(i.b,{style:{display:"inline-block"},className:"last-page",to:n+"start="+(d-1)*a+"&count="+a},d))));for(var h=m-4;h<=m+4;h++)h>0&&h<=d&&(h!==m?p.push(c.a.createElement(i.b,{className:"normal-page",to:n+"start="+(h-1)*a+"&count="+a},h)):p.push(c.a.createElement("span",{className:"current-page"},m)))}return c.a.createElement("ul",{className:"pagination"},l,o,p.map(function(e,t){return c.a.createElement("li",{style:{display:"inline-block",margin:10},key:t},e)}),u,s)};function Z(e,t,a){if(null==e||null==t)return!1;if(0==e.length||0==t.length)return!1;for(var r=function(r){if(!e.some(function(e){return e[a]===t[r][a]}))return{v:!1}},n=0;n<t.length;++n){var l=r(n);if("object"===typeof l)return l.v}return!0}function ee(e,t){return"/"===e.charAt(e.length-1)?e.slice(0,-1)+t:e+t}function te(e){for(var t="?",a=Object.keys(e),r=0;r<a.length;r++)"date_created"===e.orderBy&&"sort"===a[r]||(t+=a[r]+"="+encodeURIComponent(e[a[r]]),r!==a.length-1&&(t+="&"));return t}function ae(e,t,a){for(var r=-1,n=0;n<e.length;n++)if(e[n][t]===a){r=n;break}return r}var re=function(e){var t=e.cls,a=e.handler;return c.a.createElement("div",{className:"cover "+t,onClick:function(e){a(!1)}})},ne=function(e){return c.a.createElement("svg",{version:"1.1",id:"options-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("path",{className:"st0",d:"M214,482.1"}),c.a.createElement("line",{className:"st-options",x1:"500",y1:"250",x2:"500",y2:"250"}),c.a.createElement("line",{className:"st-options",x1:"500",y1:"500",x2:"500",y2:"500"}),c.a.createElement("line",{className:"st-options",x1:"500",y1:"750",x2:"500",y2:"750"}))},le=function(e){var t=e.cls,a=e.options,r=e.handler,n=e.target,s=Object(l.useState)(!1),o=Object(h.a)(s,2),i=o[0],u=o[1];return c.a.createElement("div",{className:t},c.a.createElement("button",{type:"button",onBlur:function(e){i&&u(!1)},onMouseDown:function(e){u(!i)}},c.a.createElement(ne,null)),c.a.createElement("div",{style:{fontSize:i?"12px":"0px",padding:i?"2px":"0px",border:i?"solid 1px #e8e8e8":"solid 0px #e8e8e8"},className:"options-list"},a.map(function(e,t){return c.a.createElement("div",{key:t,onMouseDown:function(t){return r(n,e)},className:"option"},e)})))},ce=function(e){var t,a=e.projectsList,r=e.path,n=e.handleDelete,l=["delete"];return t=0===a.length?c.a.createElement("div",null,"there aren't projects"):a.map(function(e,t){return c.a.createElement("div",{key:e.id,className:"light-modal project-card"},c.a.createElement(le,{options:l,handler:n,target:e.id,cls:"card-options project-card-options"}),c.a.createElement(i.b,{to:ee(r,"/"+e.id)},c.a.createElement("h3",null,e.data.name),c.a.createElement("p",{className:"description"},e.data.description),c.a.createElement("div",{className:"project-dates"},c.a.createElement("p",null),c.a.createElement("p",null,"last modified on ",c.a.createElement("i",null,e.date_last_modified.slice(0,10))))))}),c.a.createElement("div",{className:"project-cards-holder"},t)};var se=function(e){var t=Object(l.useState)([]),a=Object(h.a)(t,2),r=a[0],n=a[1],s=Object(l.useState)(0),o=Object(h.a)(s,2),i=o[0],u=o[1],p=Object(l.useState)(!1),f=Object(h.a)(p,2),E=f[0],b=f[1],v=Object(l.useState)(!1),g=Object(h.a)(v,2),y=g[0],x=g[1],w=Object(l.useContext)(A),j=function(e){var t=U.a.parse(e),a=t.count||10;return{start:t.start||0,count:a}}(e.location.search);function k(){return(k=Object(d.a)(m.a.mark(function e(t){var a,l;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleting "+t),e.next=3,V.deleteProject(t);case 3:(a=e.sent)&&a.message?w.setError(a):a&&null!==a&&(l=r.filter(function(e){return e.id!==t}),n(l),alert("DELETED SUCCESSFULLY!"));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(l.useEffect)(function(){w.setTitle(c.a.createElement("div",{className:"nav-elements"}," ",c.a.createElement("h2",{className:"static-title"},"PROJECTS")," ")),w.setProjectName("")},[]),Object(l.useEffect)(function(){var e=!0;return function(){var t=Object(d.a)(m.a.mark(function t(){var a,r,l;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return b(!1),t.next=3,V.getProjectsList(Object(X.a)({orderBy:"date_last_modified"},j));case 3:a=t.sent,e&&a&&"Not Found"===a.message?(n([]),u(0),b(!0)):e&&a&&a.message?w.setError(a):e&&a&&(r=a.results.filter(function(e,t){if(t%2)return e}),l=[],l=a.results.filter(function(e,t){if(!(t%2))return e}),n(l.concat(r)),u(a.totalResults),b(!0));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[j.start,j.count]),!1===E?c.a.createElement(G,null):c.a.createElement("div",null,c.a.createElement(re,{cls:y?"full-screen":"",handler:x}),c.a.createElement(ce,{projectsList:r,path:e.match.url,handleDelete:function(e){return k.apply(this,arguments)}}),c.a.createElement(Q,{start:j.start,count:j.count,totalResults:i,path:e.match.url}),c.a.createElement(K,{visibility:y,setVisibility:x,history:e.history}),c.a.createElement("button",{className:"bottom-left-btn add-project-btn",type:"button",value:"toggle-insert-form",onClick:function(e){x(!y)}},c.a.createElement("div",{className:"btn-title"},"Add Project"),c.a.createElement("div",{className:"btn-icon"}," ")))},oe=a(73),ie=a(17),ue=a(24),pe=a.n(ue);function me(){return(me=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=I.home+I.search,e.next=3,B.get(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function de(){return(de=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=I.home+I.papers+"/"+t,e.next=3,B.get(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function he(){return(he=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=I.home+I.search_similar,console.log(t),e.next=4,B.post(a,t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var fe={search:function(e){return me.apply(this,arguments)},selectById:function(e){return de.apply(this,arguments)},searchSimilar:function(e){return he.apply(this,arguments)},abortRequest:B.abortRequest};function Ee(){return(Ee=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=I.home+I.papers,e.next=3,B.get(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function be(){return(be=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=I.home+I.papers+"/"+t,e.next=3,B.get(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ve(){return(ve=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=I.home+I.papers,e.next=3,B.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ge(){return(ge=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=I.home+I.customPapers,e.next=3,B.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ye(){return(ye=Object(d.a)(m.a.mark(function e(t,a){var r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=I.home+I.papers+"/"+t,e.next=3,B.put(r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xe(){return(xe=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=I.home+I.papers+"/"+t,e.next=3,B.delete(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var we={getPapersList:function(e){return Ee.apply(this,arguments)},getPaper:function(e){return be.apply(this,arguments)},postPaperIntoProject:function(e){return ve.apply(this,arguments)},postCustomPaperIntoProject:function(e){return ge.apply(this,arguments)},putPaper:function(e,t){return ye.apply(this,arguments)},deletePaper:function(e){return xe.apply(this,arguments)},abortRequest:B.abortRequest},je=function(e){return c.a.createElement("svg",{id:"select-tick",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("polyline",{className:"st-tick",points:"918,192.3 389.3,807.7 82,450 "},c.a.createElement("animate",{attributeName:"points",dur:"0.2s",repeatCount:"1",fill:"freeze",from:"500,600 400,700 200,750",to:"918,192.3 389.3,807.7 82,450 "})))},ke=function(e){var t=e.val,a=e.name,r=e.label,n=e.isChecked,s=e.handler,o=Object(l.useState)(c.a.createElement(c.a.Fragment,null)),i=Object(h.a)(o,2),u=i[0],p=i[1];return Object(l.useEffect)(function(){p(n?c.a.createElement(je,null):c.a.createElement(c.a.Fragment,null))},[n]),c.a.createElement("label",{className:"checkbox-container"},c.a.createElement("input",{type:"checkbox",value:t,name:a,checked:n,onChange:function(e){console.log("clickekdkdkdkd"),s(e)}}),c.a.createElement("span",{className:"checkmark"},u),c.a.createElement("span",{className:"name"},r))},Ne=function(e){return c.a.createElement("svg",{id:"radio-tick",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("circle",{className:"st-circle",cx:"500",cy:"500",r:"375"},c.a.createElement("animate",{attributeName:"r",dur:"0.2s",repeatCount:"1",fill:"freeze",from:"0",to:"375"})))},Oe=function(e){var t=e.label,a=e.name,r=e.val,n=e.isChecked,s=e.handler,o=Object(l.useState)(c.a.createElement(c.a.Fragment,null)),i=Object(h.a)(o,2),u=i[0],p=i[1];return Object(l.useEffect)(function(){p(n?c.a.createElement(Ne,null):c.a.createElement(c.a.Fragment,null))},[n]),c.a.createElement("label",{className:"radiobox-container"},c.a.createElement("input",{type:"radio",value:r,name:a,checked:n,onChange:s}),c.a.createElement("span",{className:"radiomark"},u),c.a.createElement("span",null,t))},Se=function(e){return c.a.createElement("svg",{id:"search-icon",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("path",{className:"st0",d:"M626.9,644.3c-73.5,0-142.6-28.6-194.6-80.6s-80.6-121.1-80.6-194.6s28.6-142.6,80.6-194.6 c52-52,121.1-80.6,194.6-80.6c73.5,0,142.6,28.6,194.6,80.6c52,52,80.6,121.1,80.6,194.6s-28.6,142.6-80.6,194.6 S700.4,644.3,626.9,644.3z"}),c.a.createElement("line",{className:"st1",x1:"145.2",y1:"850.8",x2:"431.7",y2:"564.3"}))},Ce=function(e){return c.a.createElement("svg",{id:"similar-paper-search-icon",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("polyline",{className:"st0-sps",points:"795.8,214 734.8,214 736.8,146 \t\t"}),c.a.createElement("polyline",{className:"st0-sps",points:"842.8,214 842.8,875.8 262.8,875.8 262.8,106 734.8,106 \t\t"}),c.a.createElement("line",{className:"st0-sps",x1:"842.8",y1:"214",x2:"734.8",y2:"106"}),c.a.createElement("line",{className:"st1-sps",x1:"350.8",y1:"198.9",x2:"644.8",y2:"198.9"}),c.a.createElement("line",{className:"st2-sps",x1:"346.8",y1:"385.4",x2:"752.8",y2:"385.4"}),c.a.createElement("line",{className:"st2-sps",x1:"544",y1:"485.9",x2:"752.8",y2:"485.9"}),c.a.createElement("line",{className:"st3-sps",x1:"346.8",y1:"485.9",x2:"544",y2:"485.9"}),c.a.createElement("line",{className:"st2-sps",x1:"575.9",y1:"586.4",x2:"752.8",y2:"586.4"}),c.a.createElement("line",{className:"st3-sps",x1:"346.8",y1:"586.4",x2:"575.9",y2:"586.4"}),c.a.createElement("line",{className:"st2-sps",x1:"555.5",y1:"686.9",x2:"752.8",y2:"686.9"}),c.a.createElement("line",{className:"st3-sps",x1:"346.8",y1:"686.9",x2:"555.5",y2:"686.9"}),c.a.createElement("circle",{className:"st4-sps",cx:"410.8",cy:"594.3",r:"171.7"}),c.a.createElement("line",{className:"st4-sps",x1:"111.2",y1:"894",x2:"289.4",y2:"715.7"}))},Pe=function(e){var t=e.papersList,a=e.handlePaperSelection,r=e.selectedEidList,n=["search similar"],s=Object(l.useContext)(A);function o(e,t){return u.apply(this,arguments)}function u(){return(u=Object(d.a)(m.a.mark(function e(t,a){var r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("delete"!==a){e.next=6;break}return console.log("deleting "+t),e.next=4,we.deletePaper(t);case 4:(r=e.sent).message?s.setError(r):null!==r&&alert("DELETED SUCCESSFULLY!");case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}return t.map(function(e,t){return c.a.createElement("div",{key:t,className:"paper-card"},c.a.createElement(ke,{name:e.title,label:"",val:e.eid,isChecked:r.includes(e.eid),handler:a}),c.a.createElement(le,{options:n,handler:o,target:e.id,cls:"card-options paper-card-options"}),c.a.createElement(i.b,{to:"#"},c.a.createElement("h3",null,e.title)),c.a.createElement("div",{className:"extra-info"},c.a.createElement("p",{className:"authors"},e.authors),c.a.createElement("p",{className:"eid"},e.eid),c.a.createElement("p",{className:"date"},e.year)),c.a.createElement(pe.a,{text:e.abstract,lines:4,ellipsis:"...",className:"paragraph",moreText:"more",lessText:"less"}))})},Be=function(e){var t=e.papersList,a=(e.location,e.history,Object(l.useState)(t)),r=Object(h.a)(a,2),n=r[0],s=r[1],o=Object(l.useContext)(A),u=["delete","search similar"];function p(e,t){return f.apply(this,arguments)}function f(){return(f=Object(d.a)(m.a.mark(function e(t,a){var r,l;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("delete"!==a){e.next=6;break}return console.log("deleting "+t),e.next=4,we.deletePaper(t);case 4:(r=e.sent).message?o.setError(r):null!==r&&(alert("DELETED SUCCESSFULLY!"),l=n.filter(function(e){return e.id!==t}),s(l));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}return 0===n.length?c.a.createElement("div",null,"there are no papers here, you can add new ones by searching"):n.map(function(e){return c.a.createElement("div",{key:e.id,className:"paper-card"},c.a.createElement(le,{options:u,handler:p,target:e.id,cls:"card-options paper-card-options"}),c.a.createElement(i.b,{to:"#"},c.a.createElement("h3",null,e.data.title)),c.a.createElement("div",{className:"extra-info"},c.a.createElement("p",{className:"authors"},e.data.authors),c.a.createElement("p",{className:"eid"},e.data.eid||e.data.doi),c.a.createElement("p",{className:"date"},e.data.year)),c.a.createElement(pe.a,{text:e.data.abstract,lines:4,ellipsis:"...",className:"paragraph",moreText:"more",lessText:"less"}))})},Ie=function(e){var t="",a="";return e.focused?(t="90,295.5 500,704.5 910,295.5 ",a="90,704.5 500,295.5 910,704.5 "):(t="90,704.5 500,295.5 910,704.5 ",a="90,295.5 500,704.5 910,295.5 "),c.a.createElement("svg",{version:"1.1",id:"arrow-select",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("polyline",{className:"st-arrow-select",points:t},c.a.createElement("animate",{attributeType:"XML",id:"ani-select-arrow",attributeName:"points",from:t,to:a,begin:"0s",dur:"0.2s",repeatCount:"1",fill:"freeze"})))},_e=function(e){var t=e.options,a=e.selected,r=e.handler,n=Object(l.useState)(!1),s=Object(h.a)(n,2),o=s[0],i=s[1];function u(e){document.getElementById("ani-select-arrow").beginElement(),i(!o)}return c.a.createElement("div",{className:"custom-select"},c.a.createElement("div",{className:"selected",tabIndex:-2,onBlur:u,onFocus:u},t[a].label," ",c.a.createElement("div",{className:"arrow"},c.a.createElement(Ie,{focused:o}))),c.a.createElement("div",{className:"options-holder",style:{fontSize:o?"15px":"0px",borderBottom:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderLeft:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderRight:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderTop:"none"}},t.map(function(e,t){return c.a.createElement("div",{key:t,"data-value":t,className:"option",style:{padding:o?"2px":"0px"},onMouseDown:r},e.label)})))},Te=function(e){var t=e.display,a=e.up,r="",n="",s="";"ASC"===a?(n="371.7,293 500,165 628.3,293 ",s="371.7,491.9 500,619.9 628.3,491.9 "):(n="371.7,491.9 500,619.9 628.3,491.9 ",s="371.7,293 500,165 628.3,293 ");var o=Object(l.useState)(s),i=Object(h.a)(o,2),u=i[0],p=i[1];return Object(l.useEffect)(function(){p(s)},[s]),t&&(r=c.a.createElement("svg",{version:"1.1",id:"order-arrow",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("polyline",{className:"st-order-arrow-head",points:"371.7,293 500,165 628.3,293 ",transform:"matrix(1.5303008,0,0,1.5303008,-279.47582,-105.57059)"},c.a.createElement("animate",{attributeType:"XML",id:"ani-order-arrow",attributeName:"points",from:n,to:u,begin:"0s",dur:"0.2s",repeatCount:"1",fill:"freeze"})),c.a.createElement("line",{className:"st-order-arrow",x1:"485.67453",y1:"145.09268",x2:"485.67453",y2:"827.75989"}))),r},Le=function(e){return c.a.createElement("svg",{id:"remove-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("line",{className:"rb",x1:"134",y1:"866",x2:"866",y2:"134"}),c.a.createElement("line",{className:"rb",x1:"134",y1:"134",x2:"866",y2:"866"}))},Fe=a(117),Ae=[{label:"Title",value:"title"},{label:"Date",value:"date"}],De=[{label:"all",value:"all"},{label:"author",value:"author"},{label:"content",value:"content"},{label:"adv. query",value:"advanced"}],qe=(new Date).getFullYear()+2,Xe=["all"].concat(Object(ie.a)(Fe.range(2017,qe).map(String))),Re=function(e){var t=e.selectedPapersList,a=e.handlePaperSelection;return c.a.createElement("div",{className:"selected-papers-list",style:{opacity:t.length>0?"1.0":"0.0",pointerEvents:t.length>0?"auto":"none"}},c.a.createElement("h3",null,"SELECTED PAPERS"," ",c.a.createElement("br",null),c.a.createElement("span",null,"(total : ",t.length,")")),c.a.createElement("div",{className:"submission-wrapper"},c.a.createElement("div",{className:"papers-wrapper",style:{border:t.length>0?"":"0px"}},c.a.createElement("div",{className:"papers-flex",style:{padding:t.length>0?"":"0px"}},t.map(function(e,t){return c.a.createElement("p",{key:t},c.a.createElement("span",null,e.title),c.a.createElement("button",{type:"button",className:"remove-btn",name:e.title,value:e.eid,onClick:function(t){a({target:{name:e.title,value:e.eid}})}},c.a.createElement(Le,null)))}))),c.a.createElement("button",{style:{border:t.length>0?"":"0px",margin:t.length>0?"":"0px",height:t.length>0?"":"0px",pointerEvents:t.length>0?"auto":"none"},className:"ti-btn add-resultpaper-btn",type:"submit",value:"Submit"},c.a.createElement("div",{className:"btn-title"},"Add Selected Paper"),c.a.createElement("div",{className:"btn-icon"}))))};var Ue=function(e){var t,a=e.project_id,r=e.location,n=e.match,s=e.history,o=Object(l.useState)([]),u=Object(h.a)(o,2),p=u[0],f=u[1],E=Object(l.useState)(!0),b=Object(h.a)(E,2),v=b[0],g=b[1],y=Object(l.useState)(0),x=Object(h.a)(y,2),w=x[0],j=x[1],k=Object(l.useContext)(A),N=function(e){var t,a=U.a.parse(e),r=a.query||"",n=a.searchBy||"all",l=a.orderBy||"title",c=a.sort||"ASC",s=a.start||0,o=a.count||10;t=void 0===a.scopus||"true"===a.scopus;var i="true"===a.googleScholar,u="true"===a.arXiv,p=a.year||"all";return{query:r,searchBy:n,orderBy:l,sort:c,scopus:t,googleScholar:i,arXiv:u,year:p,start:s,count:o}}(r.search),O=window.localStorage;window.localStorage||console.log("the browser must be support localStorage"),t=O.getItem("selectedPapersList")?JSON.parse(O.getItem("selectedPapersList")):[];var S=Object(l.useState)(t),C=Object(h.a)(S,2),P=C[0],B=C[1],I=Object(l.useState)("_"),_=Object(h.a)(I,2),T=_[0],L=_[1],F=Object(l.useState)({scopus:!0,googleScholar:!1,arXiv:!1}),D=Object(h.a)(F,2),q=D[0],R=D[1],M=Object(l.useState)("all"),z=Object(h.a)(M,2),J=z[0],H=z[1],Y=Object(l.useState)("all"),V=Object(h.a)(Y,2),W=V[0],$=V[1],K=Object(l.useState)(N.sort),ee=Object(h.a)(K,2),re=ee[0],ne=ee[1];function le(e){var t=parseInt(e.target.getAttribute("data-value"));N.orderBy=Ae[t].value;var a=te(N);s.push(a)}function ce(e){"ASC"===N.sort?N.sort="DESC":N.sort="ASC";var t=te(N);s.push(t)}function se(e){var t,a=e.target.value,r=e.target.name;-1===ae(P,"eid",a)?(t=Object(ie.a)(P)).push({eid:a,title:r}):t=P.filter(function(e){return e.eid!==a}),B(t),O.setItem("selectedPapersList",JSON.stringify(t))}function oe(e){var t;if(Z(P,p,"eid")){var a=p.map(function(e){return{eid:e.eid,title:e.title}});t=P.filter(function(e){return!a.some(function(t){return t.eid===e.eid})})}else{var r=p.map(function(e){return{eid:e.eid,title:e.title}}),n=[].concat(Object(ie.a)(r),Object(ie.a)(P));t=Fe.uniqBy(n,"eid")}B(t),O.setItem("selectedPapersList",JSON.stringify(t))}function ue(){return(ue=Object(d.a)(m.a.mark(function e(t){var r,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==P.length){e.next=5;break}alert("the list is empty!"),e.next=15;break;case 5:return r=P.map(function(e){return e.eid}),e.next=8,we.postPaperIntoProject({arrayEid:r,project_id:a});case 8:if(!(n=e.sent)||!n.message){e.next=12;break}return k.setError(n),e.abrupt("return",null);case 12:B([]),O.removeItem("selectedPapersList"),alert("insert completed");case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pe(){return(pe=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),""===T?alert("search string is empty"):(N.query=T,N.scopus=q.scopus,N.googleScholar=q.googleScholar,N.arXiv=q.arXiv,N.searchBy=J,N.year=W,a=te(N),s.push(a));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(e){var t;switch(e.target.name){case"query":L(e.target.value);break;case"scopus":(t=Object(X.a)({},q)).scopus=!q.scopus,R(t);break;case"googleScholar":(t=Object(X.a)({},q)).googleScholar=!q.googleScholar,R(t);break;case"arXiv":(t=Object(X.a)({},q)).arXiv=!q.arXiv,R(t);break;case"searchBy":H(e.target.value);break;case"year":$(e.target.value)}}Object(l.useEffect)(function(){var e=!0;return re!==N.sort&&(ne(N.sort),document.getElementById("ani-order-arrow")&&document.getElementById("ani-order-arrow").beginElement()),function(){var t=Object(d.a)(m.a.mark(function t(){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(L(N.query),R({scopus:N.scopus,googleScholar:N.googleScholar,arXiv:N.arXiv}),H(N.searchBy),$(N.year),""===N.query){t.next=10;break}return g(!1),t.next=8,fe.search(N);case 8:a=t.sent,e&&a&&"Not Found"===a.message?(f([]),j(0),g(!0)):e&&a&&a.message?k.setError(a):e&&a&&(f(a.results),j(a.totalResults),g(!0));case 10:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[a,N.query,N.orderBy,N.searchBy,N.sort,N.year,N.start,N.count,N.scopus,N.googleScholar,N.arXiv]);var de=c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{className:""===N.query?"search-form":"search-form small",onSubmit:function(e){return pe.apply(this,arguments)}},c.a.createElement("div",{style:{position:"relative"}},c.a.createElement("input",{type:"text",placeholder:"search",name:"query",value:T,onChange:me}),c.a.createElement("button",{className:"go-search",type:"submit",value:"Submit"},c.a.createElement(Se,null)),c.a.createElement(i.b,{to:"/projects/"+a+"/searchsimilar"},c.a.createElement("button",{className:"go-similar",type:"button"},c.a.createElement(Ce,null)))),c.a.createElement("div",{className:"option-holder"},c.a.createElement("label",null,"Source:"),c.a.createElement("br",null),c.a.createElement("div",{className:"checkboxes-holder"},c.a.createElement(ke,{label:"Scopus",name:"scopus",val:"",isChecked:q.scopus,handler:me}),c.a.createElement(ke,{label:"Google Scholar",name:"googleScholar",val:"",isChecked:q.googleScholar,handler:me}),c.a.createElement(ke,{label:"arXiv",name:"arXiv",val:"",isChecked:q.arXiv,handler:me})),c.a.createElement("label",null,"Search by:"),c.a.createElement("br",null),c.a.createElement("div",{className:"checkboxes-holder"},c.a.createElement(Oe,{label:De[0].label,name:"searchBy",val:De[0].value,isChecked:J===De[0].value,handler:me}),c.a.createElement(Oe,{label:De[1].label,name:"searchBy",val:De[1].value,isChecked:J===De[1].value,handler:me}),c.a.createElement(Oe,{label:De[2].label,name:"searchBy",val:De[2].value,isChecked:J===De[2].value,handler:me}),c.a.createElement(Oe,{label:De[3].label,name:"searchBy",val:De[3].value,isChecked:J===De[3].value,handler:me})),c.a.createElement("label",null,"Year:"),c.a.createElement("br",null),c.a.createElement("div",{className:"checkboxes-holder"},Xe.map(function(e,t){return c.a.createElement(Oe,{key:t,label:e,name:"year",val:e,isChecked:W===e,handler:me})}))))),he="";if(!1===v)he=c.a.createElement("div",{className:"paper-card-holder"},c.a.createElement("div",{className:"paper-card-holder-head",style:{pointerEvents:"none"}},c.a.createElement("div",{className:"select-all"},c.a.createElement(ke,{label:"Select All",name:"select_all",val:"",isChecked:!1,handler:oe})),c.a.createElement("div",{className:"order"},c.a.createElement("label",null,"sort by:"),c.a.createElement(_e,{options:Ae,selected:ae(Ae,"value",N.orderBy),handler:le}),c.a.createElement("button",{type:"button",onClick:ce},c.a.createElement(Te,{display:!0,up:N.sort})))),c.a.createElement(Re,{selectedPapersList:P}),c.a.createElement("div",{className:"search-loading-holder"},c.a.createElement(G,{class:"small"})));else if(0===p.length&&""!==N.query)he=c.a.createElement("div",{className:"not-found"}," not found :( ");else if(p.length>0&&""!==N.query){var Ee=P.map(function(e){return e.eid});he=c.a.createElement("div",{className:"paper-card-holder"},c.a.createElement("div",{className:"paper-card-holder-head"},c.a.createElement("div",{className:"select-all"},c.a.createElement(ke,{label:"Select All",name:"select_all",val:"",isChecked:Z(P,p,"eid"),handler:oe})),c.a.createElement("div",{className:"order"},c.a.createElement("label",null,"sort by:"),c.a.createElement(_e,{options:Ae,selected:ae(Ae,"value",N.orderBy),handler:le}),c.a.createElement("button",{type:"button",onClick:ce},c.a.createElement(Te,{display:!0,up:N.sort})))),c.a.createElement(Re,{selectedPapersList:P,handlePaperSelection:se}),c.a.createElement(Pe,{papersList:p,handlePaperSelection:se,selectedEidList:Ee}),c.a.createElement(Q,{start:N.start,count:N.count,totalResults:w,path:n.url}))}return c.a.createElement(c.a.Fragment,null,de,c.a.createElement("form",{className:"search-results",onSubmit:function(e){return ue.apply(this,arguments)}},he))};function Me(){return(Me=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=I.home+I.pdf_parse_server,e.next=3,B.postFile(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ze={updatePdf:function(e){return Me.apply(this,arguments)},abortRequest:B.abortRequest},Je=function(e){return c.a.createElement("svg",{id:"go-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("polyline",{className:"st1-go",points:"371.7,481.9 500,609.9 628.3,481.9 ",transform:"matrix(0,-1.4834458,1.4856134,0,-92.453824,1228.1491)"}),c.a.createElement("line",{className:"st0-go",x1:"810.69312",y1:"486.42624",x2:"206.34099",y2:"486.42624"}))},He=function(e){e.close;var t=e.style,a=e.project_id,r=e.input,n=e.handler,s=e.paperInfo,o=e.fetching,u=e.setPaperInfo,p=e.setPaperFile,h=e.history,f="",E="",b=Object(l.useRef)(null);function v(){return(v=Object(d.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b.current.files[0]&&p(b.current.files[0]);case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return f=o?c.a.createElement("div",{className:"load-icon-similar-paper"},c.a.createElement(G,null)):s&&s.title?c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",{className:"similar-paper-title"},s.title),c.a.createElement(pe.a,{text:s.abstract,lines:4,ellipsis:"...",className:"similar-paper-paragraph",moreText:"more",lessText:"less"})):c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:"similar-description"},"Search for Similar Papers"),c.a.createElement("div",{className:"DOI-holder"},c.a.createElement("input",{type:"text",placeholder:"type DOI, EID, or paper title",value:r,onChange:n,name:"query"}),c.a.createElement("button",{className:"go-search-similar DOI-btn",type:"submit",value:"Submit"},c.a.createElement(Je,null))),c.a.createElement("p",{className:"or"},"or"),c.a.createElement("div",{className:"file-input-container"},c.a.createElement("input",{type:"file",id:"real-input",ref:b,onChange:function(){return v.apply(this,arguments)}}),c.a.createElement("button",{type:"button",className:"browse-btn",onClick:function(){b.current.click()}},"Upload a Paper"))),E=s?c.a.createElement("button",{type:"button",className:"close-btn red-x",onClick:function(e){u(void 0),p(void 0),h.push({})}},c.a.createElement($,null)):c.a.createElement(i.b,{to:"/projects/"+a+"/search"},c.a.createElement("button",{type:"button",className:"close-btn"},c.a.createElement($,null))),c.a.createElement("div",{style:Object(X.a)({},t),className:"light-modal similar-search-paper-upload"},E,f)},Ye=a(117),Ve=[{label:"Title",value:"title"},{label:"Date",value:"date"}],Ge=(new Date).getFullYear()+2,We=["all"].concat(Object(ie.a)(Ye.range(2017,Ge).map(String))),$e=function(e){var t=e.selectedPapersList,a=e.handlePaperSelection;return c.a.createElement("div",{className:"selected-papers-list",style:{opacity:t.length>0?"1.0":"0.0",pointerEvents:t.length>0?"auto":"none"}},c.a.createElement("h3",null,"SELECTED PAPERS"," ",c.a.createElement("br",null),c.a.createElement("span",null,"(total : ",t.length,")")),c.a.createElement("div",{className:"submission-wrapper"},c.a.createElement("div",{className:"papers-wrapper",style:{border:t.length>0?"":"0px"}},c.a.createElement("div",{className:"papers-flex",style:{padding:t.length>0?"":"0px"}},t.map(function(e,t){return c.a.createElement("p",{key:t},c.a.createElement("span",null,e.title),c.a.createElement("button",{type:"button",className:"remove-btn",name:e.title,value:e.eid,onClick:function(t){a({target:{name:e.title,value:e.eid}})}},c.a.createElement(Le,null)))}))),c.a.createElement("button",{style:{border:t.length>0?"":"0px",margin:t.length>0?"":"0px",height:t.length>0?"":"0px",pointerEvents:t.length>0?"auto":"none"},className:"ti-btn add-resultpaper-btn",type:"submit",value:"Submit"},c.a.createElement("div",{className:"btn-title"},"Add Selected Paper"),c.a.createElement("div",{className:"btn-icon"}," "))))};var Ke=function(e){var t,a,r=e.project_id,n=e.location,s=e.match,o=e.history,i=Object(l.useState)([]),u=Object(h.a)(i,2),p=u[0],f=u[1],E=Object(l.useState)(!0),b=Object(h.a)(E,2),v=b[0],g=b[1],y=Object(l.useState)(0),x=Object(h.a)(y,2),w=x[0],j=x[1],k=Object(l.useContext)(A),N=function(e){var t,a=U.a.parse(e),r=a.query||"",n=a.orderBy||"title",l=a.sort||"ASC",c=a.start||0,s=a.count||10;t=void 0===a.scopus||"true"===a.scopus;var o="true"===a.googleScholar,i="true"===a.arXiv,u=a.year||"all";return{query:r,orderBy:n,sort:l,scopus:t,googleScholar:o,arXiv:i,year:u,start:c,count:s}}(n.search),O=window.localStorage;window.localStorage||console.log("the browser must be support localStorage"),t=O.getItem("selectedPapersList")?JSON.parse(O.getItem("selectedPapersList")):[],a=O.getItem("similarPaperData")?JSON.parse(O.getItem("similarPaperData")):null;var S=Object(l.useState)(t),C=Object(h.a)(S,2),P=C[0],B=C[1],I=Object(l.useState)(""),_=Object(h.a)(I,2),T=_[0],L=_[1],F=Object(l.useState)({scopus:!0,googleScholar:!1,arXiv:!1}),D=Object(h.a)(F,2),q=D[0],R=D[1],M=Object(l.useState)("all"),z=Object(h.a)(M,2),J=z[0],H=z[1],Y=Object(l.useState)(a),V=Object(h.a)(Y,2),W=V[0],$=V[1],K=Object(l.useState)(void 0),ee=Object(h.a)(K,2),re=ee[0],ne=ee[1],le=Object(l.useState)(N.sort),ce=Object(h.a)(le,2),se=ce[0],oe=ce[1],ue=Object(l.useState)(!1),pe=Object(h.a)(ue,2),me=pe[0],de=pe[1],he=Object(l.useState)(!1),Ee=Object(h.a)(he,2),be=Ee[0],ve=Ee[1];function ge(e){var t;switch(e.target.name){case"query":L(e.target.value);break;case"scopus":(t=Object(X.a)({},q)).scopus=!q.scopus,R(t);break;case"googleScholar":(t=Object(X.a)({},q)).googleScholar=!q.googleScholar,R(t);break;case"arXiv":(t=Object(X.a)({},q)).arXiv=!q.arXiv,R(t);break;case"year":H(e.target.value)}}Object(l.useEffect)(function(){return console.log(N),se!==N.sort&&(oe(N.sort),document.getElementById("ani-order-arrow")&&document.getElementById("ani-order-arrow").beginElement()),function(){var e=Object(d.a)(m.a.mark(function e(){var t,a,r,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0,L(N.query),R({scopus:N.scopus,googleScholar:N.googleScholar,arXiv:N.arXiv}),H(N.year),!W){e.next=13;break}return g(!1),e.next=8,fe.searchSimilar({query:"Trento",start:N.start,count:N.count});case 8:t=e.sent,f(t.results),g(!0),e.next=52;break;case 13:if(!re){e.next=36;break}if(console.log("FILE NAME : "+re.name),/\.(pdf|PDF)$/.test(re.name)&&-1!==re.type.indexOf("application/pdf")){e.next=19;break}alert("the file must be a pdf"),e.next=34;break;case 19:return g(!1),ve(!0),console.log("FETCHING PARSE PDF"),(a=new FormData).append("file",re),console.log("CALLING THE PAPER PARSER SERVICE"),e.next=27,ze.updatePdf(a);case 27:return(t=e.sent)&&t.message?(alert("Error during parsing file"),g(!0),ve(!1)):(console.log(t),$(t),ve(!1)),e.next=31,fe.searchSimilar({query:"Trento",start:N.start,count:N.count});case 31:t=e.sent,f(t.results),g(!0);case 34:e.next=52;break;case 36:if(""===N.query){e.next=51;break}return g(!1),ve(!0),e.next=41,fe.search({query:"Torino"});case 41:return r=e.sent,$(r.results[0]),ve(!1),e.next=46,fe.searchSimilar({query:"Trento",start:N.start,count:N.count});case 46:n=e.sent,console.log(n),n&&"Not Found"===n.message?(f([]),j(0),g(!0)):n&&n.message?k.setError(n):null!==n&&(f(n.results),j(n.totalResults),g(!0)),e.next=52;break;case 51:console.log("no file (& no similarPaperString)");case 52:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),function(){localStorage.removeItem("similarPaperData")}},[r,re,N.query,N.orderBy,N.sort,N.year,N.start,N.count,N.scopus,N.googleScholar,N.arXiv]),Object(l.useEffect)(function(){console.log("effecting"),W?O.setItem("similarPaperData",JSON.stringify(W)):O.removeItem("similarPaperData")},[W]);var ye=c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{className:""!==N.query||re||W?"search-form small":"search-form",style:{marginTop:me?"30px":"60px"},onSubmit:function(e){if(console.log("SUBMITTING SEARCH"),e&&e.preventDefault(),console.log("similarity search was called"),""!==T||re){re?(console.log("there's a file"),N.query=""):(console.log("there isn't a file"),N.query=T),N.scopus=q.scopus,N.googleScholar=q.googleScholar,N.arXiv=q.arXiv,N.year=J;var t=te(N);o.push(t)}else alert("similar paper string is empty")}},c.a.createElement(He,{style:{boxShadow:"0px 0px 3px -1px rgba(0, 0, 0, 0.25)"},project_id:r,close:de,handler:ge,input:T,paperInfo:W,fetching:be,setPaperInfo:$,setPaperFile:ne,history:o}),c.a.createElement("div",{className:"option-holder"},c.a.createElement("label",null,"Source:"),c.a.createElement("br",null),c.a.createElement("div",{className:"checkboxes-holder"},c.a.createElement(ke,{label:"Scopus",name:"scopus",val:"",isChecked:q.scopus,handler:ge}),c.a.createElement(ke,{label:"Google Scholar",name:"googleScholar",val:"",isChecked:q.googleScholar,handler:ge}),c.a.createElement(ke,{label:"arXiv",name:"arXiv",val:"",isChecked:q.arXiv,handler:ge})),c.a.createElement("label",null,"Year:"),c.a.createElement("br",null),c.a.createElement("div",{className:"checkboxes-holder"},We.map(function(e,t){return c.a.createElement(Oe,{key:t,label:e,name:"year",val:e,isChecked:J===e,handler:ge})}))))),xe="";function je(e){var t=parseInt(e.target.getAttribute("data-value"));N.orderBy=Ve[t].value;var a=te(N);o.push(a)}function Ne(e){"ASC"===N.sort?N.sort="DESC":N.sort="ASC";var t=te(N);o.push(t)}function Se(e){var t,a=e.target.value,r=e.target.name;-1===ae(P,"eid",a)?(t=Object(ie.a)(P)).push({eid:a,title:r}):t=P.filter(function(e){return e.eid!==a}),B(t),O.setItem("selectedPapersList",JSON.stringify(t))}function Ce(e){var t;if(Z(P,p,"eid")){var a=p.map(function(e){return{eid:e.eid,title:e.title}});t=P.filter(function(e){return!a.some(function(t){return t.eid===e.eid})})}else{var r=p.map(function(e){return{eid:e.eid,title:e.title}}),n=[].concat(Object(ie.a)(r),Object(ie.a)(P));t=Ye.uniqBy(n,"eid")}B(t),O.setItem("selectedPapersList",JSON.stringify(t))}function Be(){return(Be=Object(d.a)(m.a.mark(function e(t){var a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=P.map(function(e){return e.eid}),e.next=4,we.postPaperIntoProject({arrayEid:a,project_id:r});case 4:if(!(n=e.sent)||!n.message){e.next=8;break}return k.setError(n),e.abrupt("return",null);case 8:B([]),O.removeItem("selectedPapersList"),alert("insert completed");case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}if(!1===v)xe=c.a.createElement("div",{className:"paper-card-holder"},c.a.createElement("div",{className:"paper-card-holder-head",style:{pointerEvents:"none"}},c.a.createElement("div",{className:"select-all"},c.a.createElement(ke,{label:"Select All",name:"select_all",val:"",isChecked:!1,handler:Ce})),c.a.createElement("div",{className:"order"},c.a.createElement("label",null,"sort by:"),c.a.createElement(_e,{options:Ve,selected:ae(Ve,"value",N.orderBy),handler:je}),c.a.createElement("button",{type:"button",onClick:Ne},c.a.createElement(Te,{display:!0,up:N.sort})))),c.a.createElement($e,{selectedPapersList:P}),c.a.createElement("div",{className:"search-loading-holder"},c.a.createElement(G,{class:"small"})));else if(0===p.length&&(""!==N.query||re||W))xe=c.a.createElement("div",{className:"not-found"}," not found :( ");else if(p.length>0&&(""!==N.query||re||W)){var Ie=P.map(function(e){return e.eid});xe=c.a.createElement("div",{className:"paper-card-holder"},c.a.createElement("div",{className:"paper-card-holder-head"},c.a.createElement("div",{className:"select-all"},c.a.createElement(ke,{label:"Select All",name:"select_all",val:"",isChecked:Z(P,p,"eid"),handler:Ce})),c.a.createElement("div",{className:"order"},c.a.createElement("label",null,"sort by:"),c.a.createElement(_e,{options:Ve,selected:ae(Ve,"value",N.orderBy),handler:je}),c.a.createElement("button",{type:"button",onClick:Ne},c.a.createElement(Te,{display:!0,up:N.sort})))),c.a.createElement($e,{selectedPapersList:P,handlePaperSelection:Se}),c.a.createElement(Pe,{papersList:p,handlePaperSelection:Se,selectedEidList:Ie}),c.a.createElement(Q,{start:N.start,count:N.count,totalResults:w,path:s.url}))}return c.a.createElement(c.a.Fragment,null,ye,c.a.createElement("form",{className:"search-results",onSubmit:function(e){return Be.apply(this,arguments)}},xe))},Qe=[{value:"date_created",label:"Recently Added"},{value:"title",label:"Title"},{value:"authors",label:"Authors"}];var Ze=function(e){var t,a=e.project_id,r=e.location,n=e.match,s=e.history,o=Object(l.useState)([]),i=Object(h.a)(o,2),u=i[0],p=i[1],f=Object(l.useState)(0),E=Object(h.a)(f,2),b=E[0],v=E[1],g=Object(l.useState)(!1),y=Object(h.a)(g,2),x=y[0],w=y[1],j=Object(l.useContext)(A),k=function(e){var t=U.a.parse(e),a=t.count||10,r=t.start||0,n=t.orderBy||"date_created",l=t.sort||"ASC";return"date_created"===n&&(l="DESC"),{orderBy:n,sort:l,start:r,count:a}}(r.search),N=Object(l.useState)(k.sort),O=Object(h.a)(N,2),S=O[0],C=O[1];function P(e){var t=parseInt(e.target.getAttribute("data-value"));"date_created"===k.orderBy&&(k.sort="ASC"),k.orderBy=Qe[t].value;var a=te(k);s.push(a)}function B(e){"ASC"===k.sort?k.sort="DESC":k.sort="ASC";var t=te(k);s.push(t)}return Object(l.useEffect)(function(){var e=!0;return"date_created"!==k.orderBy&&S!==k.sort&&(C(k.sort),document.getElementById("ani-order-arrow").beginElement()),function(){var t=Object(d.a)(m.a.mark(function t(){var r;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w(!1),t.next=3,we.getPapersList(Object(X.a)({project_id:a},k));case 3:r=t.sent,e&&r&&"Not Found"===r.message?(p([]),v(0),w(!0)):e&&r&&r.message?j.setError(r):e&&r&&(p(r.results),v(r.totalResults),w(!0));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[k.start,k.count,k.sort,k.orderBy]),t=!1===x?c.a.createElement("div",{className:"paper-card-holder"},c.a.createElement("div",{className:"order",style:{pointerEvents:"none"}},c.a.createElement("label",null,"sort by:"),c.a.createElement(_e,{options:Qe,selected:ae(Qe,"value",k.orderBy),handler:P}),c.a.createElement("button",{type:"button",onClick:B},c.a.createElement(Te,{display:"date_created"!==k.orderBy,up:S}))),c.a.createElement(G,{class:"small"})):c.a.createElement("div",{className:"paper-card-holder"},c.a.createElement("div",{className:"order"},c.a.createElement("label",null,"sort by:"),c.a.createElement(_e,{options:Qe,selected:ae(Qe,"value",k.orderBy),handler:P}),c.a.createElement("button",{type:"button",onClick:B},c.a.createElement(Te,{display:"date_created"!==k.orderBy,up:S}))),c.a.createElement(Be,{papersList:u,location:r,history:s}),c.a.createElement(Q,{start:k.start,count:k.count,totalResults:b,path:n.url})),t=c.a.createElement("div",{className:"papers-list"},t)},et=function(e){var t=e.options,a=e.form,r=e.name,n=Object(l.useState)(!1),s=Object(h.a)(n,2),o=s[0],i=s[1],u=Object(l.useState)(0),p=Object(h.a)(u,2),m=p[0],d=p[1];function f(e){var t=parseInt(e.target.getAttribute("data-value"));d(t)}function E(e){document.getElementById("ani-select-arrow").beginElement(),i(!o)}return Object(l.useEffect)(function(){a.setFieldValue(r,t[m].value)},[m]),c.a.createElement("div",{className:"custom-select"},c.a.createElement("div",{className:"selected",tabIndex:-2,onBlur:E,onFocus:E},t[m].label," ",c.a.createElement("div",{className:"arrow"},c.a.createElement(Ie,{focused:o}))),c.a.createElement("div",{className:"options-holder",style:{fontSize:o?"15px":"0px",borderBottom:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderLeft:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderRight:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderTop:"none"}},t.map(function(e,t){return c.a.createElement("div",{key:t,"data-value":t,className:"option",style:{padding:o?"2px":"0px"},onMouseDown:f},e.label)})))},tt=[{value:"article",label:"Article"},{value:"book_chapter",label:"Book Chapter"},{value:"conf_publication",label:"Conf. Publication"}];var at=function(e){var t=a(75),r=(a(277),t.object().shape({title:t.string().required("please enter a title"),authors:t.string().required("please enter an author"),year:t.number().required("please enter a year").min(1e3).max((new Date).getFullYear()+1).integer(),abstract:t.string().required("please enter the abstract")})),n=Object(l.useContext)(A);return c.a.createElement(c.a.Fragment,null,c.a.createElement(W.c,{initialValues:{title:e.customPaper&&e.customPaper.title||"",authors:e.customPaper&&e.customPaper.authors||"",year:e.customPaper&&e.customPaper.year||"",abstract:e.customPaper&&e.customPaper.abstract||"",document_type:e.customPaper&&e.customPaper.document_type||"",doi:e.customPaper&&e.customPaper.doi||""},validationSchema:r,onSubmit:function(){var t=Object(d.a)(m.a.mark(function t(a,r){var l,c,s;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return l=r.setSubmitting,void 0===a.doi&&(a.doi=""),c=Object(X.a)({},a,{year:a.year.toString(),source_title:a.title,link:"custom_paper",source:"slr_custom_papers",abstract_structured:"0",filter_oa_include:"0",filter_study_include:"0",notes:"",manual:"true"}),console.log(c),t.next=6,we.postCustomPaperIntoProject({paper:c,project_id:e.projectId});case 6:(s=t.sent)&&s.message?n.setError(s):e.history.push(e.url),l(!1);case 9:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),validateOnBlur:!1},function(e){var t=e.errors,a=e.touched,r=e.isSubmitting;return c.a.createElement(W.b,{className:"new-paper-form"},c.a.createElement(W.a,{style:{borderBottom:t.title&&a.title?"1px solid #d81e1e":""},id:"title",name:"title",type:"text",placeholder:"Paper Title"}),c.a.createElement("div",{className:"new-paper-form-ad"},c.a.createElement("div",{className:"author-year"},c.a.createElement(W.a,{style:{borderBottom:t.authors&&a.authors?"1px solid #d81e1e":""},name:"authors",type:"text",placeholder:"paper author"}),c.a.createElement(W.a,{style:{borderBottom:t.year&&a.year?"1px solid #d81e1e":""},name:"year",type:"number",placeholder:"year"})),c.a.createElement("div",{className:"type-doi"},c.a.createElement(W.a,{name:"document_type",render:function(e){var t=e.field,a=e.form;return c.a.createElement(et,Object.assign({options:tt},t,{form:a}))}}),c.a.createElement(W.a,{name:"doi",type:"text",placeholder:"DOI(optional)"}))),c.a.createElement(W.a,{style:{borderBottom:t.abstract&&a.abstract?"1px solid #d81e1e":""},name:"abstract",placeholder:"Paper Abstract",component:"textarea"}),c.a.createElement("button",{type:"submit",disabled:r||t.title&&a.title||t.authors&&a.authors||t.year&&a.year||t.abstract&&a.abstract},"Add paper"))}))};var rt=function(e){var t=e.projectId,a=e.url,r=e.history,n=Object(l.useState)(!1),s=Object(h.a)(n,2),o=s[0],i=s[1],u=Object(l.useState)(void 0),p=Object(h.a)(u,2),f=p[0],E=p[1],b=Object(l.useState)(!1),v=Object(h.a)(b,2),g=v[0],y=v[1],x=Object(l.useRef)(null);function w(){return(w=Object(d.a)(m.a.mark(function e(){var t,a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=x.current.files[0])){e.next=14;break}if(/\.(pdf|PDF)$/.test(t.name)&&-1!==t.type.indexOf("application/pdf")){e.next=6;break}alert("the file must be a pdf"),e.next=14;break;case 6:return i(!0),(a=new FormData).append("file",t),e.next=11,ze.updatePdf(a);case 11:(r=e.sent)&&r.message?alert("Error during parsing file"):(E(r),y(!0)),i(!1);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}return g||o?o?c.a.createElement("div",{className:"new-paper-page-wrapper"},c.a.createElement("div",{className:"file-input-container"},c.a.createElement("input",{type:"file",id:"real-input"}),c.a.createElement("button",{type:"button",className:"browse-btn"},c.a.createElement(G,null))),"or",c.a.createElement("br",null),c.a.createElement("button",{type:"button",onClick:function(){i(!1),y(!0)}},"abort and insert data manually")):c.a.createElement(at,{projectId:t,url:a,history:r,customPaper:f}):c.a.createElement("div",{className:"new-paper-page-wrapper"},c.a.createElement("div",null,c.a.createElement("div",{className:"file-input-container"},c.a.createElement("input",{type:"file",name:"file",id:"real-input",ref:x,onChange:function(){return w.apply(this,arguments)}}),c.a.createElement("button",{type:"button",className:"browse-btn",onClick:function(){x.current.click()}},"Upload a Paper")),"or",c.a.createElement("br",null),c.a.createElement("button",{type:"button",onClick:function(){y(!0)}},"insert data manually")))},nt=function(e){var t=e.description,a=e.update,r=e.date_last_modified,n=e.date_created,s=Object(l.useState)(!1),o=Object(h.a)(s,2),i=o[0],u=o[1];function p(e){return c.a.createElement("span",{className:"date"},e.slice(0,10)," at ",e.slice(11,19))}return c.a.createElement("div",{className:i?"project-description":"project-description hidden-form-description"},c.a.createElement("h2",null,"Description:"),c.a.createElement("p",{style:{fontSize:i?"0px":"15px"}}," ",t),c.a.createElement("form",{className:"edit-project-description",style:{height:i?"":"0px"}},c.a.createElement("textarea",{id:"edit-project-description-input",defaultValue:t,style:{width:i?"100%":"0%",padding:i?"":"0px",height:i?"":"0px"},onBlur:function(e){console.log("blurring"),u(!1)}}),c.a.createElement("button",{className:"edit-button",onMouseDown:function(e){console.log("CLICK"),i?a():(setTimeout(function(){document.getElementById("edit-project-description-input").focus()},100),u(!0),console.log(i))},type:"button"},c.a.createElement(f,{confirm:i}))),c.a.createElement("h2",null,"Additional info:"),c.a.createElement("p",{className:"project-date-info"}," ",c.a.createElement("span",null,"Created")," ",p(n)," "),c.a.createElement("p",{className:"project-date-info"}," ",c.a.createElement("span",null,"Last edited")," ",p(r)," "))},lt=function(e){var t=e.name,a=e.update,r=Object(l.useState)(!1),n=Object(h.a)(r,2),s=n[0],o=n[1];return c.a.createElement("div",{className:s?"nav-elements":"nav-elements hidden-form"}," ",c.a.createElement("h2",{style:{fontSize:s?"0px":"21px"}},t),c.a.createElement("form",{className:"edit-project-name",onClick:function(e){s||(document.getElementById("edit-project-name-input").focus(),o(!s))},onSubmit:function(e){e.preventDefault()}},c.a.createElement("input",{type:"text",id:"edit-project-name-input",defaultValue:t,style:{width:s?"":"0px",padding:s?"":"0px"},onBlur:function(e){o(!1)}}),c.a.createElement("button",{className:"edit-button",onMouseDown:function(e){s&&(a(),o(!s))},type:"button"},c.a.createElement(f,{confirm:s}))))},ct=function(e){var t=e.match,a=e.notFound,r=window.location.hash.substr(window.location.hash.length-9),n="#"+t.url===window.location.hash.split("?")[0]||"/addpaper"===r||"addpaper/"===r;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"project-nav-link-wrapper",style:{display:a||"/addpaper"===r||"addpaper/"===r?"none":""}},c.a.createElement("div",{className:"nav-link"},c.a.createElement(i.b,{to:t.url},"papers")),c.a.createElement("div",{className:"nav-link"},c.a.createElement(i.b,{to:ee(t.url,"/search")},"search")),c.a.createElement(oe.b,{flipKey:n},c.a.createElement(oe.a,{flipId:"underline"},c.a.createElement("div",{className:n?"underline underline-to-left":"underline underline-to-right"})))))},st=function(e){var t=Object(l.useState)({data:{name:"loading..."}}),a=Object(h.a)(t,2),r=a[0],n=a[1],s=Object(l.useState)(!1),o=Object(h.a)(s,2),p=o[0],f=o[1],E=Object(l.useState)(!1),b=Object(h.a)(E,2),v=b[0],g=b[1],y=Object(l.useContext)(A),x=e.match.params.id;function w(){return j.apply(this,arguments)}function j(){return(j=Object(d.a)(m.a.mark(function e(){var t,a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("edit-project-name-input").value,a=document.getElementById("edit-project-description-input").value,t===r.data.name&&a===r.data.description){e.next=7;break}return e.next=5,V.putProject(x,{name:t,description:a});case 5:(n=e.sent)&&n.message?y.setError(n):n&&null!==n&&(console.log("UPDATED SUCCESSFULLY!"),window.location.reload());case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(l.useEffect)(function(){"loading..."===r.data.name?y.setTitle(c.a.createElement("div",{className:"nav-elements"}," ",c.a.createElement("h2",{className:"static-title"},r.data.name)," ")):(y.setTitle(c.a.createElement(lt,{name:r.data.name,update:w})),y.setProjectName(r.data.name))},[r]),Object(l.useEffect)(function(){var e=!0;return f(!1),function(){var t=Object(d.a)(m.a.mark(function t(){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("fetch project page"),t.next=3,V.getProject(x);case 3:a=t.sent,e&&a&&a.message?y.setError(a):e&&a&&(n(a),f(!0));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[x]),!1===p?c.a.createElement(G,null):c.a.createElement("div",{className:"project-wrapper"},c.a.createElement(ct,{match:e.match,notFound:v}),c.a.createElement(u.c,null,c.a.createElement(u.a,{exact:!0,path:e.match.url,render:function(e){return g(!1),c.a.createElement(c.a.Fragment,null,c.a.createElement(nt,{description:r.data.description,update:w,date_last_modified:r.date_last_modified,date_created:r.date_created}),c.a.createElement(Ze,{project_id:x,location:e.location,match:e.match,history:e.history}),c.a.createElement(i.b,{to:ee(e.match.url,"/addpaper")},c.a.createElement("button",{className:"bottom-left-btn add-custompaper-btn"},c.a.createElement("div",{className:"btn-title"},"Add Custom Paper"),c.a.createElement("div",{className:"btn-icon"}," "))))}}),c.a.createElement(u.a,{exact:!0,path:e.match.url+"/search",render:function(e){return g(!1),c.a.createElement(Ue,Object.assign({project_id:x},e))}}),c.a.createElement(u.a,{exact:!0,path:e.match.url+"/searchsimilar",render:function(e){return g(!1),c.a.createElement(Ke,Object.assign({project_id:x},e))}}),c.a.createElement(u.a,{path:e.match.url+"/addpaper",render:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(i.b,{className:"back",to:e.match.url},"  "),c.a.createElement(rt,{projectId:r.id,url:e.match.url,history:e.history}))}})))},ot=function(e){var t="",a=Object(l.useContext)(A);return console.log(typeof a.userFetch),console.log(a.userFetch),console.log(a.user),t=a.userFetch?c.a.createElement(G,null):a.user?c.a.createElement(u.c,null,c.a.createElement(u.a,{exact:!0,path:"/",render:function(){return c.a.createElement(q,null)}}),c.a.createElement(u.a,{exact:!0,path:"/projects",render:function(e){return c.a.createElement(se,e)}}),c.a.createElement(u.a,{path:"/projects/:id",render:function(e){return c.a.createElement(st,e)}}),c.a.createElement(u.a,{render:function(e){return c.a.createElement("div",null,"404")}})):c.a.createElement(q,null),c.a.createElement("div",{className:"main-wrapper"},t)},it=function(e){var t=Object(l.useContext)(A),a=c.a.createElement("div",{className:"user"},c.a.createElement("h3",null,"you're not logged in"));return t.user&&(a=c.a.createElement("div",{className:"user"},c.a.createElement("img",{className:"face",alt:"profile",src:t.user.image}),c.a.createElement("div",{className:"user-info"},t.user.name,c.a.createElement("br",null),t.user.surname))),a},ut=function(e){return c.a.createElement("svg",{id:"menu-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("path",{className:"st0",d:"M214,482.1"}),c.a.createElement("line",{className:"st-t",x1:"172",y1:"482.1",x2:"172",y2:"482.1"}),c.a.createElement("line",{className:"st-m",x1:"500",y1:"482.1",x2:"500",y2:"482.1"}),c.a.createElement("line",{className:"st-b",x1:"828",y1:"482.1",x2:"828",y2:"482.1"}))},pt=function(e){return I.menu_list.map(function(t,a){return c.a.createElement("div",{key:a},c.a.createElement(i.b,{to:t.link,className:"menu-option",onMouseUp:e.handleMenuBlur},t.content))})},mt=function(e){var t=Object(l.useContext)(A),a=Object(l.useState)(!1),r=Object(h.a)(a,2),n=r[0],s=r[1],o=Object(l.useState)(!0),i=Object(h.a)(o,2),u=i[0],p=i[1];function m(){s(!n),p(!1)}function d(e){s(!1)}var f="modal side-menu up",E="button-wrapper close";return u&&(f="modal side-menu"),n&&(E="button-wrapper open",f="modal side-menu down"),t.user?c.a.createElement("div",{className:"menu"},c.a.createElement(re,{cls:n?"full-screen-transparent":"",handler:d}),c.a.createElement("div",{className:E,onClick:m},c.a.createElement(ut,null)),c.a.createElement("div",{className:f,tabIndex:-1},c.a.createElement(it,null),c.a.createElement(pt,{handleMenuBlur:d}))):t.userFetch?c.a.createElement("div",{className:"menu"},c.a.createElement(re,{cls:n?"full-screen-transparent":"",handler:d}),c.a.createElement("div",{className:E,onClick:m},c.a.createElement(ut,null)),c.a.createElement("div",{className:f,tabIndex:-1},c.a.createElement("h3",{className:"not-logged"},"logging in..."))):c.a.createElement("div",{className:"menu"},c.a.createElement(re,{cls:n?"full-screen-transparent":"",handler:d}),c.a.createElement("div",{className:E,onClick:m},c.a.createElement(ut,null)),c.a.createElement("div",{className:f,tabIndex:-1},c.a.createElement("h3",{className:"not-logged"},"You're not logged in")))},dt=function(e){var t,a=e.location.pathname.split("/").filter(function(e){return e}),r=Object(l.useContext)(A),n="/",s=[];t=0===a.length?c.a.createElement("div",{key:0}):c.a.createElement(i.b,{key:0,to:n},"Home",c.a.createElement("span",null," > ")),s.push(t);for(var o=0;o<a.length;o++){if(n+="/"===n?a[o]:"/"+a[o],a[o-1]&&"projects"===a[o-1])t=c.a.createElement(i.b,{key:o+1,to:n},r.projectName);else switch(a[o]){case"projects":t=c.a.createElement(i.b,{key:o+1,to:n},"My Projects");break;case"searchsimilar":t=c.a.createElement(i.b,{key:o+1,to:n},"Search for similar papers");break;case"search":t=c.a.createElement(i.b,{key:o+1,to:n},"Search");break;default:t=c.a.createElement(i.b,{key:o+1,to:n},a[o])}s.push(t),o<a.length-1&&s.push(c.a.createElement("span",{key:o+9999}," > "))}return c.a.createElement("div",{className:"breadcrumbs"},s)},ht=a(124),ft=function(e){var t=window.localStorage,a=Object(l.useContext)(A);function r(e){return n.apply(this,arguments)}function n(){return(n=Object(d.a)(m.a.mark(function r(n){var l,c;return m.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!n.tokenId){r.next=8;break}return l={tokenId:n.tokenId},a.setUserFetch(!0),r.next=5,F.postTokenId(l);case 5:(c=r.sent)&&c.message?a.setError(c):c&&(a.setUser(c.user),t.setItem("userToken",c.token),e.history.push("/")),a.setUserFetch(!1);case 8:case"end":return r.stop()}},r)}))).apply(this,arguments)}function s(){return(s=Object(d.a)(m.a.mark(function t(r){var n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("logging out"),a.setUserFetch(!0),t.next=4,F.logoutUser();case 4:(n=t.sent)&&n.message?a.setError(n):n&&(localStorage.removeItem("userToken"),a.setUser(null),e.history.push("/")),a.setUserFetch(!1);case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}return t.getItem("userToken")?c.a.createElement("div",{className:"logout-holder"},c.a.createElement("button",{type:"button",onClick:function(e){return s.apply(this,arguments)}},"Log out")):c.a.createElement("div",{className:"login-holder"},c.a.createElement(ht.GoogleLogin,{clientId:I.google_login_client_id,buttonText:"Login",onSuccess:r,onFailure:r,cookiePolicy:"single_host_origin"}))},Et=function(e){return c.a.createElement(i.a,null,c.a.createElement("div",{className:"app"},c.a.createElement(D,null,c.a.createElement(E,null,c.a.createElement(mt,null)),c.a.createElement(u.c,null,c.a.createElement(u.a,{render:function(e){return c.a.createElement("div",{className:"relative-header"},c.a.createElement(dt,e),c.a.createElement(ft,e))}})),c.a.createElement(ot,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(Et,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[125,1,2]]]);
//# sourceMappingURL=main.830ed54b.chunk.js.map