(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t,a){e.exports=a(279)},279:function(e,t,a){"use strict";a.r(t);var r,n,l=a(0),c=a.n(l),s=a(120),o=a.n(s),i=a(4),u=a(25),p=function(e){return c.a.createElement("div",{className:"main-wrapper"},e.children)},m=a(2),d=function(e){var t=e.confirm;c.a.createElement(c.a.Fragment,null);return t?c.a.createElement("svg",{version:"1.1",id:"confirm-edit-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("polyline",{className:"st-confirm",points:"918,192.3 389.3,807.7 82,450 "})):c.a.createElement("svg",{version:"1.1",id:"edit-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("path",{className:"st-pencil",d:"M224,632.3l-81.6,225.3L367.7,776l0,0L833,310.7c39.4-39.4,39.9-103.3,0.7-142.9c-0.5-0.5-1-1-1.4-1.4 c-39.6-39.2-103.6-38.7-142.9,0.7L224,632.3L224,632.3z"}),c.a.createElement("path",{className:"st-pencil-border",d:"M367.7,776c-24-71.7-71.9-119.6-143.7-143.7"}),c.a.createElement("path",{className:"st-pencil",d:"M805.7,338c-24-71.7-71.9-119.6-143.7-143.7"}))},f=function(e){var t=Object(l.useContext)(E);return c.a.createElement("div",{className:"navigation-wrapper"},c.a.createElement("nav",{className:"main-nav"},t.title),e.children)},h=function(){var e,t=Object(l.useContext)(E);return Object(l.useEffect)(function(){return function(){t.setError(null)}}),e=t.error.payload?c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Error code:"),c.a.createElement("p",null,t.error.payload.statusCode),c.a.createElement("p",null,"Error name:"),c.a.createElement("p",null,t.error.payload.error),c.a.createElement("p",null,"Error message"),c.a.createElement("p",null,t.error.payload.message)):c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Error name:"),c.a.createElement("p",null,t.error.name),c.a.createElement("p",null,"Error message"),c.a.createElement("p",null,t.error.message)),e=c.a.createElement("div",{className:"error-wrapper",style:{textAlign:"center"}},e,c.a.createElement("br",null),c.a.createElement("button",{type:"button",onClick:function(){window.history.back(),t.setError(null)}},c.a.createElement("u",null,"return to previous page")),c.a.createElement("br",null),c.a.createElement("p",null,"or"),c.a.createElement("br",null),c.a.createElement("button",{type:"button",onClick:function(){t.setError(null)}},c.a.createElement("u",null,"refresh")))},E=c.a.createContext(),b=function(e){var t={image:c.a.createElement("img",{className:"face",alt:"profile",src:"https://placekitten.com/100/100"}),name:"Mario",surname:"Rossi"},a=Object(l.useState)(null),r=Object(m.a)(a,2),n=r[0],s=r[1],o=Object(l.useState)(c.a.createElement("div",{className:"nav-elements"}," ",c.a.createElement("h2",{className:"static-title"},"HOME")," ")),i=Object(m.a)(o,2),u=i[0],p=i[1],d=Object(l.useState)(""),f=Object(m.a)(d,2),b={user:t,error:n,setError:s,title:u,setTitle:p,projectName:f[0],setProjectName:f[1]};return n?c.a.createElement(E.Provider,{value:b},c.a.createElement(h,null)):c.a.createElement(E.Provider,{value:b},e.children)},v=function(e){var t=Object(l.useContext)(E);return Object(l.useEffect)(function(){t.setTitle(c.a.createElement("div",{className:"nav-elements"}," ",c.a.createElement("h2",{className:"static-title"},"HOME")," "))},[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("h1",null,"Systematic Literature Review manager"),c.a.createElement("h2",{style:{fontSize:22,fontWeight:"normal"}},"the system right now allows you to"),c.a.createElement("ul",{style:{fontSize:18,fontWeight:"lighter"}},c.a.createElement("li",null,"browse a list of prjects"),c.a.createElement("li",null,"add a new project"),c.a.createElement("li",null,"browse the list of papers on a project"),c.a.createElement("li",null,"search(from scopus) and add papers to a project"),c.a.createElement("li",null,"add custom papers based on a file or form data"),c.a.createElement("li",null,"'fake search' similar papers")),c.a.createElement("h2",{style:{fontSize:22,fontWeight:"normal"}},"notes"),c.a.createElement("ul",{style:{fontSize:18,fontWeight:"lighter"}},c.a.createElement("li",null,c.a.createElement("i",null,"the scopus search works partially(can't retrieve the description)"),c.a.createElement("ul",null,c.a.createElement("li",{style:{fontSize:16}},c.a.createElement("i",null,'from Elsevier developer portal : "The data available depends on your institutional subscriptions, and only when you\'re making calls from within your institutional network are you considered a subscriber"')))),c.a.createElement("li",null,c.a.createElement("i",null,"the options don't affect the search, for now"))))},y=function(e){var t=Object(l.useContext)(E);return c.a.createElement("div",{className:"user"},t.user.image,c.a.createElement("div",{className:"user-info"},t.user.name,c.a.createElement("br",null),t.user.surname))},g={home:"https://crowdai-slr-api-dev.herokuapp.com/",search:"search",scopus_search:"search-scopus",projects:"projects",papers:"papers",customPapers:"customPapers",menu_list:[{id:4,content:"home",link:"/"},{id:5,content:"my projects",link:"/projects"},{id:6,content:"account",link:"#"}],max_total_number_for_results:5e3,pdf_parse_server:"pdf"},x=function(e){return c.a.createElement("svg",{id:"menu-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("path",{className:"st0",d:"M214,482.1"}),c.a.createElement("line",{className:"st-t",x1:"172",y1:"482.1",x2:"172",y2:"482.1"}),c.a.createElement("line",{className:"st-m",x1:"500",y1:"482.1",x2:"500",y2:"482.1"}),c.a.createElement("line",{className:"st-b",x1:"828",y1:"482.1",x2:"828",y2:"482.1"}))},w=function(e){var t=e.cls,a=e.handler;return c.a.createElement("div",{className:"cover "+t,onClick:function(e){a(!1)}})},j=function(e){return g.menu_list.map(function(t,a){return c.a.createElement("div",{key:a},c.a.createElement(i.b,{to:t.link,className:"menu-option",onMouseUp:e.handleMenuBlur},t.content))})},N=function(e){var t=Object(l.useState)(!1),a=Object(m.a)(t,2),r=a[0],n=a[1],s=Object(l.useState)(!0),o=Object(m.a)(s,2),i=o[0],u=o[1];function p(e){n(!1)}var d="modal side-menu up",f="button-wrapper close";return i&&(d="modal side-menu"),r&&(f="button-wrapper open",d="modal side-menu down"),c.a.createElement("div",{className:"menu"},c.a.createElement(w,{cls:r?"full-screen-transparent":"",handler:p}),c.a.createElement("div",{className:f,onClick:function(){n(!r),u(!1)}},c.a.createElement(x,null)),c.a.createElement("div",{className:d,tabIndex:-1},c.a.createElement(y,null),c.a.createElement(j,{handleMenuBlur:p})))},O=function(e){var t=e.location.pathname.split("/").filter(function(e){return e}),a=Object(l.useContext)(E),r="/",n=[];0===t.length?n.push(c.a.createElement(c.a.Fragment,null," ")):n.push(c.a.createElement(i.b,{key:0,to:r},"home",c.a.createElement("span",null," > ")));for(var s=0;s<t.length;s++)r+="/"===r?t[s]:"/"+t[s],t[s-1]&&"projects"===t[s-1]?n.push(c.a.createElement(i.b,{key:s+1,to:r},"'",a.projectName,"'")):n.push(c.a.createElement(i.b,{key:s+1,to:r},t[s])),s<t.length-1&&n.push(c.a.createElement("span",{key:s+9999}," > "));return c.a.createElement("div",{className:"breadcrumbs"},n)},k=a(1),S=a.n(k),C=a(9),P=a(3),B=a(16),_=a.n(B),I=1e4;function L(e,t,a){return F.apply(this,arguments)}function F(){return(F=Object(P.a)(S.a.mark(function e(t,a,l){var c,s,o,i,u,p;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new AbortController,c=r.signal,n=0,s=Object.assign({credentials:"include",mode:"cors",signal:c},a),o=setTimeout(function(){return r.abort(),void(n=2)},l),e.next=8,fetch(t,s);case 8:return i=e.sent,clearTimeout(o),e.next=12,M(i);case 12:return u=e.sent,R(i,u),e.abrupt("return",u);case 17:if(e.prev=17,e.t0=e.catch(0),2!==n){e.next=25;break}return(p=new Error("Error: Time out to get response from backend")).name="timeout",e.abrupt("return",p);case 25:if(1!==n){e.next=27;break}return e.abrupt("return",null);case 27:return e.abrupt("return",e.t0);case 28:case"end":return e.stop()}},e,null,[[0,17]])}))).apply(this,arguments)}function T(){return(T=Object(P.a)(S.a.mark(function e(t){var a,r,n,l,c,s=arguments;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]?s[1]:"",r="",""!==a){for(n in r="?",a)r+=n+"="+encodeURIComponent(a[n])+"&";r=r.slice(0,r.length-1)}return(l=new Headers).append("Accept","application/json"),l.append("Content-Type","application/json;charset=UTF-8"),c={method:"GET",headers:l},e.next=9,L(t+r,c,I);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(){return(D=Object(P.a)(S.a.mark(function e(t){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"DELETE"},e.next=3,L(t,a,I);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function A(){return(A=Object(P.a)(S.a.mark(function e(t){var a,r,n,l,c=arguments;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"",(r=new Headers).append("Accept","application/json, text/plain, */*"),r.append("Cache-Control","no-cache"),r.append("Content-Type","application/json;charset=UTF-8"),n=JSON.stringify(a,null,2),l={method:"POST",headers:r,body:n},e.next=9,L(t,l,I);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function q(){return(q=Object(P.a)(S.a.mark(function e(t){var a,r,n,l=arguments;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:"",1e4,(r=new Headers).append("Accept","application/json, text/plain, */*"),r.append("Cache-Control","no-cache"),n={method:"POST",headers:r,body:a},e.next=8,L(t,n,1e4);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function X(){return(X=Object(P.a)(S.a.mark(function e(t){var a,r,n,l,c=arguments;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"",(r=new Headers).append("Accept","application/json, text/plain, */*"),r.append("Cache-Control","no-cache"),r.append("Content-Type","application/json;charset=UTF-8"),n=JSON.stringify(a,null,2),l={method:"PUT",headers:r,body:n},e.next=9,L(t,l,I);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(e,t){if(e.status<200||e.status>=300){var a=new Error(e.statusText);throw a.data=e,t.payload&&(a.payload=t.payload),a}}function M(e){return U.apply(this,arguments)}function U(){return(U=Object(P.a)(S.a.mark(function e(t){var a,r;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.headers.get("Content-Type"),r=null,null==a){e.next=21;break}if(!(a.indexOf("text")>-1)){e.next=7;break}return e.next=6,t.text();case 6:r=e.sent;case 7:if(!(a.indexOf("form")>-1)){e.next=11;break}return e.next=10,t.formData();case 10:r=e.sent;case 11:if(!(a.indexOf("video")>-1)){e.next=15;break}return e.next=14,t.blob();case 14:r=e.sent;case 15:if(!(a.indexOf("json")>-1)){e.next=19;break}return e.next=18,t.json();case 18:r=e.sent;case 19:e.next=25;break;case 21:if(null==t){e.next=25;break}return e.next=24,t.text();case 24:r=e.sent;case 25:return e.abrupt("return",r);case 26:case"end":return e.stop()}},e)}))).apply(this,arguments)}var z={get:function(e){return T.apply(this,arguments)},post:function(e){return A.apply(this,arguments)},delete:function(e){return D.apply(this,arguments)},put:function(e){return X.apply(this,arguments)},postFile:function(e){return q.apply(this,arguments)},abortRequest:function(){r.abort(),n=1,console.log("abort")}};function J(){return(J=Object(P.a)(S.a.mark(function e(){var t,a,r,n=arguments;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",a=g.home+g.projects,e.next=4,z.get(a,t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(){return(H=Object(P.a)(S.a.mark(function e(t){var a,r;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.home+g.projects+"/"+t,e.next=3,z.get(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Y(){return(Y=Object(P.a)(S.a.mark(function e(t){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.home+g.projects,e.next=3,z.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function V(){return(V=Object(P.a)(S.a.mark(function e(t,a){var r;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.home+g.projects+"/"+t,e.next=3,z.put(r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function G(){return(G=Object(P.a)(S.a.mark(function e(t){var a,r;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.home+g.projects+"/"+t,e.next=3,z.delete(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var W={getProjectsList:function(){return J.apply(this,arguments)},getProject:function(e){return H.apply(this,arguments)},postProject:function(e){return Y.apply(this,arguments)},putProject:function(e,t){return V.apply(this,arguments)},deleteProject:function(e){return G.apply(this,arguments)},abortRequest:z.abortRequest},$=function(e){return c.a.createElement("svg",{id:"loading-icon",className:e.class,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("g",null,c.a.createElement("path",{id:"loading-circle1",d:" M 500, 500 m -160, 0 a 160,160 0 1,0 320,0 a 160,160 0 1,0 -320,0 "}),c.a.createElement("path",{id:"loading-circle2",d:" M 500, 500 m -305, 0 a 305,305 0 1,0 610,0 a 305,305 0 1,0 -610,0 "})))},K=a(10),Q=function(e){return c.a.createElement("svg",{id:"close-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("line",{className:"ln",x1:"134",y1:"866",x2:"866",y2:"134"}),c.a.createElement("line",{className:"ln",x1:"134",y1:"134",x2:"866",y2:"866"}))};var Z=function(e){var t=a(76),r=Object(l.useState)(!1),n=Object(m.a)(r,2),s=(n[0],n[1],t.object().shape({name:t.string().required("please enter a title"),description:t.string().required("please enter a description")})),o=Object(l.useContext)(E);return c.a.createElement(c.a.Fragment,null,c.a.createElement(K.c,{initialValues:{name:"",description:""},validationSchema:s,onSubmit:function(){var t=Object(P.a)(S.a.mark(function t(a,r){var n,l,c;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.setSubmitting,l={name:a.name,description:a.description},t.next=4,W.postProject(l);case 4:(c=t.sent).message?o.setError(c):e.history.push("/projects/"+c.id),n(!1);case 7:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),validateOnBlur:!1},function(t){var a=t.errors,r=t.touched,n=t.isSubmitting,l=(t.setErrors,t.validateField),s=t.handleChange;return c.a.createElement(K.b,{className:"modal add-project",style:{visibility:e.visibility?"":"hidden"}},c.a.createElement("button",{type:"button",className:"close-btn",onClick:function(t){e.setVisibility(!e.visibility)}},c.a.createElement(Q,null)),c.a.createElement("br",null),c.a.createElement(K.a,{style:{borderBottom:a.name&&r.name?"solid 1px #d81e1e":""},name:"name",type:"text",placeholder:"Project Name",onChange:function(e){s(e),l("name")}}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(K.a,{style:{borderBottom:a.description&&r.description?"solid 1px #d81e1e":""},name:"description",component:"textarea",placeholder:"Project Description"}),c.a.createElement("br",null),c.a.createElement("button",{type:"submit",disabled:n||a.name&&r.name||a.description&&r.description},"Add Project"))}))};var ee=function(e){var t=e.start,a=e.count,r=e.totalResults,n=e.path;r>g.max_total_number_for_results&&(r=g.max_total_number_for_results),n=function(e){var t=window.location.href.split("?")[1];if(t){t=t.split("#")[0];for(var a="",r=t.split("&"),n=0;n<r.length;n++){var l=r[n].split("=")[0];"start"!==l&&"count"!==l&&(a+=r[n]+"&")}e=e+"?"+a}else e+="?";return e}(n);var l="",s="",o="",u="",p=[],m=Math.floor(t/a)+1,d=Math.ceil(r/a);if(d>1){m>1&&(l=c.a.createElement("li",null,c.a.createElement(i.b,{className:"prev-page",to:n+"start="+((m-1)*a>0?(m-2)*a:0)+"&count="+a},"<"))),m<d&&(s=c.a.createElement("li",null,c.a.createElement(i.b,{className:"next-page",to:n+"start="+m*a+"&count="+a},">"))),m>6&&(o=c.a.createElement(c.a.Fragment,null,c.a.createElement("li",null,c.a.createElement(i.b,{className:"first-page",to:n+"start=0&count="+a},"1")),c.a.createElement("li",null,c.a.createElement("span",null,"...")))),m<d-5&&(u=c.a.createElement(c.a.Fragment,null,c.a.createElement("li",null,c.a.createElement("span",null,"...")),c.a.createElement("li",null,c.a.createElement(i.b,{style:{display:"inline-block"},className:"last-page",to:n+"start="+(d-1)*a+"&count="+a},d))));for(var f=m-4;f<=m+4;f++)f>0&&f<=d&&(f!==m?p.push(c.a.createElement(i.b,{className:"normal-page",to:n+"start="+(f-1)*a+"&count="+a},f)):p.push(c.a.createElement("span",{className:"current-page"},m)))}return c.a.createElement("ul",{className:"pagination"},l,o,p.map(function(e,t){return c.a.createElement("li",{style:{display:"inline-block",margin:10},key:t},e)}),u,s)};function te(e,t,a){if(null==e||null==t)return!1;if(0==e.length||0==t.length)return!1;for(var r=function(r){if(!e.some(function(e){return e[a]===t[r][a]}))return{v:!1}},n=0;n<t.length;++n){var l=r(n);if("object"===typeof l)return l.v}return!0}function ae(e,t){return"/"===e.charAt(e.length-1)?e.slice(0,-1)+t:e+t}function re(e){for(var t="?",a=Object.keys(e),r=0;r<a.length;r++)"date_created"===e.orderBy&&"sort"===a[r]||(t+=a[r]+"="+encodeURIComponent(e[a[r]]),r!==a.length-1&&(t+="&"));return t}function ne(e,t,a){for(var r=-1,n=0;n<e.length;n++)if(e[n][t]===a){r=n;break}return r}var le=function(e){return c.a.createElement("svg",{version:"1.1",id:"options-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("path",{className:"st0",d:"M214,482.1"}),c.a.createElement("line",{className:"st-options",x1:"500",y1:"250",x2:"500",y2:"250"}),c.a.createElement("line",{className:"st-options",x1:"500",y1:"500",x2:"500",y2:"500"}),c.a.createElement("line",{className:"st-options",x1:"500",y1:"750",x2:"500",y2:"750"}))},ce=function(e){var t=e.cls,a=e.options,r=e.handler,n=e.target,s=Object(l.useState)(!1),o=Object(m.a)(s,2),i=o[0],u=o[1];return c.a.createElement("div",{className:t},c.a.createElement("button",{type:"button",onBlur:function(e){i&&u(!1)},onMouseDown:function(e){u(!i)}},c.a.createElement(le,null)),c.a.createElement("div",{style:{fontSize:i?"12px":"0px",padding:i?"2px":"0px",border:i?"solid 1px #e8e8e8":"solid 0px #e8e8e8"},className:"options-list"},a.map(function(e,t){return c.a.createElement("div",{key:t,onMouseDown:function(t){return r(n,e)},className:"option"},e)})))},se=function(e){var t,a=e.projectsList,r=e.path,n=e.handleDelete,l=["delete"];return t=0===a.length?c.a.createElement("div",null,"there aren't projects"):a.map(function(e,t){return c.a.createElement("div",{key:e.id,className:"light-modal project-card"},c.a.createElement(ce,{options:l,handler:n,target:e.id,cls:"card-options project-card-options"}),c.a.createElement(i.b,{to:ae(r,"/"+e.id)},c.a.createElement("h3",null,e.data.name),c.a.createElement("p",{className:"description"},e.data.description),c.a.createElement("div",{className:"project-dates"},c.a.createElement("p",null),c.a.createElement("p",null,"last modified on ",c.a.createElement("i",null,e.date_last_modified===e.date_created?"never":e.date_last_modified.slice(0,10))))))}),c.a.createElement("div",{className:"project-cards-holder"},t)};var oe=function(e){var t=Object(l.useState)([]),a=Object(m.a)(t,2),r=a[0],n=a[1],s=Object(l.useState)(0),o=Object(m.a)(s,2),i=o[0],u=o[1],p=Object(l.useState)(!1),d=Object(m.a)(p,2),f=d[0],h=d[1],b=Object(l.useState)(!1),v=Object(m.a)(b,2),y=v[0],g=v[1],x=Object(l.useContext)(E),j=function(e){var t=_.a.parse(e),a=t.count||10;return{start:t.start||0,count:a}}(e.location.search);function N(){return(N=Object(P.a)(S.a.mark(function e(t){var a,l;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleting "+t),e.next=3,W.deleteProject(t);case 3:(a=e.sent)&&a.message?x.setError(a):a&&null!==a&&(l=r.filter(function(e){return e.id!==t}),n(l),alert("DELETED SUCCESSFULLY!"));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(l.useEffect)(function(){x.setTitle(c.a.createElement("div",{className:"nav-elements"}," ",c.a.createElement("h2",{className:"static-title"},"PROJECTS")," ")),x.setProjectName("")},[]),Object(l.useEffect)(function(){var e=!0;return function(){var t=Object(P.a)(S.a.mark(function t(){var a,r,l;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return h(!1),t.next=3,W.getProjectsList(Object(C.a)({orderBy:"date_last_modified"},j));case 3:a=t.sent,e&&a&&"Not Found"===a.message?(n([]),u(0),h(!0)):e&&a&&a.message?x.setError(a):e&&a&&(r=a.results.filter(function(e,t){if(t%2)return e}),l=[],l=a.results.filter(function(e,t){if(!(t%2))return e}),n(l.concat(r)),u(a.totalResults),h(!0));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[j.start,j.count]),!1===f?c.a.createElement($,null):c.a.createElement("div",null,c.a.createElement(w,{cls:y?"full-screen":"",handler:g}),c.a.createElement(se,{projectsList:r,path:e.match.url,handleDelete:function(e){return N.apply(this,arguments)}}),c.a.createElement(ee,{start:j.start,count:j.count,totalResults:i,path:e.match.url}),c.a.createElement(Z,{visibility:y,setVisibility:g,history:e.history}),c.a.createElement("button",{className:"bottom-left-btn add-project-btn",type:"button",value:"toggle-insert-form",onClick:function(e){g(!y)}},c.a.createElement("div",{className:"btn-title"},"Add Project"),c.a.createElement("div",{className:"btn-icon"}," ")))},ie=a(73),ue=a(17),pe=a(24),me=a.n(pe);function de(){return(de=Object(P.a)(S.a.mark(function e(t){var a,r;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.home+g.search,e.next=3,z.get(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fe(){return(fe=Object(P.a)(S.a.mark(function e(t){var a,r;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.home+g.papers+"/"+t,e.next=3,z.get(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var he={search:function(e){return de.apply(this,arguments)},selectById:function(e){return fe.apply(this,arguments)},abortRequest:z.abortRequest};function Ee(){return(Ee=Object(P.a)(S.a.mark(function e(t){var a,r;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.home+g.papers,e.next=3,z.get(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function be(){return(be=Object(P.a)(S.a.mark(function e(t){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.home+g.papers+"/"+t,e.next=3,z.get(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ve(){return(ve=Object(P.a)(S.a.mark(function e(t){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.home+g.papers,e.next=3,z.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ye(){return(ye=Object(P.a)(S.a.mark(function e(t){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.home+g.customPapers,e.next=3,z.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ge(){return(ge=Object(P.a)(S.a.mark(function e(t,a){var r;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.home+g.papers+"/"+t,e.next=3,z.put(r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xe(){return(xe=Object(P.a)(S.a.mark(function e(t){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.home+g.papers+"/"+t,e.next=3,z.delete(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var we={getPapersList:function(e){return Ee.apply(this,arguments)},getPaper:function(e){return be.apply(this,arguments)},postPaperIntoProject:function(e){return ve.apply(this,arguments)},postCustomPaperIntoProject:function(e){return ye.apply(this,arguments)},putPaper:function(e,t){return ge.apply(this,arguments)},deletePaper:function(e){return xe.apply(this,arguments)},abortRequest:z.abortRequest},je=function(e){return c.a.createElement("svg",{id:"select-tick",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("polyline",{className:"st-tick",points:"918,192.3 389.3,807.7 82,450 "},c.a.createElement("animate",{attributeName:"points",dur:"0.2s",repeatCount:"1",fill:"freeze",from:"500,600 400,700 200,750",to:"918,192.3 389.3,807.7 82,450 "})))},Ne=function(e){var t=e.val,a=e.name,r=e.label,n=e.isChecked,s=e.handler,o=Object(l.useState)(c.a.createElement(c.a.Fragment,null)),i=Object(m.a)(o,2),u=i[0],p=i[1];return Object(l.useEffect)(function(){p(n?c.a.createElement(je,null):c.a.createElement(c.a.Fragment,null))},[n]),c.a.createElement("label",{className:"checkbox-container"},c.a.createElement("input",{type:"checkbox",value:t,name:a,checked:n,onChange:function(e){console.log("clickekdkdkdkd"),s(e)}}),c.a.createElement("span",{className:"checkmark"},u),c.a.createElement("span",{className:"name"},r))},Oe=function(e){return c.a.createElement("svg",{id:"radio-tick",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("circle",{className:"st-circle",cx:"500",cy:"500",r:"375"},c.a.createElement("animate",{attributeName:"r",dur:"0.2s",repeatCount:"1",fill:"freeze",from:"0",to:"375"})))},ke=function(e){var t=e.label,a=e.name,r=e.val,n=e.isChecked,s=e.handler,o=Object(l.useState)(c.a.createElement(c.a.Fragment,null)),i=Object(m.a)(o,2),u=i[0],p=i[1];return Object(l.useEffect)(function(){p(n?c.a.createElement(Oe,null):c.a.createElement(c.a.Fragment,null))},[n]),c.a.createElement("label",{className:"radiobox-container"},c.a.createElement("input",{type:"radio",value:r,name:a,checked:n,onChange:s}),c.a.createElement("span",{className:"radiomark"},u),c.a.createElement("span",null,t))},Se=function(e){return c.a.createElement("svg",{id:"search-icon",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("path",{className:"st0",d:"M626.9,644.3c-73.5,0-142.6-28.6-194.6-80.6s-80.6-121.1-80.6-194.6s28.6-142.6,80.6-194.6 c52-52,121.1-80.6,194.6-80.6c73.5,0,142.6,28.6,194.6,80.6c52,52,80.6,121.1,80.6,194.6s-28.6,142.6-80.6,194.6 S700.4,644.3,626.9,644.3z"}),c.a.createElement("line",{className:"st1",x1:"145.2",y1:"850.8",x2:"431.7",y2:"564.3"}))},Ce=function(e){return c.a.createElement("svg",{id:"similar-paper-search-icon",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("polyline",{className:"st0-sps",points:"795.8,214 734.8,214 736.8,146 \t\t"}),c.a.createElement("polyline",{className:"st0-sps",points:"842.8,214 842.8,875.8 262.8,875.8 262.8,106 734.8,106 \t\t"}),c.a.createElement("line",{className:"st0-sps",x1:"842.8",y1:"214",x2:"734.8",y2:"106"}),c.a.createElement("line",{className:"st1-sps",x1:"350.8",y1:"198.9",x2:"644.8",y2:"198.9"}),c.a.createElement("line",{className:"st2-sps",x1:"346.8",y1:"385.4",x2:"752.8",y2:"385.4"}),c.a.createElement("line",{className:"st2-sps",x1:"544",y1:"485.9",x2:"752.8",y2:"485.9"}),c.a.createElement("line",{className:"st3-sps",x1:"346.8",y1:"485.9",x2:"544",y2:"485.9"}),c.a.createElement("line",{className:"st2-sps",x1:"575.9",y1:"586.4",x2:"752.8",y2:"586.4"}),c.a.createElement("line",{className:"st3-sps",x1:"346.8",y1:"586.4",x2:"575.9",y2:"586.4"}),c.a.createElement("line",{className:"st2-sps",x1:"555.5",y1:"686.9",x2:"752.8",y2:"686.9"}),c.a.createElement("line",{className:"st3-sps",x1:"346.8",y1:"686.9",x2:"555.5",y2:"686.9"}),c.a.createElement("circle",{className:"st4-sps",cx:"410.8",cy:"594.3",r:"171.7"}),c.a.createElement("line",{className:"st4-sps",x1:"111.2",y1:"894",x2:"289.4",y2:"715.7"}))},Pe=function(e){var t=e.papersList,a=e.handlePaperSelection,r=e.selectedEidList,n=["search similar"],s=Object(l.useContext)(E);function o(e,t){return u.apply(this,arguments)}function u(){return(u=Object(P.a)(S.a.mark(function e(t,a){var r;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("delete"!==a){e.next=6;break}return console.log("deleting "+t),e.next=4,we.deletePaper(t);case 4:(r=e.sent).message?s.setError(r):null!==r&&alert("DELETED SUCCESSFULLY!");case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}return t.map(function(e,t){return c.a.createElement("div",{key:t,className:"paper-card"},c.a.createElement(Ne,{name:e.title,label:"",val:e.eid,isChecked:r.includes(e.eid),handler:a}),c.a.createElement(ce,{options:n,handler:o,target:e.id,cls:"card-options paper-card-options"}),c.a.createElement(i.b,{to:"#"},c.a.createElement("h3",null,e.title)),c.a.createElement("div",{className:"extra-info"},c.a.createElement("p",{className:"authors"},e.authors),c.a.createElement("p",{className:"eid"},e.eid),c.a.createElement("p",{className:"date"},e.year)),c.a.createElement(me.a,{text:e.abstract,lines:4,ellipsis:"...",className:"paragraph",moreText:"more",lessText:"less"}))})},Be=function(e){var t=e.papersList,a=(e.location,e.history,Object(l.useState)(t)),r=Object(m.a)(a,2),n=r[0],s=r[1],o=Object(l.useContext)(E),u=["delete","search similar"];function p(e,t){return d.apply(this,arguments)}function d(){return(d=Object(P.a)(S.a.mark(function e(t,a){var r,l;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("delete"!==a){e.next=6;break}return console.log("deleting "+t),e.next=4,we.deletePaper(t);case 4:(r=e.sent).message?o.setError(r):null!==r&&(alert("DELETED SUCCESSFULLY!"),l=n.filter(function(e){return e.id!==t}),s(l));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}return 0===n.length?c.a.createElement("div",null,"there are no papers here, you can add new ones by searching"):n.map(function(e){return c.a.createElement("div",{key:e.id,className:"paper-card"},c.a.createElement(ce,{options:u,handler:p,target:e.id,cls:"card-options paper-card-options"}),c.a.createElement(i.b,{to:"#"},c.a.createElement("h3",null,e.data.title)),c.a.createElement("div",{className:"extra-info"},c.a.createElement("p",{className:"authors"},e.data.authors),c.a.createElement("p",{className:"eid"},e.data.eid||e.data.doi),c.a.createElement("p",{className:"date"},e.data.year)),c.a.createElement(me.a,{text:e.data.abstract,lines:4,ellipsis:"...",className:"paragraph",moreText:"more",lessText:"less"}))})},_e=function(e){var t="",a="";return e.focused?(t="90,295.5 500,704.5 910,295.5 ",a="90,704.5 500,295.5 910,704.5 "):(t="90,704.5 500,295.5 910,704.5 ",a="90,295.5 500,704.5 910,295.5 "),c.a.createElement("svg",{version:"1.1",id:"arrow-select",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("polyline",{className:"st-arrow-select",points:t},c.a.createElement("animate",{attributeType:"XML",id:"ani-select-arrow",attributeName:"points",from:t,to:a,begin:"0s",dur:"0.2s",repeatCount:"1",fill:"freeze"})))},Ie=function(e){var t=e.options,a=e.selected,r=e.handler,n=Object(l.useState)(!1),s=Object(m.a)(n,2),o=s[0],i=s[1];function u(e){document.getElementById("ani-select-arrow").beginElement(),i(!o)}return c.a.createElement("div",{className:"custom-select"},c.a.createElement("div",{className:"selected",tabIndex:-2,onBlur:u,onFocus:u},t[a].label," ",c.a.createElement("div",{className:"arrow"},c.a.createElement(_e,{focused:o}))),c.a.createElement("div",{className:"options-holder",style:{fontSize:o?"15px":"0px",borderBottom:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderLeft:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderRight:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderTop:"none"}},t.map(function(e,t){return c.a.createElement("div",{key:t,"data-value":t,className:"option",style:{padding:o?"2px":"0px"},onMouseDown:r},e.label)})))},Le=function(e){var t=e.display,a=e.up,r="",n="",s="";"ASC"===a?(n="371.7,293 500,165 628.3,293 ",s="371.7,491.9 500,619.9 628.3,491.9 "):(n="371.7,491.9 500,619.9 628.3,491.9 ",s="371.7,293 500,165 628.3,293 ");var o=Object(l.useState)(s),i=Object(m.a)(o,2),u=i[0],p=i[1];return Object(l.useEffect)(function(){p(s)},[s]),t&&(r=c.a.createElement("svg",{version:"1.1",id:"order-arrow",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("polyline",{className:"st-order-arrow-head",points:"371.7,293 500,165 628.3,293 ",transform:"matrix(1.5303008,0,0,1.5303008,-279.47582,-105.57059)"},c.a.createElement("animate",{attributeType:"XML",id:"ani-order-arrow",attributeName:"points",from:n,to:u,begin:"0s",dur:"0.2s",repeatCount:"1",fill:"freeze"})),c.a.createElement("line",{className:"st-order-arrow",x1:"485.67453",y1:"145.09268",x2:"485.67453",y2:"827.75989"}))),r},Fe=function(e){return c.a.createElement("svg",{id:"remove-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("line",{className:"rb",x1:"134",y1:"866",x2:"866",y2:"134"}),c.a.createElement("line",{className:"rb",x1:"134",y1:"134",x2:"866",y2:"866"}))},Te=a(117),De=[{label:"Title",value:"title"},{label:"Date",value:"date"}],Ae=[{label:"all",value:"all"},{label:"author",value:"author"},{label:"content",value:"content"},{label:"adv. query",value:"advanced"}],qe=(new Date).getFullYear()+2,Xe=["all"].concat(Object(ue.a)(Te.range(2017,qe).map(String))),Re=function(e){var t=e.selectedPapersList,a=e.handlePaperSelection;return c.a.createElement("div",{className:"selected-papers-list",style:{opacity:t.length>0?"1.0":"0.0",pointerEvents:t.length>0?"auto":"none"}},c.a.createElement("h3",null,"SELECTED PAPERS"," ",c.a.createElement("br",null),c.a.createElement("span",null,"(total : ",t.length,")")),c.a.createElement("div",{className:"submission-wrapper"},c.a.createElement("div",{className:"papers-wrapper",style:{border:t.length>0?"":"0px"}},c.a.createElement("div",{className:"papers-flex",style:{padding:t.length>0?"":"0px"}},t.map(function(e,t){return c.a.createElement("p",{key:t},c.a.createElement("span",null,e.title),c.a.createElement("button",{type:"button",className:"remove-btn",name:e.title,value:e.eid,onClick:function(t){a({target:{name:e.title,value:e.eid}})}},c.a.createElement(Fe,null)))}))),c.a.createElement("button",{style:{border:t.length>0?"":"0px",margin:t.length>0?"":"0px",height:t.length>0?"":"0px",pointerEvents:t.length>0?"auto":"none"},className:"ti-btn add-resultpaper-btn",type:"submit",value:"Submit"},c.a.createElement("div",{className:"btn-title"},"Add Selected Paper"),c.a.createElement("div",{className:"btn-icon"}))))};var Me=function(e){var t,a=e.project_id,r=e.location,n=e.match,s=e.history,o=Object(l.useState)([]),u=Object(m.a)(o,2),p=u[0],d=u[1],f=Object(l.useState)(!0),h=Object(m.a)(f,2),b=h[0],v=h[1],y=Object(l.useState)(0),g=Object(m.a)(y,2),x=g[0],w=g[1],j=Object(l.useContext)(E),N=function(e){var t,a=_.a.parse(e),r=a.query||"",n=a.searchBy||"all",l=a.orderBy||"title",c=a.sort||"ASC",s=a.start||0,o=a.count||10;t=void 0===a.scopus||"true"===a.scopus;var i="true"===a.googleScholar,u="true"===a.arXiv,p=a.year||"all";return{query:r,searchBy:n,orderBy:l,sort:c,scopus:t,googleScholar:i,arXiv:u,year:p,start:s,count:o}}(r.search),O=window.localStorage;window.localStorage||console.log("the browser must be support localStorage"),t=O.getItem("selectedPapersList")?JSON.parse(O.getItem("selectedPapersList")):[];var k=Object(l.useState)(t),B=Object(m.a)(k,2),I=B[0],L=B[1],F=Object(l.useState)("_"),T=Object(m.a)(F,2),D=T[0],A=T[1],q=Object(l.useState)({scopus:!0,googleScholar:!1,arXiv:!1}),X=Object(m.a)(q,2),R=X[0],M=X[1],U=Object(l.useState)("all"),z=Object(m.a)(U,2),J=z[0],H=z[1],Y=Object(l.useState)("all"),V=Object(m.a)(Y,2),G=V[0],W=V[1],K=Object(l.useState)(N.sort),Q=Object(m.a)(K,2),Z=Q[0],ae=Q[1];function le(e){var t=parseInt(e.target.getAttribute("data-value"));N.orderBy=De[t].value;var a=re(N);s.push(a)}function ce(e){"ASC"===N.sort?N.sort="DESC":N.sort="ASC";var t=re(N);s.push(t)}function se(e){var t,a=e.target.value,r=e.target.name;-1===ne(I,"eid",a)?(t=Object(ue.a)(I)).push({eid:a,title:r}):t=I.filter(function(e){return e.eid!==a}),L(t),O.setItem("selectedPapersList",JSON.stringify(t))}function oe(e){var t;if(te(I,p,"eid")){var a=p.map(function(e){return{eid:e.eid,title:e.title}});t=I.filter(function(e){return!a.some(function(t){return t.eid===e.eid})})}else{var r=p.map(function(e){return{eid:e.eid,title:e.title}}),n=[].concat(Object(ue.a)(r),Object(ue.a)(I));t=Te.uniqBy(n,"eid")}L(t),O.setItem("selectedPapersList",JSON.stringify(t))}function ie(){return(ie=Object(P.a)(S.a.mark(function e(t){var r,n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==I.length){e.next=5;break}alert("the list is empty!"),e.next=15;break;case 5:return r=I.map(function(e){return e.eid}),e.next=8,we.postPaperIntoProject({arrayEid:r,project_id:a});case 8:if(!(n=e.sent)||!n.message){e.next=12;break}return j.setError(n),e.abrupt("return",null);case 12:L([]),O.setItem("selectedPapersList",JSON.stringify(I)),alert("insert completed");case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function pe(){return(pe=Object(P.a)(S.a.mark(function e(t){var a;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),""===D?alert("search string is empty"):(N.query=D,N.scopus=R.scopus,N.googleScholar=R.googleScholar,N.arXiv=R.arXiv,N.searchBy=J,N.year=G,a=re(N),s.push(a));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(e){var t;switch(e.target.name){case"query":A(e.target.value);break;case"scopus":(t=Object(C.a)({},R)).scopus=!R.scopus,M(t);break;case"googleScholar":(t=Object(C.a)({},R)).googleScholar=!R.googleScholar,M(t);break;case"arXiv":(t=Object(C.a)({},R)).arXiv=!R.arXiv,M(t);break;case"searchBy":H(e.target.value);break;case"year":W(e.target.value)}}Object(l.useEffect)(function(){var e=!0;return Z!==N.sort&&(ae(N.sort),document.getElementById("ani-order-arrow")&&document.getElementById("ani-order-arrow").beginElement()),function(){var t=Object(P.a)(S.a.mark(function t(){var a;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(A(N.query),M({scopus:N.scopus,googleScholar:N.googleScholar,arXiv:N.arXiv}),H(N.searchBy),W(N.year),""===N.query){t.next=10;break}return v(!1),t.next=8,he.search(N);case 8:a=t.sent,e&&a&&"Not Found"===a.message?(d([]),w(0),v(!0)):e&&a&&a.message?j.setError(a):e&&a&&(d(a.results),w(a.totalResults),v(!0));case 10:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[a,N.query,N.orderBy,N.searchBy,N.sort,N.year,N.start,N.count,N.scopus,N.googleScholar,N.arXiv]);var de=c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{className:""===N.query?"search-form":"search-form small",onSubmit:function(e){return pe.apply(this,arguments)}},c.a.createElement("div",{style:{position:"relative"}},c.a.createElement("input",{type:"text",placeholder:"search",name:"query",value:D,onChange:me}),c.a.createElement("button",{className:"go-search",type:"submit",value:"Submit"},c.a.createElement(Se,null)),c.a.createElement(i.b,{to:"/projects/"+a+"/searchsimilar"},c.a.createElement("button",{className:"go-similar",type:"button"},c.a.createElement(Ce,null)))),c.a.createElement("div",{className:"option-holder"},c.a.createElement("label",null,"Source:"),c.a.createElement("br",null),c.a.createElement("div",{className:"checkboxes-holder"},c.a.createElement(Ne,{label:"Scopus",name:"scopus",val:"",isChecked:R.scopus,handler:me}),c.a.createElement(Ne,{label:"Google Scholar",name:"googleScholar",val:"",isChecked:R.googleScholar,handler:me}),c.a.createElement(Ne,{label:"arXiv",name:"arXiv",val:"",isChecked:R.arXiv,handler:me})),c.a.createElement("label",null,"Search by:"),c.a.createElement("br",null),c.a.createElement("div",{className:"checkboxes-holder"},c.a.createElement(ke,{label:Ae[0].label,name:"searchBy",val:Ae[0].value,isChecked:J===Ae[0].value,handler:me}),c.a.createElement(ke,{label:Ae[1].label,name:"searchBy",val:Ae[1].value,isChecked:J===Ae[1].value,handler:me}),c.a.createElement(ke,{label:Ae[2].label,name:"searchBy",val:Ae[2].value,isChecked:J===Ae[2].value,handler:me}),c.a.createElement(ke,{label:Ae[3].label,name:"searchBy",val:Ae[3].value,isChecked:J===Ae[3].value,handler:me})),c.a.createElement("label",null,"Year:"),c.a.createElement("br",null),c.a.createElement("div",{className:"checkboxes-holder"},Xe.map(function(e,t){return c.a.createElement(ke,{key:t,label:e,name:"year",val:e,isChecked:G===e,handler:me})}))))),fe="";if(!1===b)fe=c.a.createElement("div",{className:"paper-card-holder"},c.a.createElement("div",{className:"paper-card-holder-head",style:{pointerEvents:"none"}},c.a.createElement("div",{className:"select-all"},c.a.createElement(Ne,{label:"Select All",name:"select_all",val:"",isChecked:!1,handler:oe})),c.a.createElement("div",{className:"order"},c.a.createElement("label",null,"sort by:"),c.a.createElement(Ie,{options:De,selected:ne(De,"value",N.orderBy),handler:le}),c.a.createElement("button",{type:"button",onClick:ce},c.a.createElement(Le,{display:!0,up:N.sort})))),c.a.createElement(Re,{selectedPapersList:I}),c.a.createElement("div",{className:"search-loading-holder"},c.a.createElement($,{class:"small"})));else if(0===p.length&&""!==N.query)fe=c.a.createElement("div",{className:"not-found"}," not found :( ");else if(p.length>0&&""!==N.query){var Ee=I.map(function(e){return e.eid});fe=c.a.createElement("div",{className:"paper-card-holder"},c.a.createElement("div",{className:"paper-card-holder-head"},c.a.createElement("div",{className:"select-all"},c.a.createElement(Ne,{label:"Select All",name:"select_all",val:"",isChecked:te(I,p,"eid"),handler:oe})),c.a.createElement("div",{className:"order"},c.a.createElement("label",null,"sort by:"),c.a.createElement(Ie,{options:De,selected:ne(De,"value",N.orderBy),handler:le}),c.a.createElement("button",{type:"button",onClick:ce},c.a.createElement(Le,{display:!0,up:N.sort})))),c.a.createElement(Re,{selectedPapersList:I,handlePaperSelection:se}),c.a.createElement(Pe,{papersList:p,handlePaperSelection:se,selectedEidList:Ee}),c.a.createElement(ee,{start:N.start,count:N.count,totalResults:x,path:n.url}))}return c.a.createElement(c.a.Fragment,null,de,c.a.createElement("form",{className:"search-results",onSubmit:function(e){return ie.apply(this,arguments)}},fe))};function Ue(){return(Ue=Object(P.a)(S.a.mark(function e(t){var a,r;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.home+g.pdf_parse_server,e.next=3,z.postFile(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ze={updatePdf:function(e){return Ue.apply(this,arguments)},abortRequest:z.abortRequest},Je=function(e){return c.a.createElement("svg",{id:"go-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("polyline",{className:"st1-go",points:"371.7,481.9 500,609.9 628.3,481.9 ",transform:"matrix(0,-1.4834458,1.4856134,0,-92.453824,1228.1491)"}),c.a.createElement("line",{className:"st0-go",x1:"810.69312",y1:"486.42624",x2:"206.34099",y2:"486.42624"}))},He=function(e){e.close;var t=e.style,a=e.project_id,r=e.input,n=e.handler,s=e.paperInfo,o=e.fetching,u=e.setPaperInfo,p=e.setPaperFile,m=e.history,d="",f="",h=Object(l.useRef)(null);function E(){return(E=Object(P.a)(S.a.mark(function e(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.current.files[0]&&p(h.current.files[0]);case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return d=o?c.a.createElement("div",{className:"load-icon-similar-paper"},c.a.createElement($,null)):s&&s.title?c.a.createElement(c.a.Fragment,null,c.a.createElement("h3",{className:"similar-paper-title"},s.title),c.a.createElement(me.a,{text:s.abstract,lines:4,ellipsis:"...",className:"similar-paper-paragraph",moreText:"more",lessText:"less"})):c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:"similar-description"},"Search for Similar Papers"),c.a.createElement("div",{className:"DOI-holder"},c.a.createElement("input",{type:"text",placeholder:"type DOI, EID, or paper title",value:r,onChange:n,name:"query"}),c.a.createElement("button",{className:"go-search DOI-btn",type:"submit",value:"Submit"},c.a.createElement(Je,null))),c.a.createElement("p",{className:"or"},"or"),c.a.createElement("div",{className:"file-input-container"},c.a.createElement("input",{type:"file",id:"real-input",ref:h,onChange:function(){return E.apply(this,arguments)}}),c.a.createElement("button",{type:"button",className:"browse-btn",onClick:function(){h.current.click()}},"Upload a Paper"))),f=s?c.a.createElement("button",{type:"button",className:"close-btn red-x",onClick:function(e){u(void 0),p(void 0),m.push({})}},c.a.createElement(Q,null)):c.a.createElement(i.b,{to:"/projects/"+a+"/search"},c.a.createElement("button",{type:"button",className:"close-btn"},c.a.createElement(Q,null))),c.a.createElement("div",{style:Object(C.a)({},t),className:"light-modal similar-search-paper-upload"},f,d)},Ye=a(117),Ve=[{label:"Title",value:"title"},{label:"Date",value:"date"}],Ge=(new Date).getFullYear()+2,We=["all"].concat(Object(ue.a)(Ye.range(2017,Ge).map(String))),$e=function(e){var t=e.selectedPapersList,a=e.handlePaperSelection;return c.a.createElement("div",{className:"selected-papers-list",style:{opacity:t.length>0?"1.0":"0.0",pointerEvents:t.length>0?"auto":"none"}},c.a.createElement("h3",null,"SELECTED PAPERS"," ",c.a.createElement("br",null),c.a.createElement("span",null,"(total : ",t.length,")")),c.a.createElement("div",{className:"submission-wrapper"},c.a.createElement("div",{className:"papers-wrapper",style:{border:t.length>0?"":"0px"}},c.a.createElement("div",{className:"papers-flex",style:{padding:t.length>0?"":"0px"}},t.map(function(e,t){return c.a.createElement("p",{key:t},c.a.createElement("span",null,e.title),c.a.createElement("button",{type:"button",className:"remove-btn",name:e.title,value:e.eid,onClick:function(t){a({target:{name:e.title,value:e.eid}})}},c.a.createElement(Fe,null)))}))),c.a.createElement("button",{style:{border:t.length>0?"":"0px",margin:t.length>0?"":"0px",height:t.length>0?"":"0px",pointerEvents:t.length>0?"auto":"none"},className:"ti-btn add-resultpaper-btn",type:"submit",value:"Submit"},c.a.createElement("div",{className:"btn-title"},"Add Selected Paper"),c.a.createElement("div",{className:"btn-icon"}," "))))};var Ke=function(e){var t,a,r=e.project_id,n=e.location,s=e.match,o=e.history,i=Object(l.useState)([]),u=Object(m.a)(i,2),p=u[0],d=u[1],f=Object(l.useState)(!0),h=Object(m.a)(f,2),b=h[0],v=h[1],y=Object(l.useState)(0),g=Object(m.a)(y,2),x=g[0],w=g[1],j=Object(l.useContext)(E),N=function(e){var t,a=_.a.parse(e),r=a.query||"",n=a.orderBy||"title",l=a.sort||"ASC",c=a.start||0,s=a.count||10;t=void 0===a.scopus||"true"===a.scopus;var o="true"===a.googleScholar,i="true"===a.arXiv,u=a.year||"all";return{query:r,orderBy:n,sort:l,scopus:t,googleScholar:o,arXiv:i,year:u,start:c,count:s}}(n.search),O=window.localStorage;window.localStorage||console.log("the browser must be support localStorage"),t=O.getItem("selectedPapersList")?JSON.parse(O.getItem("selectedPapersList")):[],a=O.getItem("similarPaperData")?JSON.parse(O.getItem("similarPaperData")):null;var k=Object(l.useState)(t),B=Object(m.a)(k,2),I=B[0],L=B[1],F=Object(l.useState)(""),T=Object(m.a)(F,2),D=T[0],A=T[1],q=Object(l.useState)({scopus:!0,googleScholar:!1,arXiv:!1}),X=Object(m.a)(q,2),R=X[0],M=X[1],U=Object(l.useState)("all"),z=Object(m.a)(U,2),J=z[0],H=z[1],Y=Object(l.useState)(a),V=Object(m.a)(Y,2),G=V[0],W=V[1],K=Object(l.useState)(void 0),Q=Object(m.a)(K,2),Z=Q[0],ae=Q[1],le=Object(l.useState)(N.sort),ce=Object(m.a)(le,2),se=ce[0],oe=ce[1],ie=Object(l.useState)(!1),pe=Object(m.a)(ie,2),me=pe[0],de=pe[1],fe=Object(l.useState)(!1),Ee=Object(m.a)(fe,2),be=Ee[0],ve=Ee[1];function ye(e){var t;switch(e.target.name){case"query":A(e.target.value);break;case"scopus":(t=Object(C.a)({},R)).scopus=!R.scopus,M(t);break;case"googleScholar":(t=Object(C.a)({},R)).googleScholar=!R.googleScholar,M(t);break;case"arXiv":(t=Object(C.a)({},R)).arXiv=!R.arXiv,M(t);break;case"year":H(e.target.value)}}Object(l.useEffect)(function(){return console.log(N),se!==N.sort&&(oe(N.sort),document.getElementById("ani-order-arrow")&&document.getElementById("ani-order-arrow").beginElement()),function(){var e=Object(P.a)(S.a.mark(function e(){var t,a,r,n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0,A(N.query),M({scopus:N.scopus,googleScholar:N.googleScholar,arXiv:N.arXiv}),H(N.year),!G){e.next=13;break}return v(!1),e.next=8,he.search({query:"Trento"});case 8:t=e.sent,d(t.results),v(!0),e.next=52;break;case 13:if(!Z){e.next=36;break}if(console.log("FILE NAME : "+Z.name),/\.(pdf|PDF)$/.test(Z.name)&&-1!==Z.type.indexOf("application/pdf")){e.next=19;break}alert("the file must be a pdf"),e.next=34;break;case 19:return v(!1),ve(!0),console.log("FETCHING PARSE PDF"),(a=new FormData).append("file",Z),console.log("CALLING THE PAPER PARSER SERVICE"),e.next=27,ze.updatePdf(a);case 27:return(t=e.sent)&&t.message?(alert("Error during parsing file"),v(!0),ve(!1)):(console.log(t),W(t),ve(!1)),e.next=31,he.search({query:"Trento"});case 31:t=e.sent,d(t.results),v(!0);case 34:e.next=52;break;case 36:if(""===N.query){e.next=51;break}return console.log("SIMILAR PAPER STRING : "+N.query),v(!1),ve(!0),e.next=42,he.selectById(16);case 42:return r=e.sent,W(r.data),ve(!1),e.next=47,he.search(N);case 47:(n=e.sent)&&"Not Found"===n.message?(d([]),w(0),v(!0)):n&&n.message?j.setError(n):null!==n&&(d(n.results),w(n.totalResults),v(!0)),e.next=52;break;case 51:console.log("no file (& no similarPaperString)");case 52:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),function(){localStorage.removeItem("similarPaperData")}},[r,Z,N.query,N.orderBy,N.sort,N.year,N.start,N.count,N.scopus,N.googleScholar,N.arXiv]),Object(l.useEffect)(function(){console.log("effecting"),G?O.setItem("similarPaperData",JSON.stringify(G)):O.removeItem("similarPaperData")},[G]);var ge=c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{className:""!==N.query||Z||G?"search-form small":"search-form",style:{marginTop:me?"30px":"60px"},onSubmit:function(e){if(console.log("SUBMITTING SEARCH"),e&&e.preventDefault(),console.log("similarity search was called"),""!==D||Z){Z?(console.log("there's a file"),N.query=""):(console.log("there isn't a file"),N.query=D),N.scopus=R.scopus,N.googleScholar=R.googleScholar,N.arXiv=R.arXiv,N.year=J;var t=re(N);o.push(t)}else alert("similar paper string is empty")}},c.a.createElement(He,{style:{boxShadow:"0px 0px 3px -1px rgba(0, 0, 0, 0.25)"},project_id:r,close:de,handler:ye,input:D,paperInfo:G,fetching:be,setPaperInfo:W,setPaperFile:ae,history:o}),c.a.createElement("div",{className:"option-holder"},c.a.createElement("label",null,"Source:"),c.a.createElement("br",null),c.a.createElement("div",{className:"checkboxes-holder"},c.a.createElement(Ne,{label:"Scopus",name:"scopus",val:"",isChecked:R.scopus,handler:ye}),c.a.createElement(Ne,{label:"Google Scholar",name:"googleScholar",val:"",isChecked:R.googleScholar,handler:ye}),c.a.createElement(Ne,{label:"arXiv",name:"arXiv",val:"",isChecked:R.arXiv,handler:ye})),c.a.createElement("label",null,"Year:"),c.a.createElement("br",null),c.a.createElement("div",{className:"checkboxes-holder"},We.map(function(e,t){return c.a.createElement(ke,{key:t,label:e,name:"year",val:e,isChecked:J===e,handler:ye})}))))),xe="";function je(e){var t=parseInt(e.target.getAttribute("data-value"));N.orderBy=Ve[t].value;var a=re(N);o.push(a)}function Oe(e){"ASC"===N.sort?N.sort="DESC":N.sort="ASC";var t=re(N);o.push(t)}function Se(e){var t,a=e.target.value,r=e.target.name;-1===ne(I,"eid",a)?(t=Object(ue.a)(I)).push({eid:a,title:r}):t=I.filter(function(e){return e.eid!==a}),L(t),O.setItem("selectedPapersList",JSON.stringify(t))}function Ce(e){var t;if(te(I,p,"eid")){var a=p.map(function(e){return{eid:e.eid,title:e.title}});t=I.filter(function(e){return!a.some(function(t){return t.eid===e.eid})})}else{var r=p.map(function(e){return{eid:e.eid,title:e.title}}),n=[].concat(Object(ue.a)(r),Object(ue.a)(I));t=Ye.uniqBy(n,"eid")}L(t),O.setItem("selectedPapersList",JSON.stringify(t))}function Be(){return(Be=Object(P.a)(S.a.mark(function e(t){var a,n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=I.map(function(e){return e.eid}),e.next=4,we.postPaperIntoProject({arrayEid:a,project_id:r});case 4:if(!(n=e.sent)||!n.message){e.next=8;break}return j.setError(n),e.abrupt("return",null);case 8:L([]),O.setItem("selectedPapersList",JSON.stringify(I)),alert("insert completed");case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}if(!1===b)xe=c.a.createElement("div",{className:"paper-card-holder"},c.a.createElement("div",{className:"paper-card-holder-head",style:{pointerEvents:"none"}},c.a.createElement("div",{className:"select-all"},c.a.createElement(Ne,{label:"Select All",name:"select_all",val:"",isChecked:!1,handler:Ce})),c.a.createElement("div",{className:"order"},c.a.createElement("label",null,"sort by:"),c.a.createElement(Ie,{options:Ve,selected:ne(Ve,"value",N.orderBy),handler:je}),c.a.createElement("button",{type:"button",onClick:Oe},c.a.createElement(Le,{display:!0,up:N.sort})))),c.a.createElement($e,{selectedPapersList:I}),c.a.createElement("div",{className:"search-loading-holder"},c.a.createElement($,{class:"small"})));else if(0===p.length&&(""!==N.query||Z||G))xe=c.a.createElement("div",{className:"not-found"}," not found :( ");else if(p.length>0&&(""!==N.query||Z||G)){var _e=I.map(function(e){return e.eid});xe=c.a.createElement("div",{className:"paper-card-holder"},c.a.createElement("div",{className:"paper-card-holder-head"},c.a.createElement("div",{className:"select-all"},c.a.createElement(Ne,{label:"Select All",name:"select_all",val:"",isChecked:te(I,p,"eid"),handler:Ce})),c.a.createElement("div",{className:"order"},c.a.createElement("label",null,"sort by:"),c.a.createElement(Ie,{options:Ve,selected:ne(Ve,"value",N.orderBy),handler:je}),c.a.createElement("button",{type:"button",onClick:Oe},c.a.createElement(Le,{display:!0,up:N.sort})))),c.a.createElement($e,{selectedPapersList:I,handlePaperSelection:Se}),c.a.createElement(Pe,{papersList:p,handlePaperSelection:Se,selectedEidList:_e}),c.a.createElement(ee,{start:N.start,count:N.count,totalResults:x,path:s.url}))}return c.a.createElement(c.a.Fragment,null,ge,c.a.createElement("form",{className:"search-results",onSubmit:function(e){return Be.apply(this,arguments)}},xe))},Qe=[{value:"date_created",label:"Recently Added"},{value:"title",label:"Title"},{value:"authors",label:"Authors"}];var Ze=function(e){var t,a=e.project_id,r=e.location,n=e.match,s=e.history,o=Object(l.useState)([]),i=Object(m.a)(o,2),u=i[0],p=i[1],d=Object(l.useState)(0),f=Object(m.a)(d,2),h=f[0],b=f[1],v=Object(l.useState)(!1),y=Object(m.a)(v,2),g=y[0],x=y[1],w=Object(l.useContext)(E),j=function(e){var t=_.a.parse(e),a=t.count||10,r=t.start||0,n=t.orderBy||"date_created",l=t.sort||"ASC";return"date_created"===n&&(l="DESC"),{orderBy:n,sort:l,start:r,count:a}}(r.search),N=Object(l.useState)(j.sort),O=Object(m.a)(N,2),k=O[0],B=O[1];function I(e){var t=parseInt(e.target.getAttribute("data-value"));"date_created"===j.orderBy&&(j.sort="ASC"),j.orderBy=Qe[t].value;var a=re(j);s.push(a)}function L(e){"ASC"===j.sort?j.sort="DESC":j.sort="ASC";var t=re(j);s.push(t)}return Object(l.useEffect)(function(){var e=!0;return"date_created"!==j.orderBy&&k!==j.sort&&(B(j.sort),document.getElementById("ani-order-arrow").beginElement()),function(){var t=Object(P.a)(S.a.mark(function t(){var r;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return x(!1),t.next=3,we.getPapersList(Object(C.a)({project_id:a},j));case 3:r=t.sent,e&&r&&"Not Found"===r.message?(p([]),b(0),x(!0)):e&&r&&r.message?w.setError(r):e&&r&&(p(r.results),b(r.totalResults),x(!0));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[j.start,j.count,j.sort,j.orderBy]),t=!1===g?c.a.createElement("div",{className:"paper-card-holder"},c.a.createElement("div",{className:"order",style:{pointerEvents:"none"}},c.a.createElement("label",null,"sort by:"),c.a.createElement(Ie,{options:Qe,selected:ne(Qe,"value",j.orderBy),handler:I}),c.a.createElement("button",{type:"button",onClick:L},c.a.createElement(Le,{display:"date_created"!==j.orderBy,up:k}))),c.a.createElement($,{class:"small"})):c.a.createElement("div",{className:"paper-card-holder"},c.a.createElement("div",{className:"order"},c.a.createElement("label",null,"sort by:"),c.a.createElement(Ie,{options:Qe,selected:ne(Qe,"value",j.orderBy),handler:I}),c.a.createElement("button",{type:"button",onClick:L},c.a.createElement(Le,{display:"date_created"!==j.orderBy,up:k}))),c.a.createElement(Be,{papersList:u,location:r,history:s}),c.a.createElement(ee,{start:j.start,count:j.count,totalResults:h,path:n.url})),t=c.a.createElement("div",{className:"papers-list"},t)},et=function(e){var t=e.options,a=e.form,r=e.name,n=Object(l.useState)(!1),s=Object(m.a)(n,2),o=s[0],i=s[1],u=Object(l.useState)(0),p=Object(m.a)(u,2),d=p[0],f=p[1];function h(e){var t=parseInt(e.target.getAttribute("data-value"));f(t)}function E(e){document.getElementById("ani-select-arrow").beginElement(),i(!o)}return Object(l.useEffect)(function(){a.setFieldValue(r,t[d].value)},[d]),c.a.createElement("div",{className:"custom-select"},c.a.createElement("div",{className:"selected",tabIndex:-2,onBlur:E,onFocus:E},t[d].label," ",c.a.createElement("div",{className:"arrow"},c.a.createElement(_e,{focused:o}))),c.a.createElement("div",{className:"options-holder",style:{fontSize:o?"15px":"0px",borderBottom:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderLeft:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderRight:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderTop:"none"}},t.map(function(e,t){return c.a.createElement("div",{key:t,"data-value":t,className:"option",style:{padding:o?"2px":"0px"},onMouseDown:h},e.label)})))},tt=[{value:"article",label:"Article"},{value:"book_chapter",label:"Book Chapter"},{value:"conf_publication",label:"Conf. Publication"}];var at=function(e){var t=a(76),r=(a(276),t.object().shape({title:t.string().required("please enter a title"),authors:t.string().required("please enter an author"),year:t.number().required("please enter a year").min(1e3).max((new Date).getFullYear()+1).integer(),abstract:t.string().required("please enter the abstract")})),n=Object(l.useContext)(E);return c.a.createElement(c.a.Fragment,null,c.a.createElement(K.c,{initialValues:{title:e.customPaper&&e.customPaper.title||"",authors:e.customPaper&&e.customPaper.authors||"",year:e.customPaper&&e.customPaper.year||"",abstract:e.customPaper&&e.customPaper.abstract||"",document_type:e.customPaper&&e.customPaper.document_type||"",doi:e.customPaper&&e.customPaper.doi||""},validationSchema:r,onSubmit:function(){var t=Object(P.a)(S.a.mark(function t(a,r){var l,c,s;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return l=r.setSubmitting,void 0===a.doi&&(a.doi=""),c=Object(C.a)({},a,{year:a.year.toString(),source_title:a.title,link:"custom_paper",source:"slr_custom_papers",abstract_structured:"0",filter_oa_include:"0",filter_study_include:"0",notes:"",manual:"true"}),console.log(c),t.next=6,we.postCustomPaperIntoProject({paper:c,project_id:e.projectId});case 6:(s=t.sent)&&s.message?n.setError(s):e.history.push(e.url),l(!1);case 9:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),validateOnBlur:!1},function(e){var t=e.errors,a=e.touched,r=e.isSubmitting;return c.a.createElement(K.b,{className:"new-paper-form"},c.a.createElement(K.a,{style:{borderBottom:t.title&&a.title?"1px solid #d81e1e":""},id:"title",name:"title",type:"text",placeholder:"Paper Title"}),c.a.createElement("div",{className:"new-paper-form-ad"},c.a.createElement("div",{className:"author-year"},c.a.createElement(K.a,{style:{borderBottom:t.authors&&a.authors?"1px solid #d81e1e":""},name:"authors",type:"text",placeholder:"paper author"}),c.a.createElement(K.a,{style:{borderBottom:t.year&&a.year?"1px solid #d81e1e":""},name:"year",type:"number",placeholder:"year"})),c.a.createElement("div",{className:"type-doi"},c.a.createElement(K.a,{name:"document_type",render:function(e){var t=e.field,a=e.form;return c.a.createElement(et,Object.assign({options:tt},t,{form:a}))}}),c.a.createElement(K.a,{name:"doi",type:"text",placeholder:"DOI(optional)"}))),c.a.createElement(K.a,{style:{borderBottom:t.abstract&&a.abstract?"1px solid #d81e1e":""},name:"abstract",placeholder:"Paper Abstract",component:"textarea"}),c.a.createElement("button",{type:"submit",disabled:r||t.title&&a.title||t.authors&&a.authors||t.year&&a.year||t.abstract&&a.abstract},"Add paper"))}))};var rt=function(e){var t=e.projectId,a=e.url,r=e.history,n=Object(l.useState)(!1),s=Object(m.a)(n,2),o=s[0],i=s[1],u=Object(l.useState)(void 0),p=Object(m.a)(u,2),d=p[0],f=p[1],h=Object(l.useState)(!1),E=Object(m.a)(h,2),b=E[0],v=E[1],y=Object(l.useRef)(null);function g(){return(g=Object(P.a)(S.a.mark(function e(){var t,a,r;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=y.current.files[0])){e.next=14;break}if(/\.(pdf|PDF)$/.test(t.name)&&-1!==t.type.indexOf("application/pdf")){e.next=6;break}alert("the file must be a pdf"),e.next=14;break;case 6:return i(!0),(a=new FormData).append("file",t),e.next=11,ze.updatePdf(a);case 11:(r=e.sent)&&r.message?alert("Error during parsing file"):(f(r),v(!0)),i(!1);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}return b||o?o?c.a.createElement("div",{className:"new-paper-page-wrapper"},c.a.createElement("div",{className:"file-input-container"},c.a.createElement("input",{type:"file",id:"real-input"}),c.a.createElement("button",{type:"button",className:"browse-btn"},c.a.createElement($,null))),"or",c.a.createElement("br",null),c.a.createElement("button",{type:"button",onClick:function(){i(!1),v(!0)}},"abort and insert data manually")):c.a.createElement(at,{projectId:t,url:a,history:r,customPaper:d}):c.a.createElement("div",{className:"new-paper-page-wrapper"},c.a.createElement("div",null,c.a.createElement("div",{className:"file-input-container"},c.a.createElement("input",{type:"file",name:"file",id:"real-input",ref:y,onChange:function(){return g.apply(this,arguments)}}),c.a.createElement("button",{type:"button",className:"browse-btn",onClick:function(){y.current.click()}},"Upload a Paper")),"or",c.a.createElement("br",null),c.a.createElement("button",{type:"button",onClick:function(){v(!0)}},"insert data manually")))},nt=function(e){var t=e.description,a=e.update,r=e.date_last_modified,n=e.date_created,s=Object(l.useState)(!1),o=Object(m.a)(s,2),i=o[0],u=o[1];function p(e){return c.a.createElement("span",{className:"date"},e.slice(0,10)," at ",e.slice(11,19))}return c.a.createElement("div",{className:i?"project-description":"project-description hidden-form-description"},c.a.createElement("h2",null,"Description:"),c.a.createElement("p",{style:{fontSize:i?"0px":"15px"}}," ",t),c.a.createElement("form",{className:"edit-project-description",style:{height:i?"":"0px"}},c.a.createElement("textarea",{id:"edit-project-description-input",defaultValue:t,style:{width:i?"100%":"0%",padding:i?"":"0px",height:i?"":"0px"},onBlur:function(e){console.log("blurring"),u(!1)}}),c.a.createElement("button",{className:"edit-button",onMouseDown:function(e){console.log("CLICK"),i?a():(setTimeout(function(){document.getElementById("edit-project-description-input").focus()},100),u(!0),console.log(i))},type:"button"},c.a.createElement(d,{confirm:i}))),c.a.createElement("h2",null,"Additional info:"),c.a.createElement("p",{className:"project-date-info"}," ",c.a.createElement("span",null,"Created")," ",p(n)," "),c.a.createElement("p",{className:"project-date-info"}," ",c.a.createElement("span",null,"Last edited")," ",p(r)," "))},lt=function(e){var t=e.name,a=e.update,r=Object(l.useState)(!1),n=Object(m.a)(r,2),s=n[0],o=n[1];return c.a.createElement("div",{className:s?"nav-elements":"nav-elements hidden-form"}," ",c.a.createElement("h2",{style:{fontSize:s?"0px":"21px"}},t),c.a.createElement("form",{className:"edit-project-name",onClick:function(e){s||(document.getElementById("edit-project-name-input").focus(),o(!s))},onSubmit:function(e){e.preventDefault()}},c.a.createElement("input",{type:"text",id:"edit-project-name-input",defaultValue:t,style:{width:s?"":"0px",padding:s?"":"0px"},onBlur:function(e){o(!1)}}),c.a.createElement("button",{className:"edit-button",onMouseDown:function(e){s&&(a(),o(!s))},type:"button"},c.a.createElement(d,{confirm:s}))))},ct=function(e){var t=e.match,a=e.notFound,r=window.location.hash.substr(window.location.hash.length-9),n="#"+t.url===window.location.hash.split("?")[0]||"/addpaper"===r||"addpaper/"===r;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"project-nav-link-wrapper",style:{display:a||"/addpaper"===r||"addpaper/"===r?"none":""}},c.a.createElement("div",{className:"nav-link"},c.a.createElement(i.b,{to:t.url},"papers")),c.a.createElement("div",{className:"nav-link"},c.a.createElement(i.b,{to:ae(t.url,"/search")},"search")),c.a.createElement(ie.b,{flipKey:n},c.a.createElement(ie.a,{flipId:"underline"},c.a.createElement("div",{className:n?"underline underline-to-left":"underline underline-to-right"})))))},st=function(e){var t=Object(l.useState)({data:{name:"loading..."}}),a=Object(m.a)(t,2),r=a[0],n=a[1],s=Object(l.useState)(!1),o=Object(m.a)(s,2),p=o[0],d=o[1],f=Object(l.useState)(!1),h=Object(m.a)(f,2),b=h[0],v=h[1],y=Object(l.useContext)(E),g=e.match.params.id;function x(){return w.apply(this,arguments)}function w(){return(w=Object(P.a)(S.a.mark(function e(){var t,a,n;return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("edit-project-name-input").value,a=document.getElementById("edit-project-description-input").value,t===r.data.name&&a===r.data.description){e.next=7;break}return e.next=5,W.putProject(g,{name:t,description:a});case 5:(n=e.sent)&&n.message?y.setError(n):n&&null!==n&&(console.log("UPDATED SUCCESSFULLY!"),window.location.reload());case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(l.useEffect)(function(){"loading..."===r.data.name?y.setTitle(c.a.createElement("div",{className:"nav-elements"}," ",c.a.createElement("h2",{className:"static-title"},r.data.name)," ")):(y.setTitle(c.a.createElement(lt,{name:r.data.name,update:x})),y.setProjectName(r.data.name))},[r]),Object(l.useEffect)(function(){var e=!0;return d(!1),function(){var t=Object(P.a)(S.a.mark(function t(){var a;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("fetch project page"),t.next=3,W.getProject(g);case 3:a=t.sent,e&&a&&a.message?y.setError(a):e&&a&&(n(a),d(!0));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[g]),!1===p?c.a.createElement($,null):c.a.createElement("div",{className:"project-wrapper"},c.a.createElement(ct,{match:e.match,notFound:b}),c.a.createElement(u.c,null,c.a.createElement(u.a,{exact:!0,path:e.match.url,render:function(e){return v(!1),c.a.createElement(c.a.Fragment,null,c.a.createElement(nt,{description:r.data.description,update:x,date_last_modified:r.date_last_modified,date_created:r.date_created}),c.a.createElement(Ze,{project_id:g,location:e.location,match:e.match,history:e.history}),c.a.createElement(i.b,{to:ae(e.match.url,"/addpaper")},c.a.createElement("button",{className:"bottom-left-btn add-custompaper-btn"},c.a.createElement("div",{className:"btn-title"},"Add Custom Paper"),c.a.createElement("div",{className:"btn-icon"}," "))))}}),c.a.createElement(u.a,{exact:!0,path:e.match.url+"/search",render:function(e){return v(!1),c.a.createElement(Me,Object.assign({project_id:g},e))}}),c.a.createElement(u.a,{exact:!0,path:e.match.url+"/searchsimilar",render:function(e){return v(!1),c.a.createElement(Ke,Object.assign({project_id:g},e))}}),c.a.createElement(u.a,{path:e.match.url+"/addpaper",render:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(i.b,{className:"back",to:e.match.url},"  "),c.a.createElement(rt,{projectId:r.id,url:e.match.url,history:e.history}))}})))},ot=function(e){return c.a.createElement(i.a,null,c.a.createElement("div",{className:"app"},c.a.createElement(b,null,c.a.createElement(f,null,c.a.createElement(N,null)),c.a.createElement(u.c,null,c.a.createElement(u.a,{render:function(e){return c.a.createElement(O,e)}})),c.a.createElement(p,null,c.a.createElement(u.c,null,c.a.createElement(u.a,{exact:!0,path:"/",render:function(){return c.a.createElement(v,null)}}),c.a.createElement(u.a,{exact:!0,path:"/projects",render:function(e){return c.a.createElement(oe,e)}}),c.a.createElement(u.a,{path:"/projects/:id",render:function(e){return c.a.createElement(st,e)}}),c.a.createElement(u.a,{render:function(e){return c.a.createElement("div",null,"404")}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(ot,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[124,1,2]]]);
//# sourceMappingURL=main.8acc2eae.chunk.js.map