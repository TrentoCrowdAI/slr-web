(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t,a){e.exports=a(275)},275:function(e,t,a){"use strict";a.r(t);var r,n,c=a(0),l=a.n(c),s=a(117),o=a.n(s),i=a(4),u=a(24),p=a(1),m=a.n(p),d=a(3),f=a(2),h={home:"https://crowdai-slr-api-dev.herokuapp.com/",search:"search",scopus_search:"search-scopus",search_similar:"search/similar",search_automated:"search/automated",projects:"projects",papers:"papers",customPapers:"customPapers",filters:"filters",userLogin:"auth/login",userInfo:"https://www.googleapis.com/oauth2/v3/tokeninfo",userLogout:"auth/logout",menu_list:[{id:4,content:"Home",link:"/"},{id:5,content:"My projects",link:"/projects"},{id:6,content:"Account",link:"#"}],max_total_number_for_results:5e3,pdf_parse_server:"upload/pdf",csv_parse_server:"upload/csv",google_login_client_id:"282160526683-84sdnoqh3bc1obojfpepcbonnfg3uks4.apps.googleusercontent.com"},E=1e4,b=window.localStorage;function v(e,t,a){return g.apply(this,arguments)}function g(){return(g=Object(d.a)(m.a.mark(function e(t,a,c){var l,s,o,i,u,p;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=new AbortController,l=r.signal,n=0,s=Object.assign({mode:"cors",signal:l},a),o=setTimeout(function(){return r.abort(),void(n=2)},c),e.next=8,fetch(t,s);case 8:return i=e.sent,clearTimeout(o),e.next=12,k(i);case 12:return u=e.sent,N(i,u),e.abrupt("return",u);case 17:if(e.prev=17,e.t0=e.catch(0),2!==n){e.next=25;break}return(p=new Error("Error: Time out to get response from backend")).name="timeout",e.abrupt("return",p);case 25:if(1!==n){e.next=27;break}return e.abrupt("return",null);case 27:return e.abrupt("return",e.t0);case 28:case"end":return e.stop()}},e,null,[[0,17]])}))).apply(this,arguments)}function y(){return(y=Object(d.a)(m.a.mark(function e(t){var a,r,n,c,l,s=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.length>1&&void 0!==s[1]?s[1]:"",r="",""!==a){for(n in r="?",a)r+=n+"="+encodeURIComponent(a[n])+"&";r=r.slice(0,r.length-1)}return(c=new Headers).append("Accept","application/json"),c.append("Content-Type","application/json;charset=UTF-8"),c.append("Authorization",b.getItem("userToken")),l={method:"GET",headers:c},e.next=10,v(t+r,l,E);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function x(){return(x=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new Headers).append("Authorization",b.getItem("userToken")),r={method:"DELETE",headers:a},e.next=5,v(t,r,E);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(){return(j=Object(d.a)(m.a.mark(function e(t){var a,r,n,c,l=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:"",(r=new Headers).append("Accept","application/json, text/plain, */*"),r.append("Cache-Control","no-cache"),r.append("Content-Type","application/json;charset=UTF-8"),r.append("Authorization",b.getItem("userToken")),n=JSON.stringify(a,null,2),c={method:"POST",headers:r,body:n},e.next=10,v(t,c,E);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(){return(w=Object(d.a)(m.a.mark(function e(t){var a,r,n,c=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"",1e4,(r=new Headers).append("Accept","application/json, text/plain, */*"),r.append("Cache-Control","no-cache"),r.append("Authorization",b.getItem("userToken")),n={method:"POST",headers:r,body:a},e.next=9,v(t,n,1e4);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(){return(O=Object(d.a)(m.a.mark(function e(t){var a,r,n,c,l=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:"",(r=new Headers).append("Accept","application/json, text/plain, */*"),r.append("Cache-Control","no-cache"),r.append("Content-Type","application/json;charset=UTF-8"),r.append("Authorization",b.getItem("userToken")),n=JSON.stringify(a,null,2),c={method:"PUT",headers:r,body:n},e.next=10,v(t,c,E);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(e,t){if(e.status<200||e.status>=300){var a=new Error(e.statusText);throw a.data=e,t.payload&&(a.payload=t.payload),a}}function k(e){return S.apply(this,arguments)}function S(){return(S=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.headers.get("Content-Type"),r=null,null==a){e.next=21;break}if(!(a.indexOf("text")>-1)){e.next=7;break}return e.next=6,t.text();case 6:r=e.sent;case 7:if(!(a.indexOf("form")>-1)){e.next=11;break}return e.next=10,t.formData();case 10:r=e.sent;case 11:if(!(a.indexOf("video")>-1)){e.next=15;break}return e.next=14,t.blob();case 14:r=e.sent;case 15:if(!(a.indexOf("json")>-1)){e.next=19;break}return e.next=18,t.json();case 18:r=e.sent;case 19:e.next=25;break;case 21:if(null==t){e.next=25;break}return e.next=24,t.text();case 24:r=e.sent;case 25:return e.abrupt("return",r);case 26:case"end":return e.stop()}},e)}))).apply(this,arguments)}var C={get:function(e){return y.apply(this,arguments)},post:function(e){return j.apply(this,arguments)},delete:function(e){return x.apply(this,arguments)},put:function(e){return O.apply(this,arguments)},postFile:function(e){return w.apply(this,arguments)},abortRequest:function(){r.abort(),n=1,console.log("abort")}};function _(){return(_=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.userLogin,e.next=3,C.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(){return(P=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.userInfo,e.next=3,C.get(a,{id_token:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(){return(I=Object(d.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.home+h.userLogout,e.next=3,C.get(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var T={postTokenId:function(e){return _.apply(this,arguments)},getUserByTokenId:function(e){return P.apply(this,arguments)},logoutUser:function(){return I.apply(this,arguments)}},B=Object(u.e)(function(e){var t=Object(c.useState)(!0),a=Object(f.a)(t,2),r=a[0],n=a[1],s=Object(c.useContext)(F),o=e.history,i=e.location;Object(c.useEffect)(function(){r?(console.log("error mountes"),n(!1)):s.setError(null)},[i.pathname]),Object(c.useEffect)(function(){try{if(console.log(s.error.payload.statusCode),401===s.error.payload.statusCode||"the token does not match any user!"===s.error.payload.message){console.log("unauth call");var e=window.localStorage;if(e.getItem("userToken")){var t=function(){var t=Object(d.a)(m.a.mark(function t(){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.getUserByTokenId(e.getItem("userToken"));case 2:(a=t.sent)&&a.message?(console.log("INVALID TOKEN"),e.removeItem("userToken"),s.setUser(null)):console.log("VALID TOKEN");case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();console.log("checking token"),t()}console.log("pushing back"),o.goBack()}}catch(a){console.log("YOU MAY NEED TO CHANGE THE HOME URL PARAMETER FROM 'config/index.js'")}return function(){s.setError(null)}},[]);var u=l.a.createElement(l.a.Fragment,null);return u=s.error.payload?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Error code:"),l.a.createElement("p",null,s.error.payload.statusCode),l.a.createElement("p",null,"Error name:"),l.a.createElement("p",null,s.error.payload.error),l.a.createElement("p",null,"Error message"),l.a.createElement("p",null,s.error.payload.message)):l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Error name:"),l.a.createElement("p",null,s.error.name),l.a.createElement("p",null,"Error message"),l.a.createElement("p",null,s.error.message)),u=l.a.createElement("div",{className:"error-wrapper",style:{textAlign:"center"}},u,l.a.createElement("br",null),l.a.createElement("button",{type:"button",onClick:function(){o.goBack(),s.setError(null)}},l.a.createElement("u",null,"return to previous page")),l.a.createElement("br",null),l.a.createElement("p",null,"or"),l.a.createElement("br",null),l.a.createElement("button",{type:"button",onClick:function(){s.setError(null)}},l.a.createElement("u",null,"refresh")))}),F=l.a.createContext(),L=function(e){var t=Object(c.useState)(null),a=Object(f.a)(t,2),r=a[0],n=a[1],s=Object(c.useState)(!0),o=Object(f.a)(s,2),i=o[0],u=o[1],p=Object(c.useState)(null),h=Object(f.a)(p,2),E=h[0],b=h[1],v=Object(c.useState)(l.a.createElement("div",{className:"nav-elements"}," ",l.a.createElement("h2",{className:"static-title"},"HOME")," ")),g=Object(f.a)(v,2),y=g[0],x=g[1],j=Object(c.useState)(void 0),w=Object(f.a)(j,2),O=w[0],N=w[1],k=Object(c.useState)(""),S=Object(f.a)(k,2),C=S[0],_=S[1],P={user:r,setUser:n,userFetch:i,setUserFetch:u,error:E,setError:b,title:y,setTitle:x,notificationMessage:O,setNotificationMessage:N,projectName:C,setProjectName:_};return Object(c.useEffect)(function(){var e=window.localStorage;e.getItem("userToken")?function(){var t=Object(d.a)(m.a.mark(function t(){var a,r;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.getUserByTokenId(e.getItem("userToken"));case 2:(a=t.sent)&&a.message||!a.email?e.removeItem("userToken"):(r={email:a.email,name:a.given_name,surname:a.family_name,image:a.picture},n(r)),u(!1);case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()():u(!1)},[]),E?l.a.createElement(F.Provider,{value:P},l.a.createElement(B,null)):l.a.createElement(F.Provider,{value:P},e.children)},M=Object(u.e)(function(e){var t=Object(c.useContext)(F);Object(c.useEffect)(function(){t.setTitle(l.a.createElement("div",{className:"nav-elements"}," ",l.a.createElement("h2",{className:"static-title"},"HOME")," "))},[]);var a=e.history,r=e.location;return Object(c.useEffect)(function(){t.user||a.push("/")},[r.pathname]),l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Systematic Literature Review manager"),l.a.createElement("h2",{style:{fontSize:22,fontWeight:"normal"}},"the system right now allows you to"),l.a.createElement("ul",{style:{fontSize:18,fontWeight:"lighter"}},l.a.createElement("li",null,"browse a list of prjects"),l.a.createElement("li",null,"add a new project"),l.a.createElement("li",null,"browse the list of papers on a project"),l.a.createElement("li",null,"search(from scopus) and add papers to a project"),l.a.createElement("li",null,"add custom papers based on a file or form data"),l.a.createElement("li",null,"'fake search' similar papers")),l.a.createElement("h2",{style:{fontSize:22,fontWeight:"normal"}},"notes"),l.a.createElement("ul",{style:{fontSize:18,fontWeight:"lighter"}},l.a.createElement("li",null,l.a.createElement("i",null,"the scopus search works partially(can't retrieve the description)"),l.a.createElement("ul",null,l.a.createElement("li",{style:{fontSize:16}},l.a.createElement("i",null,'from Elsevier developer portal : "The data available depends on your institutional subscriptions, and only when you\'re making calls from within your institutional network are you considered a subscriber"')))),l.a.createElement("li",null,l.a.createElement("i",null,"the options don't affect the search, for now"))))}),A=a(6),q=a(16),R=a.n(q);function D(){return(D=Object(d.a)(m.a.mark(function e(){var t,a,r,n=arguments;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",a=h.home+h.projects,e.next=4,C.get(a,t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function X(){return(X=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.projects+"/"+t,e.next=3,C.get(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(){return(z=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.projects+"/"+t+"/collaborators",e.next=3,C.get(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function U(){return(U=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.projects,e.next=3,C.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(){return(H=Object(d.a)(m.a.mark(function e(t,a){var r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.home+h.projects+"/"+t+"/collaborators",e.next=3,C.post(r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function G(){return(G=Object(d.a)(m.a.mark(function e(t,a){var r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.home+h.projects+"/"+t,e.next=3,C.put(r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function J(){return(J=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.projects+"/"+t,e.next=3,C.delete(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function V(){return(V=Object(d.a)(m.a.mark(function e(t,a){var r,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.home+h.projects+"/"+t+"/collaborators/"+a,e.next=3,C.delete(r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Y={getProjectsList:function(){return D.apply(this,arguments)},getProject:function(e){return X.apply(this,arguments)},postProject:function(e){return U.apply(this,arguments)},putProject:function(e,t){return G.apply(this,arguments)},deleteProject:function(e){return J.apply(this,arguments)},abortRequest:C.abortRequest,getProjectCollaborators:function(e){return z.apply(this,arguments)},removeProjectCollaborator:function(e,t){return V.apply(this,arguments)},addProjectCollaborator:function(e,t){return H.apply(this,arguments)}},W=function(e){return l.a.createElement("svg",{id:"loading-icon",className:e.class,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("g",null,l.a.createElement("path",{id:"loading-circle1",d:" M 500, 500 m -160, 0 a 160,160 0 1,0 320,0 a 160,160 0 1,0 -320,0 "}),l.a.createElement("path",{id:"loading-circle2",d:" M 500, 500 m -305, 0 a 305,305 0 1,0 610,0 a 305,305 0 1,0 -610,0 "})))},$=a(5),K=function(e){return l.a.createElement("svg",{id:"close-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("line",{className:"ln",x1:"134",y1:"866",x2:"866",y2:"134"}),l.a.createElement("line",{className:"ln",x1:"134",y1:"134",x2:"866",y2:"866"}))};var Z=function(e){var t=Object(c.useRef)(!1),r=a(39),n=r.object().shape({name:r.string().required("please enter a title"),description:r.string().required("please enter a description")}),s=Object(c.useContext)(F);return Object(c.useEffect)(function(){return t.current=!0,function(){t.current=!1}},[]),l.a.createElement(l.a.Fragment,null,l.a.createElement($.c,{initialValues:{name:"",description:""},validationSchema:n,onSubmit:function(){var a=Object(d.a)(m.a.mark(function a(r,n){var c,l,o;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=n.setSubmitting,l={name:r.name,description:r.description},a.next=4,Y.postProject(l);case 4:o=a.sent,t.current&&o.message?s.setError(o):t.current&&e.history.push("/projects/"+o.id),t.current&&c(!1);case 7:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}(),validateOnBlur:!1},function(t){var a=t.errors,r=t.touched,n=t.isSubmitting,c=(t.setErrors,t.validateField),s=t.handleChange;return l.a.createElement($.b,{className:"modal floating-form add-project",style:{visibility:e.visibility?"":"hidden"}},l.a.createElement("button",{type:"button",className:"close-btn",onClick:function(t){e.setVisibility(!e.visibility)}},l.a.createElement(K,null)),l.a.createElement("br",null),l.a.createElement($.a,{style:{borderBottom:a.name&&r.name?"solid 1px #d81e1e":""},name:"name",type:"text",placeholder:"Please enter a project title",onChange:function(e){s(e),c("name")}}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement($.a,{style:{borderBottom:a.description&&r.description?"solid 1px #d81e1e":""},name:"description",component:"textarea",placeholder:"Please describe the topic and focus of this new project"}),l.a.createElement("br",null),l.a.createElement("button",{type:"submit",disabled:n||a.name&&r.name||a.description&&r.description},"Add Project"))}))};var Q=function(e){var t=e.start,a=e.count,r=e.totalResults,n=e.path;r>h.max_total_number_for_results&&(r=h.max_total_number_for_results),n=function(e){var t=window.location.href.split("?")[1];if(t){t=t.split("#")[0];for(var a="",r=t.split("&"),n=0;n<r.length;n++){var c=r[n].split("=")[0];"start"!==c&&"count"!==c&&(a+=r[n]+"&")}e=e+"?"+a}else e+="?";return e}(n);var c="",s="",o="",u="",p=[],m=Math.floor(t/a)+1,d=Math.ceil(r/a);if(d>1){m>1&&(c=l.a.createElement("li",null,l.a.createElement(i.b,{className:"prev-page",to:n+"start="+((m-1)*a>0?(m-2)*a:0)+"&count="+a},"<"))),m<d&&(s=l.a.createElement("li",null,l.a.createElement(i.b,{className:"next-page",to:n+"start="+m*a+"&count="+a},">"))),m>6&&(o=l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement(i.b,{className:"first-page",to:n+"start=0&count="+a},"1")),l.a.createElement("li",null,l.a.createElement("span",null,"...")))),m<d-5&&(u=l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,l.a.createElement("span",null,"...")),l.a.createElement("li",null,l.a.createElement(i.b,{style:{display:"inline-block"},className:"last-page",to:n+"start="+(d-1)*a+"&count="+a},d))));for(var f=m-4;f<=m+4;f++)f>0&&f<=d&&(f!==m?p.push(l.a.createElement(i.b,{className:"normal-page",to:n+"start="+(f-1)*a+"&count="+a},f)):p.push(l.a.createElement("span",{className:"current-page"},m)))}return l.a.createElement("ul",{className:"pagination"},c,o,p.map(function(e,t){return l.a.createElement("li",{style:{display:"inline-block",margin:10},key:t},e)}),u,s)};function ee(e,t,a){if(null===e||null===t)return!1;if(0===e.length||0===t.length)return!1;for(var r=function(r){if(!e.some(function(e){return e[a]===t[r][a]}))return{v:!1}},n=0;n<t.length;++n){var c=r(n);if("object"===typeof c)return c.v}return!0}function te(e,t){return"/"===e.charAt(e.length-1)?e.slice(0,-1)+t:e+t}function ae(e){for(var t="?",a=Object.keys(e),r=0;r<a.length;r++)"date_created"===e.orderBy&&"sort"===a[r]||(t+=a[r]+"="+encodeURIComponent(e[a[r]]),r!==a.length-1&&(t+="&"));return t}function re(e,t,a){for(var r=-1,n=0;n<e.length;n++)if(e[n][t]===a){r=n;break}return r}var ne=function(e){var t=e.cls,a=e.handler;return l.a.createElement("div",{className:"cover "+t,onClick:function(e){a(!1)}})},ce=function(e){return l.a.createElement("svg",{version:"1.1",id:"options-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("path",{className:"st0",d:"M214,482.1"}),l.a.createElement("line",{className:"st-options",x1:"500",y1:"250",x2:"500",y2:"250"}),l.a.createElement("line",{className:"st-options",x1:"500",y1:"500",x2:"500",y2:"500"}),l.a.createElement("line",{className:"st-options",x1:"500",y1:"750",x2:"500",y2:"750"}))},le=function(e){var t=e.cls,a=e.options,r=e.handler,n=e.target,s=e.data,o=Object(c.useState)(!1),i=Object(f.a)(o,2),u=i[0],p=i[1];return l.a.createElement("div",{className:t},l.a.createElement("button",{type:"button",onBlur:function(e){u&&p(!1)},onMouseDown:function(e){p(!u)}},l.a.createElement(ce,null)),l.a.createElement("div",{style:{fontSize:u?"12px":"0px",padding:u?"2px":"0px",border:u?"solid 1px #e8e8e8":"solid 0px #e8e8e800"},className:"options-list"},a.map(function(e,t){return l.a.createElement("div",{key:t,onMouseDown:function(t){return r(n,e,s)},className:"option"},e)})))},se=function(e){return l.a.createElement("svg",{version:"1.1",id:"empty-folder",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("g",null,l.a.createElement("g",null,l.a.createElement("path",{className:"st0-empty-folder",d:"M967.9,448.6v260c0,15.1-12.2,27.3-27.3,27.3H59.4c-15.1,0-27.3-12.2-27.3-27.3v-260c0-0.3,0-0.7,0-1 c0-0.2,0-0.4,0.1-0.6c0-0.2,0-0.4,0.1-0.7c0-0.2,0.1-0.4,0.1-0.6c0-0.3,0.1-0.6,0.2-1c0.6-2.4,1.7-4.7,3.5-6.8l141.3-168.3 c2.9-3.4,7.1-5.4,11.6-5.4h89.1c8.5,0,15.9,5.4,18.5,13.5l11.4,35.1c6.3,19.3,24.3,32.4,44.7,32.4h294.4 c20.3,0,38.4-13.1,44.7-32.4l11.4-35.1c2.6-8,10.1-13.5,18.5-13.5h89.1c4.5,0,8.8,2,11.6,5.4l141.3,168.3c1.8,2.1,2.9,4.4,3.5,6.8 c0.1,0.3,0.2,0.6,0.2,1c0,0.2,0.1,0.4,0.1,0.6s0.1,0.5,0.1,0.7s0.1,0.4,0.1,0.6C967.8,447.9,967.9,448.2,967.9,448.6z"}),l.a.createElement("path",{d:"M974.9,448.6c0.1,31-0.8,62-1.4,93c-0.2,7.8-0.3,15.5-0.4,23.3c-0.1,7.8-0.1,15.5-0.2,23.3v46.5v46.5v23.3v2.9 c0,0.5,0,0.9,0,1.5l-0.1,1.7c0,1.1-0.2,2.3-0.4,3.4c-0.1,1.1-0.5,2.2-0.7,3.4c-1.2,4.4-3.4,8.6-6.4,12.1s-6.7,6.4-10.8,8.3 c-4.1,2-8.7,3.1-13.3,3.1l-23.3,0.1l-46.5,0.1l-372.1,1.1L127,742.9L80.5,743H68.9h-5.8h-2.9h-0.7h-0.9l-1.8-0.1 c-4.9-0.4-9.7-1.8-14-4.2s-8-5.7-11-9.6c-2.9-3.9-5-8.5-6.1-13.3c-0.3-1.2-0.4-2.4-0.6-3.6c-0.1-1.2-0.1-2.4-0.2-3.7v-5.8v-23.3 L24.8,633v-93l0.2-46.5l0.1-23.3l0.1-11.6v-5.8v-2.9c0-0.5,0-0.9,0-1.5v-0.9c0,0,0-0.6,0.1-0.9c0-0.3,0.1-0.7,0.1-1l-0.1,1.4 c0-0.5,0.1-1,0.1-1.5l0.1-0.6l0.1-0.6l-0.1,0.5l0.2-1c0.1-0.3,0.2-0.7,0.2-1c0.1-0.5,0.3-1.1,0.5-1.6c0.4-1.1,0.8-2.1,1.3-3.1 s1.1-1.9,1.7-2.8c0.3-0.4,0.6-0.9,1-1.3l0.9-1l6.1-7.1l12.1-14.3L73.6,383l48.4-57l48.5-56.9l1.5-1.8l0.8-0.9l0.4-0.5l0.5-0.6 c1.4-1.6,3.1-2.9,5-4c1.8-1.1,3.9-1.8,5.9-2.3c1-0.2,2.1-0.4,3.2-0.4c0.3,0,0.5,0,0.8,0h0.7h1.2l18.7,0.1l37.4,0.3l18.7,0.1 l9.4,0.1h2.3h1.2l1.4,0.1c1.9,0.1,3.9,0.4,5.7,1c3.7,1.1,7.1,3.2,9.9,6c1.4,1.4,2.6,2.9,3.6,4.6s1.8,3.4,2.4,5.3l5.7,17.8 l5.7,17.8c1.8,5.3,4.6,10.3,8.3,14.6c7.4,8.5,18.3,13.9,29.7,14.5l2.1,0.1h2.3h4.7h9.4l18.7,0.1l37.4,0.1l74.8,0.1l74.8-0.1 l37.4-0.1l18.7-0.1h9.4h4.7h2.3l2.1-0.1c11.3-0.5,22.2-6,29.6-14.5c3.7-4.2,6.5-9.2,8.3-14.5l5.7-17.8l5.6-17.8 c0.6-1.9,1.4-3.6,2.4-5.3c1-1.7,2.3-3.2,3.6-4.6c2.8-2.8,6.2-4.9,10-6c1.9-0.6,3.8-0.9,5.8-1.1l1.5-0.1h1.2h2.3l9.4-0.1l18.7-0.1 l37.4-0.3l18.7-0.1h1.2h0.7c0.3,0,0.5,0,0.8,0c1.1,0.1,2.2,0.2,3.2,0.4c2.1,0.5,4.2,1.2,6,2.3c1.9,1.1,3.6,2.4,5.1,4l0.5,0.6 l0.4,0.5l0.8,0.9l1.5,1.8l48.5,56.9l48.4,57.1l24.1,28.6l12.1,14.3l6,7.1l0.9,1.1c0.3,0.4,0.7,0.9,1,1.3c0.6,0.9,1.2,1.8,1.7,2.8 s0.9,2,1.3,3.1c0.2,0.5,0.3,1.1,0.5,1.6c0.1,0.2,0.1,0.6,0.2,1l0.2,1l-0.1-0.5l0.1,0.6l0.1,0.6c0.1,0.5,0.1,1,0.1,1.5l-0.1-1.4 c0.1,0.4,0.1,0.8,0.2,1.2v0.6v0.3L974.9,448.6z M960.8,448.6v-0.7v-0.2c0,0.1,0,0.1,0,0.2s0,0.2,0.1,0.4l-0.1-1.4 c0,0.1,0,0.2,0,0.2l0,0V447l-0.1-0.5l0,0v-0.1c0,0,0,0,0-0.2c-0.1-0.3-0.1-0.4-0.2-0.6c-0.1-0.4-0.3-0.8-0.5-1.2 c-0.2-0.4-0.4-0.8-0.7-1.2c-0.1-0.2-0.3-0.4-0.4-0.6l-0.6-0.7l-6-7.2l-12-14.4l-24-28.7l-47.8-57.5l-47.7-57.6l-2.8-3.4 c-0.6-0.7-1.4-1.3-2.2-1.8s-1.7-0.8-2.6-1.1c-0.5-0.1-0.9-0.2-1.4-0.2c-0.1,0-0.2,0-0.4,0c-0.1,0-0.2,0-0.4,0h-1.2l-18.7-0.1 l-37.4-0.3l-18.7-0.1l-9.4-0.1h-2.3h-1.2h-0.9c-1.1,0.1-2.3,0.2-3.4,0.6c-4.4,1.3-8.1,4.8-9.6,9.2l-5.9,17.8l-5.9,17.8 c-2.3,6.5-5.7,12.5-10.3,17.6c-9.1,10.2-22.4,16.6-36,17.2L500,349.2l-149.8,0.2c-13.6-0.6-26.9-6.9-35.9-17.2 c-4.6-5.1-8-11.1-10.3-17.6l-5.9-17.8l-5.9-17.8c-1.5-4.5-5.2-8.1-9.7-9.4c-1.1-0.4-2.3-0.5-3.4-0.6h-0.9H277h-2.3l-9.4,0.1 l-18.7,0.1l-37.4,0.3l-18.7,0.1h-1.2c-0.2,0-0.3,0-0.5,0c-0.1,0-0.2,0-0.4,0c-0.5,0-1,0.1-1.5,0.2c-1,0.2-1.9,0.6-2.7,1.1 c-0.9,0.5-1.6,1.1-2.3,1.9l-2.8,3.4l-47.7,57.6l-47.8,57.6l-23.9,28.8l-11.9,14.4l-6,7.2l-0.6,0.8c-0.1,0.2-0.3,0.4-0.4,0.6 c-0.3,0.4-0.5,0.8-0.7,1.2c-0.2,0.4-0.4,0.8-0.5,1.2c-0.1,0.2-0.1,0.4-0.2,0.6c0,0.2,0,0.1,0,0.2v0.1v0.1l-0.1,0.5v0.1 c0,0,0,0.1,0,0s0-0.2,0-0.2l-0.1,1.4c0-0.1,0.1-0.2,0.1-0.3c0-0.1,0-0.3,0-0.2v0.6c0,0.4,0,0.9,0,1.4v2.9v5.8l0.1,11.6l0.1,23.3 l0.2,46.5v93l-0.1,46.5v23.3v5.8l0.1,2.1c0.1,0.7,0.2,1.4,0.3,2.1c0.6,2.8,1.8,5.4,3.5,7.7s3.9,4.2,6.4,5.6 c2.5,1.4,5.3,2.2,8.1,2.4l1.1,0.1h0.5h0.7h2.9H69h11.6l46.5,0.1l372.1,0.8l372.1,1.1l46.5,0.1H941c6.3-0.1,12.5-3,16.6-7.9 c2.1-2.4,3.5-5.3,4.4-8.3c0.2-0.8,0.4-1.5,0.5-2.3s0.3-1.6,0.3-2.4l0.1-1.2c0-0.4,0-0.9,0-1.4v-2.9V681v-46.5V588 c0-7.8-0.1-15.5-0.2-23.3c-0.1-7.8-0.2-15.5-0.4-23.3C961.6,510.6,960.7,479.6,960.8,448.6z"})),l.a.createElement("g",null,l.a.createElement("path",{className:"st1-empty-folder",d:"M952.8,686.4l-120.7-220l-9.8-17.9c-2.7-4.8-7.7-7.8-13.2-7.8H190.9c-5.5,0-10.6,3-13.2,7.8l-9.8,17.9 L50,681.3"}),l.a.createElement("path",{className:"st2-empty-folder",d:"M951.1,687.4L915,622.6l-36-64.9l-35.8-65l-17.9-32.5l-4.5-8.1l-1.1-2c-0.3-0.6-0.6-1.1-1-1.6 c-0.8-1-1.7-1.8-2.7-2.6c-2-1.4-4.5-2.2-7-2.2h-9.3l-296.8,0.2l-296.8-0.2h-9.3h-4.6H191h-0.9c-0.6,0.1-1.2,0.1-1.8,0.3 c-2.4,0.5-4.6,1.8-6.3,3.7c-0.4,0.5-0.8,1-1.1,1.5c-0.2,0.3-0.3,0.5-0.5,0.8l-0.6,1l-2.2,4.1l-17.9,32.5l-35.8,65l-36,64.9 l-36.1,64.8l-3.5-1.9L83.5,615l35.4-65.2l35.6-65.1l17.8-32.6l2.2-4.1l0.6-1c0.2-0.4,0.5-0.8,0.7-1.2c0.5-0.8,1.1-1.5,1.7-2.2 c2.5-2.8,5.8-4.7,9.5-5.6c0.9-0.2,1.8-0.3,2.8-0.4h1.4h1.2h4.6h9.3l296.8-0.2l296.8,0.2h9.3c3.7,0,7.4,1.2,10.5,3.3 c1.5,1.1,2.9,2.4,4,3.8c0.6,0.7,1.1,1.5,1.5,2.3l1.1,2l4.5,8.1l17.8,32.6l35.6,65.1l35.4,65.2l35.3,65.3L951.1,687.4z"})),l.a.createElement("path",{className:"st3-empty-folder",d:"M967.9,448.6v260c0,15.1-12.2,27.3-27.3,27.3H59.4c-15.1,0-27.3-12.2-27.3-27.3v-260c0,8.7,6.8,16.9,16.8,16.9 h111.4c12.9,0,24.4,8.3,28.3,20.6l17.4,53.8c9.6,29.6,37.2,49.7,68.4,49.7h451c31.2,0,58.8-20.1,68.4-49.7l17.4-53.8 c4-12.3,15.4-20.6,28.3-20.6H951C961.1,465.5,967.9,457.3,967.9,448.6z"})))},oe=function(e){var t,a=e.projectsList,r=e.path,n=e.handleDelete,c=["delete"];return t=0===a.length?l.a.createElement("div",{className:"empty-folder-wrapper"}," ",l.a.createElement(se,null)," ",l.a.createElement("p",{className:"empty-folder-description"}," You don't have any projects yet ")):a.map(function(e,t){return l.a.createElement("div",{key:e.id,className:"light-modal project-card"},l.a.createElement(le,{options:c,handler:n,target:e.id,cls:"card-options project-card-options"}),l.a.createElement(i.b,{to:te(r,"/"+e.id)},l.a.createElement("h3",null,e.data.name),l.a.createElement("p",{className:"description"},e.data.description),l.a.createElement("div",{className:"project-dates"},l.a.createElement("p",null),l.a.createElement("p",null,"last modified on ",l.a.createElement("i",null,e.date_last_modified.slice(0,10))))))}),l.a.createElement("div",{className:0===a.length?"project-cards-holder-empty":"project-cards-holder"},t)};var ie=function(e){var t=Object(c.useRef)(!1),a=Object(c.useState)([]),r=Object(f.a)(a,2),n=r[0],s=r[1],o=Object(c.useState)(0),i=Object(f.a)(o,2),u=i[0],p=i[1],h=Object(c.useState)(!1),E=Object(f.a)(h,2),b=E[0],v=E[1],g=Object(c.useState)(!1),y=Object(f.a)(g,2),x=y[0],j=y[1],w=Object(c.useContext)(F),O=function(e){var t=R.a.parse(e),a=t.count||10;return{start:t.start||0,count:a}}(e.location.search);function N(){return(N=Object(d.a)(m.a.mark(function e(a){var r,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleting "+a),e.next=3,Y.deleteProject(a);case 3:r=e.sent,t.current&&""===r?(c=n.filter(function(e){return e.id!==a}),s(c),w.setNotificationMessage("Successfully deleted")):t.current&&r&&r.message&&w.setError(r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(c.useEffect)(function(){return t.current=!0,w.setTitle(l.a.createElement("div",{className:"nav-elements"}," ",l.a.createElement("h2",{className:"static-title"},"PROJECTS")," ")),w.setProjectName(""),function(){t.current=!1}},[]),Object(c.useEffect)(function(){var e=!0;return function(){var t=Object(d.a)(m.a.mark(function t(){var a,r,n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return v(!1),t.next=3,Y.getProjectsList(Object(A.a)({orderBy:"date_last_modified"},O));case 3:a=t.sent,e&&a&&"Not Found"===a.message?(s([]),p(0),v(!0)):e&&a&&a.message?w.setError(a):e&&a&&(r=a.results.filter(function(e,t){if(t%2)return e}),n=[],n=a.results.filter(function(e,t){if(!(t%2))return e}),s(n.concat(r)),p(a.totalResults),v(!0));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[O.start,O.count]),!1===b?l.a.createElement(W,null):l.a.createElement("div",null,l.a.createElement(ne,{cls:x?"full-screen":"",handler:j}),l.a.createElement(oe,{projectsList:n,path:e.match.url,handleDelete:function(e){return N.apply(this,arguments)}}),l.a.createElement(Q,{start:O.start,count:O.count,totalResults:u,path:e.match.url}),l.a.createElement(Z,{visibility:x,setVisibility:j,history:e.history}),l.a.createElement("div",{className:"bottom-right-button-holder"},l.a.createElement("button",{className:"bottom-right-btn add-project-btn",type:"button",value:"toggle-insert-form",onClick:function(e){j(!x)}},l.a.createElement("div",{className:"btn-title"},"Add Project"),l.a.createElement("div",{className:"btn-icon"}," "))))},ue=a(9);function pe(){return(pe=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.search,e.next=3,C.get(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(){return(me=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.papers+"/"+t,e.next=3,C.get(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function de(){return(de=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.search_similar,e.next=3,C.post(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fe(){return(fe=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.search_automated,e.next=3,C.post(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var he={search:function(e){return pe.apply(this,arguments)},selectById:function(e){return me.apply(this,arguments)},searchSimilar:function(e){return de.apply(this,arguments)},searchAutomated:function(e){return fe.apply(this,arguments)},abortRequest:C.abortRequest},Ee=function(e){return l.a.createElement("svg",{id:"select-tick",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("polyline",{className:"st-tick",points:"918,192.3 389.3,807.7 82,450 "},l.a.createElement("animate",{attributeName:"points",dur:"0.2s",repeatCount:"1",fill:"freeze",from:"500,600 400,700 200,750",to:"918,192.3 389.3,807.7 82,450 "})))},be=function(e){var t=e.val,a=e.name,r=e.label,n=e.isChecked,s=e.handler,o=Object(c.useState)(l.a.createElement(l.a.Fragment,null)),i=Object(f.a)(o,2),u=i[0],p=i[1];return Object(c.useEffect)(function(){p(n?l.a.createElement(Ee,null):l.a.createElement(l.a.Fragment,null))},[n]),l.a.createElement("label",{className:"checkbox-container"},l.a.createElement("input",{type:"checkbox",value:t,name:a,checked:n,onChange:function(e){s(e)}}),l.a.createElement("span",{className:"checkmark"},u),l.a.createElement("span",{className:"name"},r))},ve=a(32),ge=a.n(ve);function ye(){return(ye=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.papers,e.next=3,C.get(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xe(){return(xe=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.papers+"/"+t,e.next=3,C.get(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function je(){return(je=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.papers,e.next=3,C.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function we(){return(we=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.customPapers,e.next=3,C.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Oe(){return(Oe=Object(d.a)(m.a.mark(function e(t,a){var r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.home+h.papers+"/"+t,e.next=3,C.put(r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ne(){return(Ne=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.papers+"/"+t,e.next=3,C.delete(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ke={getPapersList:function(e){return ye.apply(this,arguments)},getPaper:function(e){return xe.apply(this,arguments)},postPaperIntoProject:function(e){return je.apply(this,arguments)},postCustomPaperIntoProject:function(e){return we.apply(this,arguments)},putPaper:function(e,t){return Oe.apply(this,arguments)},deletePaper:function(e){return Ne.apply(this,arguments)},abortRequest:C.abortRequest},Se=function(e){return l.a.createElement("svg",{version:"1.1",id:"no-papers",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("line",{className:"st0-no-papers",x1:"790",y1:"223.1",x2:"790",y2:"255.6"}),l.a.createElement("line",{className:"st1-no-papers",x1:"790",y1:"357.8",x2:"790",y2:"801.3"}),l.a.createElement("polyline",{className:"st0-no-papers",points:"790,852.4 790,884.9 757.5,884.9 \t\t"}),l.a.createElement("line",{className:"st2-no-papers",x1:"635.6",y1:"884.9",x2:"303.4",y2:"884.9"}),l.a.createElement("polyline",{className:"st0-no-papers",points:"242.5,884.9 210,884.9 210,852.4 \t\t"}),l.a.createElement("line",{className:"st3-no-papers",x1:"210",y1:"757.8",x2:"210",y2:"194.9"}),l.a.createElement("polyline",{className:"st0-no-papers",points:"210,147.6 210,115.1 242.5,115.1 \t\t"}),l.a.createElement("polyline",{className:"st4-no-papers",points:"338.4,115.1 682,115.1 733.1,166.2 \t\t"}),l.a.createElement("polyline",{className:"st0-no-papers",points:"767,200.1 790,223.1 757.5,223.1 \t\t"}),l.a.createElement("polyline",{className:"st0-no-papers",points:"714.5,223.1 682,223.1 682,190.6 \t\t"}),l.a.createElement("line",{className:"st0-no-papers",x1:"682",y1:"147.6",x2:"682",y2:"115.1"}))},Ce=function(e){return l.a.createElement("svg",{version:"1.1",id:"info",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("line",{className:"st0-info",x1:"500",y1:"369",x2:"500",y2:"817"}),l.a.createElement("circle",{className:"st1-info",cx:"500",cy:"198",r:"48"}))},_e=function(e){var t=e.confidence,a=Object(c.useState)(!1),r=Object(f.a)(a,2),n=r[0],s=r[1];return l.a.createElement("div",{className:"side-info-wrapper"},l.a.createElement("div",{className:"side-info"},l.a.createElement("div",{className:"confidence"},t.value),l.a.createElement("div",{className:"confidence-info"},l.a.createElement("button",{type:"button",onClick:function(e){s(!n)}},l.a.createElement(Ce,null)),l.a.createElement("div",{className:"confidence-details",style:{display:n?"block":"none"}},t.details.map(function(e,t){return l.a.createElement("p",{key:t},l.a.createElement("span",null,e.detail)," ",l.a.createElement("span",{className:"side-detail"},e.percentage))})))))},Pe=function(e){var t=e.papersList,a=e.location,r=e.history,n=Object(c.useRef)(!1),s=Object(c.useState)(t),o=Object(f.a)(s,2),u=o[0],p=o[1],h=Object(c.useContext)(F),E=["delete","search similar"];function b(e,t,a){return v.apply(this,arguments)}function v(){return(v=Object(d.a)(m.a.mark(function e(t,c,l){var s,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("delete"!==c){e.next=8;break}return console.log("deleting "+t),e.next=4,ke.deletePaper(t);case 4:s=e.sent,n.current&&s.message?h.setError(s):n.current&&null!==s&&(h.setNotificationMessage("Successfully deleted"),o=u.filter(function(e){return e.id!==t}),p(o)),e.next=9;break;case 8:"search similar"===c&&(console.log("here you want to search for a similar paper"),console.log(a),window.localStorage.setItem("targetPaperData",JSON.stringify(l)),r.push(te(a.pathname,"/searchsimilar")));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(c.useEffect)(function(){return n.current=!0,function(){n.current=!1}},[]),0===u.length?l.a.createElement("div",{className:"empty-list-wrapper"}," ",l.a.createElement(Se,null)," ",l.a.createElement("p",{className:"empty-list-description"}," There are no papers here, you can add new ones by searching ")):u.map(function(e){return l.a.createElement("div",{key:e.id,className:"generic-card paper-card"},l.a.createElement(le,{options:E,handler:b,target:e.id,data:e.data,cls:"card-options"}),l.a.createElement(i.b,{to:"#"},l.a.createElement("h3",null,e.data.title?e.data.title:"[MISSING TITLE]")),l.a.createElement("div",{className:"extra-info"},l.a.createElement("p",{className:"authors"},e.data.authors?e.data.authors:"[MISSING AUTHORS]"),l.a.createElement("p",{className:"eid"},e.data.eid?e.data.eid:"[MISSING EID]"),l.a.createElement("p",{className:"date"},e.data.year?e.data.year:"[MISSING YEAR]")),l.a.createElement(ge.a,{text:e.data.abstract?e.data.abstract:"[MISSING ABSTRACT]",lines:4,ellipsis:"...",className:"paragraph",moreText:"more",lessText:"less"}))})},Ie=Object(u.e)(function(e){var t=e.papersList,a=e.handlePaperSelection,r=e.selectedEidList,n=e.history,s=e.match,o=e.setTargetPaperData,u=["search similar"];Object(c.useContext)(F);function p(e,t,a){return f.apply(this,arguments)}function f(){return(f=Object(d.a)(m.a.mark(function e(t,a,r){var c,l;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"search similar"===a&&(console.log("here you want to search for a similar paper"),console.log(r),c="/"===s.path[s.path.length-1]?s.path.substring(0,s.path.length-1):s.path,l=c,"h"===c[c.length-1]?(l=c+"similar",window.localStorage.setItem("targetPaperData",JSON.stringify(r)),n.push(l)):o(r));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return t.map(function(e,t){return l.a.createElement("div",{key:t,className:"generic-card paper-card"},l.a.createElement(be,{name:e.title,label:"",val:e.eid,isChecked:r.includes(e.eid),handler:a}),l.a.createElement(le,{options:u,handler:p,target:e.id,data:e,cls:"card-options"}),l.a.createElement(i.b,{to:"#"},l.a.createElement("h3",null,e.title?e.title:"[MISSING TITLE]")),l.a.createElement("div",{className:"extra-info"},l.a.createElement("p",{className:"authors"},e.authors?e.authors:"[MISSING AUTHORS]"),l.a.createElement("p",{className:"eid"},e.eid?e.eid:"[MISSING EID]"),l.a.createElement("p",{className:"date"},e.year?e.year:"[MISSING YEAR]")),l.a.createElement(ge.a,{text:e.abstract?e.abstract:"[MISSING ABSTRACT]",lines:4,ellipsis:"...",className:"paragraph",moreText:"more",lessText:"less"}))})}),Te=Object(u.e)(function(e){var t=e.papersList,a=e.handlePaperSelection,r=e.selectedEidList;return t.map(function(e,t){return l.a.createElement("div",{key:t,className:"generic-card paper-card"},l.a.createElement(be,{name:e.title,label:"",val:e.eid,isChecked:r.includes(e.eid),handler:a}),l.a.createElement(_e,{confidence:{value:e.confidence,details:[{detail:"detail 1",percentage:"67%"},{detail:"detail 2",percentage:"64%"},{detail:"detail 3",percentage:"59%"}]}}),l.a.createElement(i.b,{to:"#"},l.a.createElement("h3",{className:"auto-paper-title"},e.title)),l.a.createElement("div",{className:"extra-info"},l.a.createElement("p",{className:"authors"},e.authors),l.a.createElement("p",{className:"eid"},e.eid),l.a.createElement("p",{className:"date"},e.year)),l.a.createElement(ge.a,{text:e.abstract,lines:4,ellipsis:"...",className:"paragraph",moreText:"more",lessText:"less"}))})}),Be=function(e){var t="",a="";return e.focused?(t="90,295.5 500,704.5 910,295.5 ",a="90,704.5 500,295.5 910,704.5 "):(t="90,704.5 500,295.5 910,704.5 ",a="90,295.5 500,704.5 910,295.5 "),l.a.createElement("svg",{version:"1.1",id:"arrow-select",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("polyline",{className:"st-arrow-select",points:t},l.a.createElement("animate",{attributeType:"XML",id:"ani-select-arrow",attributeName:"points",from:t,to:a,begin:"0s",dur:"0.2s",repeatCount:"1",fill:"freeze"})))},Fe=function(e){var t=e.options,a=e.selected,r=e.handler,n=Object(c.useState)(!1),s=Object(f.a)(n,2),o=s[0],i=s[1];function u(e){document.getElementById("ani-select-arrow").beginElement(),i(!o)}return l.a.createElement("div",{className:"custom-select"},l.a.createElement("div",{className:"selected",tabIndex:-2,onBlur:u,onFocus:u},t[a]?t[a].label:"[invalid selection]"," ",l.a.createElement("div",{className:"arrow"},l.a.createElement(Be,{focused:o}))),l.a.createElement("div",{className:"options-holder",style:{fontSize:o?"15px":"0px",borderBottom:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderLeft:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderRight:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderTop:"none"}},t.map(function(e,t){return l.a.createElement("div",{key:t,"data-value":t,className:"option",style:{padding:o?"2px":"0px"},onMouseDown:r},e.label)})))},Le=function(e){return l.a.createElement("svg",{id:"remove-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("line",{className:"rb",x1:"134",y1:"866",x2:"866",y2:"134"}),l.a.createElement("line",{className:"rb",x1:"134",y1:"134",x2:"866",y2:"866"}))},Me=function(e){var t=e.project_id,a=e.selectedPapersList,r=e.setSelectedPapersList,n=e.handlePaperSelection,s=e.mounted,o=window.localStorage,i=Object(c.useContext)(F);function u(){return(u=Object(d.a)(m.a.mark(function e(n){var c,l,u;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=a,r([]),o.removeItem("selectedPapersList"),l=c.map(function(e){return e.eid}),console.log("ADDING"),console.log(l),e.next=8,ke.postPaperIntoProject({arrayEid:l,project_id:t});case 8:if(u=e.sent,!(s.current&&u&&u.message)){e.next=12;break}return i.setError(u),e.abrupt("return",null);case 12:s.current&&(r([]),o.removeItem("selectedPapersList"),i.setNotificationMessage("Insert completed"));case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}Object(c.useEffect)(function(){o.getItem("selectedPapersList")&&r(JSON.parse(o.getItem("selectedPapersList")))},[]);return l.a.createElement("div",{className:"selected-papers-list",style:{opacity:a.length>0?"1.0":"0.0",pointerEvents:a.length>0?"auto":"none"}},l.a.createElement("h3",null,"SELECTED PAPERS"," ",l.a.createElement("br",null),l.a.createElement("span",null,"(total : ",a.length,")")),l.a.createElement("div",{className:"submission-wrapper"},l.a.createElement("div",{className:"papers-wrapper",style:{border:a.length>0?"":"0px"}},l.a.createElement("div",{className:"papers-flex",style:{padding:a.length>0?"":"0px"}},a.map(function(e,t){return l.a.createElement("p",{key:t},l.a.createElement("span",null,e.title),l.a.createElement("button",{type:"button",className:"remove-btn",name:e.title,value:e.eid,onClick:function(t){n({target:{name:e.title,value:e.eid}})}},l.a.createElement(Le,null)))}))),l.a.createElement("button",{style:{border:a.length>0?"":"0px",margin:a.length>0?"":"0px",height:a.length>0?"":"0px",pointerEvents:a.length>0?"auto":"none"},className:"ti-btn add-resultpaper-btn",type:"button",value:"Submit",onClick:function(e){return u.apply(this,arguments)}},l.a.createElement("div",{className:"btn-title"},"Add Selected Paper"),l.a.createElement("div",{className:"btn-icon"}," "))))},Ae=function(e){var t=e.display,a=e.up,r="",n="",s="";"ASC"===a?(n="371.7,293 500,165 628.3,293 ",s="371.7,491.9 500,619.9 628.3,491.9 "):(n="371.7,491.9 500,619.9 628.3,491.9 ",s="371.7,293 500,165 628.3,293 ");var o=Object(c.useState)(s),i=Object(f.a)(o,2),u=i[0],p=i[1];return Object(c.useEffect)(function(){p(s)},[s]),t&&(r=l.a.createElement("svg",{version:"1.1",id:"order-arrow",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("polyline",{className:"st-order-arrow-head",points:"371.7,293 500,165 628.3,293 ",transform:"matrix(1.5303008,0,0,1.5303008,-279.47582,-105.57059)"},l.a.createElement("animate",{attributeType:"XML",id:"ani-order-arrow",attributeName:"points",from:n,to:u,begin:"0s",dur:"0.2s",repeatCount:"1",fill:"freeze"})),l.a.createElement("line",{className:"st-order-arrow",x1:"485.67453",y1:"145.09268",x2:"485.67453",y2:"827.75989"}))),r},qe=function(e){return l.a.createElement("svg",{version:"1.1",id:"no-results",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("circle",{className:"st0-no-results",cx:"585.3",cy:"419.7",r:"271.7"}),l.a.createElement("line",{className:"st3-no-results",x1:"111.2",y1:"894",x2:"393.2",y2:"611.8"}),l.a.createElement("path",{className:"st1-no-results",d:"M460.6,533c83.1-20,166.2-20,249.4,0"}),l.a.createElement("line",{className:"st2-no-results",x1:"683.8",y1:"329",x2:"683.8",y2:"337"}),l.a.createElement("line",{className:"st2-no-results",x1:"512.8",y1:"329",x2:"512.8",y2:"337"}))},Re=function(e){return l.a.createElement("svg",{id:"radio-tick",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("circle",{className:"st-circle",cx:"500",cy:"500",r:"375"},l.a.createElement("animate",{attributeName:"r",dur:"0.2s",repeatCount:"1",fill:"freeze",from:"0",to:"375"})))},De=function(e){var t=e.label,a=e.name,r=e.val,n=e.isChecked,s=e.handler,o=Object(c.useState)(l.a.createElement(l.a.Fragment,null)),i=Object(f.a)(o,2),u=i[0],p=i[1];return Object(c.useEffect)(function(){p(n?l.a.createElement(Re,null):l.a.createElement(l.a.Fragment,null))},[n]),l.a.createElement("label",{className:"radiobox-container"},l.a.createElement("input",{type:"radio",value:r,name:a,checked:n,onChange:s}),l.a.createElement("span",{className:"radiomark"},u),l.a.createElement("span",null,t))},Xe=function(e){return l.a.createElement("svg",{id:"search-icon",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("path",{className:"st0",d:"M626.9,644.3c-73.5,0-142.6-28.6-194.6-80.6s-80.6-121.1-80.6-194.6s28.6-142.6,80.6-194.6 c52-52,121.1-80.6,194.6-80.6c73.5,0,142.6,28.6,194.6,80.6c52,52,80.6,121.1,80.6,194.6s-28.6,142.6-80.6,194.6 S700.4,644.3,626.9,644.3z"}),l.a.createElement("line",{className:"st1",x1:"145.2",y1:"850.8",x2:"431.7",y2:"564.3"}))},ze=function(e){return l.a.createElement("svg",{id:"similar-paper-search-icon",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("polyline",{className:"st0-sps",points:"795.8,214 734.8,214 736.8,146 \t\t"}),l.a.createElement("polyline",{className:"st0-sps",points:"842.8,214 842.8,875.8 262.8,875.8 262.8,106 734.8,106 \t\t"}),l.a.createElement("line",{className:"st0-sps",x1:"842.8",y1:"214",x2:"734.8",y2:"106"}),l.a.createElement("line",{className:"st1-sps",x1:"350.8",y1:"198.9",x2:"644.8",y2:"198.9"}),l.a.createElement("line",{className:"st2-sps",x1:"346.8",y1:"385.4",x2:"752.8",y2:"385.4"}),l.a.createElement("line",{className:"st2-sps",x1:"544",y1:"485.9",x2:"752.8",y2:"485.9"}),l.a.createElement("line",{className:"st3-sps",x1:"346.8",y1:"485.9",x2:"544",y2:"485.9"}),l.a.createElement("line",{className:"st2-sps",x1:"575.9",y1:"586.4",x2:"752.8",y2:"586.4"}),l.a.createElement("line",{className:"st3-sps",x1:"346.8",y1:"586.4",x2:"575.9",y2:"586.4"}),l.a.createElement("line",{className:"st2-sps",x1:"555.5",y1:"686.9",x2:"752.8",y2:"686.9"}),l.a.createElement("line",{className:"st3-sps",x1:"346.8",y1:"686.9",x2:"555.5",y2:"686.9"}),l.a.createElement("circle",{className:"st4-sps",cx:"410.8",cy:"594.3",r:"171.7"}),l.a.createElement("line",{className:"st4-sps",x1:"111.2",y1:"894",x2:"289.4",y2:"715.7"}))},Ue=a(37),He=[{label:"all",value:"all"},{label:"author",value:"author"},{label:"content",value:"content"},{label:"adv. query",value:"advanced"}],Ge=(new Date).getFullYear()+2,Je=["all"].concat(Object(ue.a)(Ue.range(2017,Ge).map(String))),Ve=function(e){var t=e.history,a=e.queryData,r=e.project_id,n=Object(c.useState)(a.query),s=Object(f.a)(n,2),o=s[0],u=s[1],p=Object(c.useState)({scopus:a.scopus,googleScholar:a.googleScholar,arXiv:a.arXiv}),h=Object(f.a)(p,2),E=h[0],b=h[1],v=Object(c.useState)(a.searchBy),g=Object(f.a)(v,2),y=g[0],x=g[1],j=Object(c.useState)(a.year),w=Object(f.a)(j,2),O=w[0],N=w[1];Object(c.useEffect)(function(){u(a.query),b({scopus:a.scopus,googleScholar:a.googleScholar,arXiv:a.arXiv}),x(a.searchBy),N(a.year)},[a.query,a.orderBy,a.searchBy,a.sort,a.year,a.start,a.count,a.scopus,a.googleScholar,a.arXiv]);var k=Object(c.useContext)(F);function S(e){var t;switch(e.target.name){case"query":u(e.target.value);break;case"scopus":(t=Object(A.a)({},E)).scopus=!0,t.googleScholar=!1,t.arXiv=!1,b(t);break;case"googleScholar":(t=Object(A.a)({},E)).scopus=!1,t.googleScholar=!0,t.arXiv=!1,b(t);break;case"arXiv":(t=Object(A.a)({},E)).scopus=!1,t.googleScholar=!1,t.arXiv=!0,b(t);break;case"searchBy":x(e.target.value);break;case"year":N(e.target.value)}}function C(){return(C=Object(d.a)(m.a.mark(function e(r){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),""===o?k.setNotificationMessage("Search string is empty"):(a.query=o,a.scopus=E.scopus,a.googleScholar=E.googleScholar,a.arXiv=E.arXiv,a.searchBy=y,a.year=O,n=ae(a),t.push(n));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:""===a.query?"search-form":"search-form small",onSubmit:function(e){return C.apply(this,arguments)}},l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("input",{type:"text",placeholder:"search",name:"query",value:o,onChange:S}),l.a.createElement(i.b,{to:"/projects/"+r+"/searchsimilar"},l.a.createElement("button",{className:"go-similar",type:"button"},l.a.createElement(ze,null))),l.a.createElement("button",{className:"go-search",type:"submit",value:"Submit"},l.a.createElement(Xe,null))),l.a.createElement("div",{className:"option-holder"},l.a.createElement("label",null,"Source:"),l.a.createElement("br",null),l.a.createElement("div",{className:"checkboxes-holder"},l.a.createElement(De,{label:"Scopus",name:"scopus",val:"",isChecked:E.scopus,handler:S}),l.a.createElement(De,{label:"Google Scholar",name:"googleScholar",val:"",isChecked:E.googleScholar,handler:S}),l.a.createElement(De,{label:"arXiv",name:"arXiv",val:"",isChecked:E.arXiv,handler:S})),l.a.createElement("label",null,"Search by:"),l.a.createElement("br",null),l.a.createElement("div",{className:"checkboxes-holder"},l.a.createElement(De,{label:He[0].label,name:"searchBy",val:He[0].value,isChecked:y===He[0].value,handler:S}),l.a.createElement(De,{label:He[1].label,name:"searchBy",val:He[1].value,isChecked:y===He[1].value,handler:S}),l.a.createElement(De,{label:He[2].label,name:"searchBy",val:He[2].value,isChecked:y===He[2].value,handler:S}),l.a.createElement(De,{label:He[3].label,name:"searchBy",val:He[3].value,isChecked:y===He[3].value,handler:S})),l.a.createElement("label",null,"Year:"),l.a.createElement("br",null),l.a.createElement("div",{className:"checkboxes-holder"},Je.map(function(e,t){return l.a.createElement(De,{key:t,label:e,name:"year",val:e,isChecked:O===e,handler:S})})))))},Ye=function(e){return l.a.createElement("svg",{version:"1.1",id:"robot",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("path",{className:"st0-robot",d:"M406.3,576.3c-46.8,3.4-95,5.9-144.5,7.2c-69.2,1.9-127.2-52.1-130.5-121.3l-3.2-66.9 c-3.3-70.2,50.9-129.9,121.2-133.2l139.1-6.6c54.8-2.6,101.3,39.7,103.9,94.6l5.8,122.4C500.7,526.3,460,572.3,406.3,576.3z"}),l.a.createElement("path",{className:"st1-robot",d:"M407.4,528.8l-124.1,5.9c-9.8,0.5-18.1-7.1-18.6-16.9l-0.1-3.1c-0.2-4.1,3-7.6,7.1-7.8l144.7-6.8 c4.1-0.2,7.6,3,7.8,7.1l0.1,3.1C424.8,520,417.2,528.3,407.4,528.8z"}),l.a.createElement("path",{className:"st2-robot",d:"M263.1,415.9L263.1,415.9c-13.1-0.6-23.5-11.2-24.2-24.5l-1.9-39.8c-0.6-13,8.5-24.4,21.1-26.6h0 c14.9-2.5,28.7,8.8,29.4,24.2l1.9,39.8C290.2,404.2,278,416.6,263.1,415.9z"}),l.a.createElement("path",{className:"st2-robot",d:"M418.4,408.8L418.4,408.8c-14.2,2.2-27.2-9.1-27.9-24.4l-1.9-40.1c-0.7-15.5,11.5-28.2,26.1-26.9h0 c12.2,1.1,21.7,11.6,22.4,24.6l1.9,40.1C439.5,395.4,430.7,406.9,418.4,408.8z"}),l.a.createElement("path",{className:"st0-robot",d:"M133.6,610.9c126.4,12.4,246,15.2,357.6,6.4c47.7-3.8,87.3,39.8,84.4,92.5l-32.5,594.5 c-3.9,23.4-99,39-120.6,38.7l-229.1-3.5c-47.1-0.7-86.2-40-91.4-91.7L48.1,707.4C42.6,652.6,84,606.1,133.6,610.9z"}),l.a.createElement("ellipse",{transform:"matrix(0.9989 -4.710610e-02 4.710610e-02 0.9989 -19.9378 7.7157)",className:"st5-robot",cx:"153.7",cy:"426.9",rx:"13.6",ry:"70"}),l.a.createElement("path",{className:"st7-robot",d:"M451.3,736.2c-0.4,30.4-52.1,65.7-114.8,64.8c-62.7-0.9-113.2-36.2-112.8-66.6s51.6-44.3,114.3-43.4 C400.8,691.9,451.8,705.8,451.3,736.2z"}),l.a.createElement("g",null,l.a.createElement("path",{className:"st13-robot",d:"M255,721c47.2,3.6,94.3,4,141.5,1.2"}),l.a.createElement("path",{className:"st13-robot",d:"M246,732c59,4,118,4,177,0"}),l.a.createElement("path",{className:"st13-robot",d:"M252,743c40.2,2.9,80.4,3.7,120.5,2.4"}),l.a.createElement("path",{className:"st13-robot",d:"M258,754c51,4,102,4,153,0"}),l.a.createElement("path",{className:"st13-robot",d:"M261,765c14.5,1.2,29,2,43.5,2.5"})))},We=a(37),$e=[{label:"Title",value:"title"},{label:"Date",value:"date"}],Ke=function(e){var t,a=e.project_id,r=e.location,n=e.match,s=e.history,o=Object(c.useRef)(!1),u=Object(c.useState)([]),p=Object(f.a)(u,2),h=p[0],E=p[1],b=Object(c.useState)(!0),v=Object(f.a)(b,2),g=v[0],y=v[1],x=Object(c.useState)(0),j=Object(f.a)(x,2),w=j[0],O=j[1],N=Object(c.useContext)(F),k=function(e){var t,a=R.a.parse(e),r=a.query||"",n=a.searchBy||"all",c=a.orderBy||"title",l=a.sort||"ASC",s=a.start||0,o=a.count||10;t=void 0===a.scopus||"true"===a.scopus;var i="true"===a.googleScholar&&!t,u="true"===a.arXiv&&!t&&!i;return t||i||u||(t=!0),{query:r,searchBy:n,orderBy:c,sort:l,scopus:t,googleScholar:i,arXiv:u,year:a.year||"all",start:s,count:o}}(r.search),S=window.localStorage;window.localStorage||console.log("the browser must be support localStorage"),t=S.getItem("selectedPapersList")?JSON.parse(S.getItem("selectedPapersList")):[];var C=Object(c.useState)(t),_=Object(f.a)(C,2),P=_[0],I=_[1],T=Object(c.useState)(k.sort),B=Object(f.a)(T,2),L=B[0],M=B[1];function A(e){var t=parseInt(e.target.getAttribute("data-value"));k.orderBy=$e[t].value;var a=ae(k);s.push(a)}function q(e){"ASC"===k.sort?k.sort="DESC":k.sort="ASC";var t=ae(k);s.push(t)}function D(e){var t,a=e.target.value,r=e.target.name;-1===re(P,"eid",a)?(t=Object(ue.a)(P)).push({eid:a,title:r}):t=P.filter(function(e){return e.eid!==a}),I(t),S.setItem("selectedPapersList",JSON.stringify(t))}function X(e){var t;if(ee(P,h,"eid")){var a=h.map(function(e){return{eid:e.eid,title:e.title}});t=P.filter(function(e){return!a.some(function(t){return t.eid===e.eid})})}else{var r=h.map(function(e){return{eid:e.eid,title:e.title}}),n=[].concat(Object(ue.a)(r),Object(ue.a)(P));t=We.uniqBy(n,"eid")}I(t),S.setItem("selectedPapersList",JSON.stringify(t))}Object(c.useEffect)(function(){return o.current=!0,function(){o.current=!1}},[]),Object(c.useEffect)(function(){var e=!0;return e&&L!==k.sort&&(M(k.sort),document.getElementById("ani-order-arrow")&&document.getElementById("ani-order-arrow").beginElement()),function(){var t=Object(d.a)(m.a.mark(function t(){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""===k.query){t.next=6;break}return y(!1),t.next=4,he.search(k);case 4:a=t.sent,e&&a&&"Not Found"===a.message?(E([]),O(0),y(!0)):e&&a&&a.message?N.setError(a):e&&a&&(E(a.results),O(a.totalResults),y(!0));case 6:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[a,k.query,k.orderBy,k.searchBy,k.sort,k.year,k.start,k.count,k.scopus,k.googleScholar,k.arXiv]);var z="";if(!1===g)z=l.a.createElement("div",{className:"paper-card-holder"},l.a.createElement("div",{className:"paper-card-holder-head",style:{pointerEvents:"none"}},l.a.createElement("div",{className:"select-all"},l.a.createElement(be,{label:"Select All",name:"select_all",val:"",isChecked:!1,handler:X})),l.a.createElement("div",{className:"order"},l.a.createElement("label",null,"sort by:"),l.a.createElement(Fe,{options:$e,selected:re($e,"value",k.orderBy),handler:A}),l.a.createElement("button",{type:"button",onClick:q},l.a.createElement(Ae,{display:!0,up:k.sort})))),l.a.createElement("div",{className:"search-loading-holder"},l.a.createElement(W,{class:"small"})));else if(0===h.length&&""!==k.query)z=l.a.createElement("div",{className:"no-results"}," ",l.a.createElement(qe,null)," ",l.a.createElement("p",{className:"not-found-description"}," Nothing was found ")," ");else if(h.length>0&&""!==k.query){var U=P.map(function(e){return e.eid});z=l.a.createElement("div",{className:"paper-card-holder"},l.a.createElement("div",{className:"paper-card-holder-head"},l.a.createElement("div",{className:"select-all"},l.a.createElement(be,{label:"Select All",name:"select_all",val:"",isChecked:ee(P,h,"eid"),handler:X})),l.a.createElement("div",{className:"order"},l.a.createElement("label",null,"sort by:"),l.a.createElement(Fe,{options:$e,selected:re($e,"value",k.orderBy),handler:A}),l.a.createElement("button",{type:"button",onClick:q},l.a.createElement(Ae,{display:!0,up:k.sort})))),l.a.createElement(Me,{project_id:a,selectedPapersList:P,setSelectedPapersList:I,handlePaperSelection:D,mounted:o}),l.a.createElement(Ie,{papersList:h,handlePaperSelection:D,selectedEidList:U}),l.a.createElement(Q,{start:k.start,count:k.count,totalResults:w,path:n.url}))}return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ve,{history:s,queryData:k,project_id:a}),l.a.createElement("div",{className:"search-automated-option",style:{display:""===k.query?"block":"none"}},l.a.createElement("p",null,l.a.createElement("i",null,"or"),l.a.createElement("br",null),"let an algorithm provide search results for you"),l.a.createElement(i.b,{to:"/projects/"+a+"/searchautomated"},l.a.createElement(Ye,null))),l.a.createElement("div",{className:"search-results"},z))};function Ze(){return(Ze=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.pdf_parse_server,e.next=3,C.postFile(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qe(){return(Qe=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.csv_parse_server,e.next=3,C.postFile(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var et={updatePdf:function(e){return Ze.apply(this,arguments)},uploadCsv:function(e){return Qe.apply(this,arguments)},abortRequest:C.abortRequest},tt=function(e){return l.a.createElement("svg",{id:"go-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("polyline",{className:"st1-go",points:"371.7,481.9 500,609.9 628.3,481.9 ",transform:"matrix(0,-1.4834458,1.4856134,0,-92.453824,1228.1491)"}),l.a.createElement("line",{className:"st0-go",x1:"810.69312",y1:"486.42624",x2:"206.34099",y2:"486.42624"}))},at=function(e){e.close;var t=e.style,a=(e.project_id,e.input),r=e.handler,n=e.paperInfo,s=e.fetching,o=e.setPaperInfo,i=e.setPaperFile,u=e.history,p="",f="",h=Object(c.useRef)(null);function E(){return(E=Object(d.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.current.files[0]&&i(h.current.files[0]);case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return p=s?l.a.createElement("div",{className:"load-icon-similar-paper"},l.a.createElement(W,null)):n&&n.title?l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",{className:"similar-paper-title"},n.title),l.a.createElement(ge.a,{text:n.abstract,lines:4,ellipsis:"...",className:"similar-paper-paragraph",moreText:"more",lessText:"less"})):l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"similar-description"},"Search for Similar Papers"),l.a.createElement("div",{className:"DOI-holder"},l.a.createElement("input",{type:"text",placeholder:"type DOI, EID, or paper title",value:a,onChange:r,name:"query"}),l.a.createElement("button",{className:"go-search-similar DOI-btn",type:"submit",value:"Submit"},l.a.createElement(tt,null))),l.a.createElement("p",{className:"or"},"or"),l.a.createElement("div",{className:"file-input-container"},l.a.createElement("input",{type:"file",id:"real-input",ref:h,onChange:function(){return E.apply(this,arguments)}}),l.a.createElement("button",{type:"button",className:"browse-btn",onClick:function(){h.current.click()}},"Upload a Paper"))),f=n?l.a.createElement("button",{type:"button",className:"close-btn red-x",onClick:function(e){o(void 0),i(void 0),u.push({})}},l.a.createElement(K,null)):l.a.createElement(l.a.Fragment,null),l.a.createElement("div",{style:Object(A.a)({},t),className:"light-modal similar-search-paper-upload"},f,p)},rt=a(37),nt=(new Date).getFullYear()+2,ct=(["all"].concat(Object(ue.a)(rt.range(2017,nt).map(String))),function(e){var t=e.history,a=e.queryData,r=e.project_id,n=e.targetPaperData,s=e.setTargetPaperData,o=Object(c.useState)(!1),u=Object(f.a)(o,2),p=u[0],h=u[1],E=Object(c.useState)(!1),b=Object(f.a)(E,2),v=b[0],g=b[1],y=Object(c.useState)(a.query),x=Object(f.a)(y,2),j=x[0],w=x[1],O=Object(c.useState)(a.year),N=Object(f.a)(O,2),k=N[0],S=N[1],C=Object(c.useState)(void 0),_=Object(f.a)(C,2),P=_[0],I=_[1],T=(window.localStorage,Object(c.useContext)(F));function B(){return(B=Object(d.a)(m.a.mark(function e(r){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("SUBMITTING SEARCH"),r&&r.preventDefault(),console.log("similarity search was called"),""!==j||P?(P?(console.log("there's a file"),a.query=""):(console.log("there isn't a file"),a.query=j),a.year=k,n=ae(a),t.push(n)):T.setNotificationMessage("Similar paper string is empty");case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(c.useEffect)(function(){var e=!0;console.log("FETCHING TARGET PAPER"),console.log(a);var t=function(){var t=Object(d.a)(m.a.mark(function t(){var r,n,c;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&(w(a.query),S(a.year),s(void 0)),!P){t.next=18;break}if(console.log("FILE NAME : "+P.name),/\.(pdf|PDF)$/.test(P.name)&&-1!==P.type.indexOf("application/pdf")){t.next=7;break}T.setNotificationMessage("The file must be a pdf!"),t.next=16;break;case 7:return g(!0),console.log("FETCHING PARSE PDF"),(r=new FormData).append("file",P),console.log("CALLING THE PAPER PARSER SERVICE"),t.next=14,et.updatePdf(r);case 14:n=t.sent,e&&n&&n.message?(T.setNotificationMessage("Error during parsing file"),g(!1)):e&&(console.log(n),s(n),g(!1));case 16:t.next=27;break;case 18:if(""===a.query){t.next=26;break}return g(!0),t.next=22,he.search({query:a.query,scopus:!0});case 22:c=t.sent,e&&c&&c.message?T.setError(c):e&&(console.log("setting target paper data"),s(c.results[0]),g(!1)),t.next=27;break;case 26:console.log("no file (& no similarPaperString)");case 27:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return n&&a.query===j||t(),function(){e=!1}},[r,P,a.query,a.year]),Object(c.useEffect)(function(){a.year=k;var e=ae(a);t.push(e)},[k]),l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:""!==a.query||P||n?"search-form small":"search-form",style:{marginTop:p?"30px":"60px"},onSubmit:function(e){return B.apply(this,arguments)}},l.a.createElement(at,{style:{boxShadow:"0px 0px 3px -1px rgba(0, 0, 0, 0.25)"},project_id:r,close:h,handler:function(e){switch(e.target.name){case"query":w(e.target.value);break;case"year":S(e.target.value)}},input:j,paperInfo:n,fetching:v,setPaperInfo:s,setPaperFile:I,history:t})),l.a.createElement("div",{className:v||n?"top-right-side-wrapper search-similar-description-wrapper":"center-side-wrapper search-similar-description-wrapper"},l.a.createElement("div",{className:"search-similar-description"},l.a.createElement("p",null,"This searching mode leverages AI to find relevant papers based on the topic and focus of the given paper."),l.a.createElement(i.b,{to:"/projects/"+r+"/search"},"(Go back to a normal search)"))))}),lt=a(37),st=[{label:"Title",value:"title"},{label:"Date",value:"date"}],ot=function(e){var t=e.project_id,a=e.location,r=e.match,n=e.history,s=Object(c.useRef)(!1);window.onbeforeunload=function(e){window.localStorage.removeItem("targetPaperData")};var o,i,u=Object(c.useState)([]),p=Object(f.a)(u,2),h=p[0],E=p[1],b=Object(c.useState)(!0),v=Object(f.a)(b,2),g=v[0],y=v[1],x=Object(c.useState)(0),j=Object(f.a)(x,2),w=j[0],O=j[1],N=Object(c.useContext)(F),k=function(e){var t=R.a.parse(e),a=t.query||"",r=t.orderBy||"title",n=t.sort||"ASC",c=t.start||0,l=t.count||10;return{query:a,orderBy:r,sort:n,year:t.year||"all",start:c,count:l}}(a.search),S=window.localStorage;window.localStorage||console.log("the browser must be support localStorage"),o=S.getItem("selectedPapersList")?JSON.parse(S.getItem("selectedPapersList")):[],i=S.getItem("targetPaperData")?JSON.parse(S.getItem("targetPaperData")):null;var C=Object(c.useState)(o),_=Object(f.a)(C,2),P=_[0],I=_[1],T=Object(c.useState)(i),B=Object(f.a)(T,2),L=B[0],M=B[1],A=Object(c.useState)(k.sort),q=Object(f.a)(A,2),D=q[0],X=q[1];Object(c.useEffect)(function(){return s.current=!0,function(){s.current=!1}},[]),Object(c.useEffect)(function(){var e=!0;return console.log("FETCHING RESULTS"),D!==k.sort&&(X(k.sort),document.getElementById("ani-order-arrow")&&document.getElementById("ani-order-arrow").beginElement()),L?function(){var t=Object(d.a)(m.a.mark(function t(){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return y(!1),S.setItem("targetPaperData",JSON.stringify(L)),t.next=4,he.searchSimilar({paperData:L,start:k.start,count:k.count,scopus:!0});case 4:a=t.sent,e&&a&&"Not Found"===a.message?(E([]),O(0),y(!0)):e&&a&&a.message?N.setError(a):e&&null!==a?(console.log("SETTING RESULTS"),E(a.results),O(a.totalResults),y(!0)):console.log("can't set enything");case 6:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()():S.removeItem("targetPaperData"),function(){e=!1}},[L,k.orderBy,k.year,k.sort,k.start,k.count]);var z="";function U(e){var t=parseInt(e.target.getAttribute("data-value"));k.orderBy=st[t].value;var a=ae(k);n.push(a)}function H(e){"ASC"===k.sort?k.sort="DESC":k.sort="ASC";var t=ae(k);n.push(t)}function G(e){var t,a=e.target.value,r=e.target.name;-1===re(P,"eid",a)?(t=Object(ue.a)(P)).push({eid:a,title:r}):t=P.filter(function(e){return e.eid!==a}),I(t),S.setItem("selectedPapersList",JSON.stringify(t))}function J(e){var t;if(ee(P,h,"eid")){var a=h.map(function(e){return{eid:e.eid,title:e.title}});t=P.filter(function(e){return!a.some(function(t){return t.eid===e.eid})})}else{var r=h.map(function(e){return{eid:e.eid,title:e.title}}),n=[].concat(Object(ue.a)(r),Object(ue.a)(P));t=lt.uniqBy(n,"eid")}I(t),S.setItem("selectedPapersList",JSON.stringify(t))}if(!1===g||!L&&""!==k.query)z=l.a.createElement("div",{className:"paper-card-holder similar-holder"},l.a.createElement("div",{className:"paper-card-holder-head",style:{pointerEvents:"none"}},l.a.createElement("div",{className:"select-all"},l.a.createElement(be,{label:"Select All",name:"select_all",val:"",isChecked:!1,handler:J})),l.a.createElement("div",{className:"order"},l.a.createElement("label",null,"sort by:"),l.a.createElement(Fe,{options:st,selected:re(st,"value",k.orderBy),handler:U}),l.a.createElement("button",{type:"button",onClick:H},l.a.createElement(Ae,{display:!0,up:k.sort})))),l.a.createElement("div",{className:"search-loading-holder"},l.a.createElement(W,{class:"small"})));else if(0===h.length&&L)z=l.a.createElement("div",{className:"no-results"}," ",l.a.createElement(qe,null)," ",l.a.createElement("p",{className:"not-found-description"}," Nothing was found ")," ");else if(h.length>0&&L){var V=P.map(function(e){return e.eid});z=l.a.createElement("div",{className:"paper-card-holder"},l.a.createElement("div",{className:"paper-card-holder-head"},l.a.createElement("div",{className:"select-all"},l.a.createElement(be,{label:"Select All",name:"select_all",val:"",isChecked:ee(P,h,"eid"),handler:J})),l.a.createElement("div",{className:"order"},l.a.createElement("label",null,"sort by:"),l.a.createElement(Fe,{options:st,selected:re(st,"value",k.orderBy),handler:U}),l.a.createElement("button",{type:"button",onClick:H},l.a.createElement(Ae,{display:!0,up:k.sort})))),l.a.createElement(Me,{project_id:t,selectedPapersList:P,setSelectedPapersList:I,handlePaperSelection:G,mounted:s}),l.a.createElement(Ie,{papersList:h,handlePaperSelection:G,selectedEidList:V,setTargetPaperData:M}),l.a.createElement(Q,{start:k.start,count:k.count,totalResults:w,path:r.url}))}return l.a.createElement(l.a.Fragment,null,l.a.createElement(ct,{history:n,queryData:k,project_id:t,targetPaperData:L,setTargetPaperData:M}),l.a.createElement("div",{className:"search-results"},z))},it=function(e){var t=e.options,a=e.form,r=e.name,n=Object(c.useState)(!1),s=Object(f.a)(n,2),o=s[0],i=s[1],u=Object(c.useState)(0),p=Object(f.a)(u,2),m=p[0],d=p[1];function h(e){var t=parseInt(e.target.getAttribute("data-value"));d(t)}function E(e){document.getElementById("ani-select-arrow").beginElement(),i(!o)}return Object(c.useEffect)(function(){a.setFieldValue(r,t[m].value)},[m]),l.a.createElement("div",{className:"custom-select"},l.a.createElement("div",{className:"selected",tabIndex:-2,onBlur:E,onFocus:E},t[m].label," ",l.a.createElement("div",{className:"arrow"},l.a.createElement(Be,{focused:o}))),l.a.createElement("div",{className:"options-holder",style:{fontSize:o?"15px":"0px",borderBottom:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderLeft:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderRight:o?"1px solid #d7d7d7":"0px solid #d7d7d7",borderTop:"none"}},t.map(function(e,t){return l.a.createElement("div",{key:t,"data-value":t,className:"option",style:{padding:o?"2px":"0px"},onMouseDown:h},e.label)})))},ut=[{value:"article",label:"Article"},{value:"book_chapter",label:"Book Chapter"},{value:"conf_publication",label:"Conf. Publication"}];var pt=function(e){var t=Object(c.useRef)(!1),r=a(39);Object(c.useEffect)(function(){return t.current=!0,function(){t.current=!1}},[]);var n=r.object().shape({title:r.string().required("please enter a title"),authors:r.string().required("please enter an author"),year:r.number().required("please enter a year").min(1e3).max((new Date).getFullYear()+1).integer(),abstract:r.string().required("please enter the abstract")}),s=Object(c.useContext)(F);return l.a.createElement(l.a.Fragment,null,l.a.createElement($.c,{initialValues:{title:e.customPaper&&e.customPaper.title||"",authors:e.customPaper&&e.customPaper.authors||"",year:e.customPaper&&e.customPaper.year||"",abstract:e.customPaper&&e.customPaper.abstract||"",document_type:e.customPaper&&e.customPaper.document_type||"",doi:e.customPaper&&e.customPaper.doi||""},validationSchema:n,onSubmit:function(){var a=Object(d.a)(m.a.mark(function a(r,n){var c,l,o;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=n.setSubmitting,void 0===r.doi&&(r.doi=""),l=Object(A.a)({},r,{year:r.year.toString(),source_title:r.title,link:"custom_paper",source:"slr_custom_papers",abstract_structured:"0",filter_oa_include:"0",filter_study_include:"0",notes:"",manual:"true"}),console.log(l),a.next=6,ke.postCustomPaperIntoProject({paper:l,project_id:e.projectId});case 6:o=a.sent,t.current&&o&&o.message?s.setError(o):t.current&&e.history.push(e.url),t.current&&c(!1);case 9:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}(),validateOnBlur:!1},function(e){var t=e.errors,a=e.touched,r=e.isSubmitting;return l.a.createElement($.b,{className:"new-paper-form"},l.a.createElement($.a,{style:{borderBottom:t.title&&a.title?"1px solid #d81e1e":""},id:"title",name:"title",type:"text",placeholder:"Paper Title"}),l.a.createElement("div",{className:"new-paper-form-ad"},l.a.createElement("div",{className:"author-year"},l.a.createElement($.a,{style:{borderBottom:t.authors&&a.authors?"1px solid #d81e1e":""},name:"authors",type:"text",placeholder:"paper author"}),l.a.createElement($.a,{style:{borderBottom:t.year&&a.year?"1px solid #d81e1e":""},name:"year",type:"number",placeholder:"year"})),l.a.createElement("div",{className:"type-doi"},l.a.createElement($.a,{name:"document_type",render:function(e){var t=e.field,a=e.form;return l.a.createElement(it,Object.assign({options:ut},t,{form:a}))}}),l.a.createElement($.a,{name:"doi",type:"text",placeholder:"DOI(optional)"}))),l.a.createElement($.a,{style:{borderBottom:t.abstract&&a.abstract?"1px solid #d81e1e":""},name:"abstract",placeholder:"Paper Abstract",component:"textarea"}),l.a.createElement("button",{type:"submit",disabled:r||t.title&&a.title||t.authors&&a.authors||t.year&&a.year||t.abstract&&a.abstract},"Add paper"))}))};var mt=function(e){var t=e.projectId,a=e.url,r=e.history,n=Object(c.useRef)(!1),s=Object(c.useState)(!1),o=Object(f.a)(s,2),i=o[0],u=o[1],p=Object(c.useState)(void 0),h=Object(f.a)(p,2),E=h[0],b=h[1],v=Object(c.useState)(!1),g=Object(f.a)(v,2),y=g[0],x=g[1],j=Object(c.useRef)(null),w=Object(c.useContext)(F);function O(){return(O=Object(d.a)(m.a.mark(function e(){var t,a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=j.current.files[0])){e.next=14;break}if(/\.(pdf|PDF)$/.test(t.name)&&-1!==t.type.indexOf("application/pdf")){e.next=6;break}w.setNotificationMessage("The file must be a pdf!"),e.next=14;break;case 6:return u(!0),(a=new FormData).append("file",t),e.next=11,et.updatePdf(a);case 11:r=e.sent,n.current&&r&&r.message?w.setNotificationMessage("Error during parsing file"):n.current&&(b(r),x(!0)),n.current&&u(!1);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(c.useEffect)(function(){return n.current=!0,function(){n.current=!1}},[]),y||i?i?l.a.createElement("div",{className:"new-paper-page-wrapper"},l.a.createElement("div",{className:"file-input-container"},l.a.createElement("input",{type:"file",id:"real-input"}),l.a.createElement("button",{type:"button",className:"browse-btn"},l.a.createElement(W,null))),"or",l.a.createElement("br",null),l.a.createElement("button",{type:"button",onClick:function(){u(!1),x(!0)}},"abort and insert data manually")):l.a.createElement(pt,{projectId:t,url:a,history:r,customPaper:E}):l.a.createElement("div",{className:"new-paper-page-wrapper"},l.a.createElement("div",null,l.a.createElement("div",{className:"file-input-container"},l.a.createElement("input",{type:"file",name:"file",id:"real-input",ref:j,onChange:function(){return O.apply(this,arguments)}}),l.a.createElement("button",{type:"button",className:"browse-btn",onClick:function(){j.current.click()}},"Upload a Paper")),"or",l.a.createElement("br",null),l.a.createElement("button",{type:"button",onClick:function(){x(!0)}},"insert data manually")))},dt=function(e){var t=e.confirm;l.a.createElement(l.a.Fragment,null);return t?l.a.createElement("svg",{version:"1.1",id:"confirm-edit-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("polyline",{className:"st-confirm",points:"918,192.3 389.3,807.7 82,450 "})):l.a.createElement("svg",{version:"1.1",id:"edit-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("path",{className:"st-pencil",d:"M224,632.3l-81.6,225.3L367.7,776l0,0L833,310.7c39.4-39.4,39.9-103.3,0.7-142.9c-0.5-0.5-1-1-1.4-1.4 c-39.6-39.2-103.6-38.7-142.9,0.7L224,632.3L224,632.3z"}),l.a.createElement("path",{className:"st-pencil-border",d:"M367.7,776c-24-71.7-71.9-119.6-143.7-143.7"}),l.a.createElement("path",{className:"st-pencil",d:"M805.7,338c-24-71.7-71.9-119.6-143.7-143.7"}))},ft=function(e){var t=e.project,a=e.setProject,r=Object(c.useRef)(!1),n=Object(c.useContext)(F),s=Object(c.useState)(!1),o=Object(f.a)(s,2),i=o[0],u=o[1],p=Object(c.useState)(t.data.name),h=Object(f.a)(p,2),E=h[0],b=h[1];function v(){return(v=Object(d.a)(m.a.mark(function e(){var c,l;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E===t.data.name){e.next=5;break}return e.next=3,Y.putProject(t.id,{name:E,description:t.data.description});case 3:c=e.sent,r.current&&""===c?(console.log("we got a success"),(l=t).data.name=E,a(Object(A.a)({},l))):r.current&&c&&c.message&&n.setError(c);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(c.useEffect)(function(){return r.current=!0,function(){r.current=!1}},[]),l.a.createElement("div",{className:i?"nav-elements":"nav-elements hidden-form"},l.a.createElement("h2",{style:{fontSize:i?"0px":"21px"}},t.data.name),l.a.createElement("form",{className:"edit-project-name",onClick:function(e){i||(document.getElementById("edit-project-name-input").focus(),u(!i))},onSubmit:function(e){e.preventDefault()}},l.a.createElement("input",{type:"text",id:"edit-project-name-input",value:E,style:{width:i?"":"0px",padding:i?"":"0px"},onChange:function(e){return b(e.target.value)},onBlur:function(e){u(!1)}}),l.a.createElement("button",{className:"edit-button",onMouseDown:function(e){i&&(function(){v.apply(this,arguments)}(),u(!i))},type:"button"},l.a.createElement(dt,{confirm:i}))))},ht=function(e){return l.a.createElement("svg",{version:"1.1",id:"forbidden",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("circle",{className:"st0-forbidden",cx:"500",cy:"500",r:"397"}),l.a.createElement("g",null,l.a.createElement("line",{className:"st1-forbidden",x1:"780.2",y1:"780.2",x2:"218.8",y2:"218.8"})))},Et=function(e){return l.a.createElement("svg",{version:"1.1",id:"ghost",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("path",{class:"st0-ghost",d:"M949.5,759c-34.3-97-89.7-188.9-98.5-293.2c0-0.3,0-0.6,0-0.9s-0.8-0.1-0.1-1c-5.7-99-58.2-209-174.7-205.1 C550.8,263,499.5,395.2,512,505.6c16.2,110.9,19.6,217.5,6.4,329"}),l.a.createElement("ellipse",{transform:"matrix(1.122617e-02 -0.9999 0.9999 1.122617e-02 200.0576 961.9827)",cx:"586.5",cy:"379.8",rx:"21.8",ry:"27.4"}),l.a.createElement("ellipse",{transform:"matrix(1.122617e-02 -0.9999 0.9999 1.122617e-02 329.3011 1095.6136)",cx:"718.6",cy:"381.3",rx:"21.8",ry:"29.1"}),l.a.createElement("path",{d:"M678.8,453.7c2.3,22-9.1,49.7-35.9,45.1c-26.8-4.6-21.4-27.8-21.6-47.3c-0.2-19.5-3-38.9,20.7-41.1S676.5,431.7,678.8,453.7 z"}),l.a.createElement("path",{class:"st1-ghost",d:"M407.8,331.6c31.9-17.6,51.3-40.8,51.3-66.3c0-55.2-91.5-100-204.3-100s-204.3,44.8-204.3,100 s91.5,100,204.3,100c33.7,0,65.5-4,93.6-11.1c21.9,31.4,51.9,40.2,98.4,39.6C417.6,378.1,408.1,355.2,407.8,331.6z"}),l.a.createElement("text",{transform:"matrix(1 0 0 1 159.4091 299.821)",class:"st2-ghost"},"404"),l.a.createElement("path",{class:"st0-ghost",d:"M518.4,834.6l18.3-11.6c25.3-16.1,57.5-16.4,83.2-0.9l0,0c25.3,15.3,56.9,15.2,82.1-0.2l33.1-20.3 c34.3-21,76.8-23.7,113.5-7.1l0,0c37.7,17,82.1,1.4,100.8-35.5l0,0"}))},bt=function(e){return l.a.createElement("div",{className:"page-not-found-wrapper"},l.a.createElement(Et,null))},vt=[{value:"date_created",label:"Recently Added"},{value:"title",label:"Title"},{value:"authors",label:"Authors"}];var gt=function(e){var t,a=e.project_id,r=e.location,n=e.match,s=e.history,o=e.forcePapersFetch,i=Object(c.useState)([]),u=Object(f.a)(i,2),p=u[0],h=u[1],E=Object(c.useState)(0),b=Object(f.a)(E,2),v=b[0],g=b[1],y=Object(c.useState)(!1),x=Object(f.a)(y,2),j=x[0],w=x[1],O=Object(c.useContext)(F),N=function(e){var t=R.a.parse(e),a=t.count||10,r=t.start||0,n=t.orderBy||"date_created",c=t.sort||"ASC";return"date_created"===n&&(c="DESC"),{orderBy:n,sort:c,start:r,count:a}}(r.search),k=Object(c.useState)(N.sort),S=Object(f.a)(k,2),C=S[0],_=S[1];function P(e){var t=parseInt(e.target.getAttribute("data-value"));"date_created"===N.orderBy&&(N.sort="ASC"),N.orderBy=vt[t].value;var a=ae(N);s.push(a)}function I(e){"ASC"===N.sort?N.sort="DESC":N.sort="ASC";var t=ae(N);s.push(t)}return Object(c.useEffect)(function(){var e=!0;return"date_created"!==N.orderBy&&C!==N.sort&&(_(N.sort),document.getElementById("ani-order-arrow").beginElement()),function(){var t=Object(d.a)(m.a.mark(function t(){var r;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return w(!1),t.next=3,ke.getPapersList(Object(A.a)({project_id:a},N));case 3:r=t.sent,e&&r&&"Not Found"===r.message?(h([]),g(0),w(!0)):e&&r&&r.message?O.setError(r):e&&r&&(h(r.results),g(r.totalResults),w(!0));case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[N.start,N.count,N.sort,N.orderBy,o]),t=!1===j?l.a.createElement("div",{className:"paper-card-holder"},l.a.createElement("div",{className:"order",style:{pointerEvents:"none"}},l.a.createElement("label",null,"sort by:"),l.a.createElement(Fe,{options:vt,selected:re(vt,"value",N.orderBy),handler:P}),l.a.createElement("button",{type:"button",onClick:I},l.a.createElement(Ae,{display:"date_created"!==N.orderBy,up:C}))),l.a.createElement(W,{class:"small"})):l.a.createElement("div",{className:"paper-card-holder"},l.a.createElement("div",{className:"order"},l.a.createElement("label",null,"sort by:"),l.a.createElement(Fe,{options:vt,selected:re(vt,"value",N.orderBy),handler:P}),l.a.createElement("button",{type:"button",onClick:I},l.a.createElement(Ae,{display:"date_created"!==N.orderBy,up:C}))),l.a.createElement(Pe,{papersList:p,location:r,history:s}),l.a.createElement(Q,{start:N.start,count:N.count,totalResults:v,path:n.url})),t=l.a.createElement("div",{className:"left-side-wrapper"},t)},yt=function(e){var t=e.project,a=e.setProject,r=e.collaborators,n=e.setCollaborators,s=Object(c.useRef)(!1),o=Object(c.useState)(!1),i=Object(f.a)(o,2),u=i[0],p=i[1],h=Object(c.useState)(t.data.description),E=Object(f.a)(h,2),b=E[0],v=E[1],g=Object(c.useState)(""),y=Object(f.a)(g,2),x=y[0],j=y[1],w=Object(c.useState)(!0),O=Object(f.a)(w,2),N=O[0],k=O[1],S=Object(c.useContext)(F);l.a.createElement(l.a.Fragment,null);function C(){return(C=Object(d.a)(m.a.mark(function e(){var r,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b===t.data.description){e.next=6;break}return e.next=3,Y.putProject(t.id,{name:t.data.name,description:b});case 3:r=e.sent,console.log(r),""===r?(console.log("scccc"),(n=t).data.description=b,a(Object(A.a)({},n)),console.log(t)):r&&r.message&&S.setError(r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(e){return l.a.createElement("span",{className:"date"},e.slice(0,10)," at ",e.slice(11,19))}function P(){return(P=Object(d.a)(m.a.mark(function e(a){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("removing "+a+" from "+t.id),function(){var e=Object(d.a)(m.a.mark(function e(){var c,l;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.removeProjectCollaborator(t.id,a);case 2:c=e.sent,s.current&&c&&c.message?S.setError(c):(l=r.filter(function(e){return e.id!==a}),console.log(l),n(l));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()();case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(){return(I=Object(d.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.includes(x)||(console.log("adding "+x),function(){var e=Object(d.a)(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.addProjectCollaborator(t.id,{email:x});case 2:a=e.sent,s.current&&a&&a.message?S.setError(a):a&&(j(""),n([].concat(Object(ue.a)(r),[a])));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()());case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(c.useEffect)(function(){return s.current=!0,function(){var e=Object(d.a)(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.getProjectCollaborators(t.id);case 2:a=e.sent,s.current&&a&&a.message?S.setError(a):a&&(n(a),k(!1));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),function(){s.current=!1}},[]),N?l.a.createElement("div",{className:"right-side-wrapper project-description hidden-form-description"},l.a.createElement("h2",null,"Description:"),l.a.createElement(W,null)):l.a.createElement("div",{className:u?"right-side-wrapper project-description":"right-side-wrapper project-description hidden-form-description"},l.a.createElement("h2",null,"Description:"),l.a.createElement("p",{style:{fontSize:u?"0px":"15px"}}," ",t.data.description),l.a.createElement("form",{className:"edit-project-description",style:{height:u?"":"0px"}},l.a.createElement("textarea",{id:"edit-project-description-input",value:b,style:{width:u?"100%":"0%",padding:u?"":"0px",height:u?"":"0px"},onChange:function(e){return v(e.target.value)},onBlur:function(e){console.log("blurring"),p(!1)}}),l.a.createElement("button",{className:"edit-button",onMouseDown:function(e){console.log("CLICK"),u?function(){C.apply(this,arguments)}():(setTimeout(function(){document.getElementById("edit-project-description-input").focus()},100),p(!0),console.log(u))},type:"button"},l.a.createElement(dt,{confirm:u}))),l.a.createElement("h2",null,"Additional info:"),l.a.createElement("p",{className:"project-date-info"}," ",l.a.createElement("span",null,"Created")," ",_(t.date_created)," "),l.a.createElement("p",{className:"project-date-info"}," ",l.a.createElement("span",null,"Last edited")," ",_(t.date_last_modified)," "),l.a.createElement("h2",null,"Collaborators:"),0===r.length?"You're not sharing this project with anyone":"",r.map(function(e,t){return l.a.createElement("div",{className:"collaborator-wrapper",key:t},l.a.createElement("p",{className:"collaborator"},e.data.email),l.a.createElement("button",{type:"button",className:"remove-btn",name:e.data.email,value:e.data.email,onClick:function(t){!function(e){P.apply(this,arguments)}(e.id)}},l.a.createElement(Le,null)))}),l.a.createElement("form",{className:"add-collaborator",onSubmit:function(){return I.apply(this,arguments)}},l.a.createElement("input",{type:"text",id:"edit-project-description-input",placeholder:"add a collaborator",value:x,onChange:function(e){j(e.target.value)}}),l.a.createElement("button",{className:"add-collaborator-button",disabled:!x||""===x})))};var xt=function(e){var t=Object(c.useContext)(F),a=Object(c.useState)(""),r=Object(f.a)(a,2),n=r[0],s=r[1],o=Object(c.useState)(""),i=Object(f.a)(o,2),u=i[0],p=i[1],h=Object(c.useState)(""),E=Object(f.a)(h,2),b=E[0],v=E[1],g=Object(c.useState)(""),y=Object(f.a)(g,2),x=y[0],j=y[1],w=Object(c.useState)(""),O=Object(f.a)(w,2),N=O[0],k=O[1],S=Object(c.useState)(!1),C=Object(f.a)(S,2),_=C[0],P=C[1],I=Object(c.useRef)(null);function T(){return(T=Object(d.a)(m.a.mark(function a(){var r,c,l,s;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=I.current.files[0],console.log(r.name),!r){a.next=19;break}if(/\.(csv|CSV)$/.test(r.name)){a.next=7;break}t.setNotificationMessage("The file must be a csv!"),a.next=19;break;case 7:return P(!0),c={authors:x&&""!==x?x:"Authors",title:n&&""!==n?n:"Title",year:u&&""!==u?u:"Year",date:"",source_title:"",link:"",abstract:b&&""!==b?b:"Abstract",document_type:"",source:"",eid:!N||"eid"!==N&&"EID"!==N?N?"":"EID":N,abstract_structured:"",filter_oa_include:"",filter_study_include:"",notes:"",manual:"",doi:!N||"doi"!==N&&"DOI"!==N?"":N},(l=new FormData).append("file",r),l.append("project_id",e.project_id),l.append("fields",JSON.stringify(c)),a.next=15,et.uploadCsv(l);case 15:s=a.sent,console.log(s),s&&s.message?t.setNotificationMessage("Error during parsing file"):(e.setForcePapersFetch(!e.forcePapersFetch),e.setVisibility(!e.visibility)),setTimeout(function(){P(!1)},2e3);case 19:case"end":return a.stop()}},a)}))).apply(this,arguments)}var B="";return B=_?l.a.createElement(W,null):l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{type:"button",className:"close-btn",onClick:function(t){e.setVisibility(!e.visibility)}},l.a.createElement(K,null)),l.a.createElement("h2",null,"Upload papers CSV"),l.a.createElement("div",{className:"field-names"},l.a.createElement("p",null,"Field names",l.a.createElement("span",null,"(leave empty for default values)")),l.a.createElement("div",{className:"field-input-row"},l.a.createElement("div",{className:"field-input-holder"},l.a.createElement("label",null,"Title : "),l.a.createElement("input",{name:"name",type:"text",placeholder:"title",value:n,onChange:function(e){s(e.target.value)}})),l.a.createElement("div",{className:"field-input-holder"},l.a.createElement("label",null,"Year : "),l.a.createElement("input",{name:"name",type:"text",placeholder:"year",value:u,onChange:function(e){p(e.target.value)}}))),l.a.createElement("div",{className:"field-input-row"},l.a.createElement("div",{className:"field-input-holder"},l.a.createElement("label",null,"Abstract : "),l.a.createElement("input",{name:"name",type:"text",placeholder:"abstract",value:b,onChange:function(e){v(e.target.value)}})),l.a.createElement("div",{className:"field-input-holder"},l.a.createElement("label",null,"Authors : "),l.a.createElement("input",{name:"name",type:"text",placeholder:"authors",value:x,onChange:function(e){j(e.target.value)}}))),l.a.createElement("div",{className:"field-input-row"},l.a.createElement("div",{className:"field-input-holder"},l.a.createElement("label",null,"ID : "),l.a.createElement("input",{name:"name",type:"text",placeholder:"id, eid, doi, ...",value:N,onChange:function(e){k(e.target.value)}})))),l.a.createElement("input",{type:"file",name:"file",id:"real-input",ref:I,onChange:function(){return T.apply(this,arguments)}}),l.a.createElement("button",{className:"file-input",type:"button",onClick:function(){I.current.click()}},"Uplaod .csv file")),l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:"modal floating-form add-csv-papers",style:{visibility:e.visibility?"":"hidden"}},B))},jt=function(e){var t=Object(c.useState)(!1),a=Object(f.a)(t,2),r=a[0],n=a[1],s=Object(c.useState)(!1),o=Object(f.a)(s,2),u=o[0],p=o[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(ne,{cls:r?"full-screen":"",handler:n}),l.a.createElement(xt,{visibility:r,setVisibility:n,project_id:e.project_id,forcePapersFetch:u,setForcePapersFetch:p}),l.a.createElement(yt,{project:e.project,setProject:e.setProject,collaborators:e.collaborators,setCollaborators:e.setCollaborators}),l.a.createElement(gt,{project_id:e.project_id,location:e.location,match:e.match,history:e.history,forcePapersFetch:u}),l.a.createElement("div",{className:"bottom-right-button-holder"},l.a.createElement("div",null,l.a.createElement("button",{className:"bottom-right-btn add-csv-papers-btn",type:"button",value:"toggle-insert-form",onClick:function(e){n(!r)}},l.a.createElement("div",{className:"btn-title"},"Upload .csv papers"),l.a.createElement("div",{className:"btn-icon"}," "))),l.a.createElement("div",null,l.a.createElement(i.b,{to:te(e.match.url,"/addpaper")},l.a.createElement("button",{className:"bottom-right-btn add-custompaper-btn"},l.a.createElement("div",{className:"btn-title"},"Add Custom Paper"),l.a.createElement("div",{className:"btn-icon"}," "))))))};function wt(){return(wt=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.filters+"/"+t,e.next=3,C.get(a);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ot(){return(Ot=Object(d.a)(m.a.mark(function e(t){var a,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.filters,e.next=3,C.get(a,t);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Nt(){return(Nt=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.filters,e.next=3,C.post(a,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kt(){return(kt=Object(d.a)(m.a.mark(function e(t){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.home+h.filters+"/"+t,e.next=3,C.delete(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function St(){return(St=Object(d.a)(m.a.mark(function e(t,a){var r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.home+h.filters+"/"+t,e.next=3,C.put(r,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ct={selectById:function(e){return wt.apply(this,arguments)},getFiltersList:function(e){return Ot.apply(this,arguments)},postFilterIntoProject:function(e){return Nt.apply(this,arguments)},deleteFilter:function(e){return kt.apply(this,arguments)},putFilter:function(e,t){return St.apply(this,arguments)},abortRequest:C.abortRequest},_t=function(e){var t=Object(c.useRef)(!1),r=a(39),n=r.object().shape({predicate:r.string().required("please enter a question"),inclusion_description:r.string().required("please enter the positive answer"),exclusion_description:r.string().required("please enter the neagative answer")}),s=Object(c.useContext)(F);Object(c.useEffect)(function(){return t.current=!0,function(){t.current=!1}},[]);return l.a.createElement("div",{className:"right-side-wrapper form-filter-wrapper"},l.a.createElement($.c,{initialValues:{predicate:"",inclusion_description:"",exclusion_description:""},validationSchema:n,onSubmit:function(){var a=Object(d.a)(m.a.mark(function a(r,n){var c,l,o,i;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=n.setSubmitting,l=n.resetForm,o={project_id:e.project_id,predicate:r.predicate,inclusion_description:r.inclusion_description,exclusion_description:r.exclusion_description},a.next=4,Ct.postFilterIntoProject(o);case 4:i=a.sent,t.current&&i.message?s.setError(i):t.current&&i&&(console.log(i),e.setFiltersList([i].concat(Object(ue.a)(e.filtersList)))),t.current&&(c(!1),l({predicate:"",inclusion_description:"",exclusion_description:""}));case 7:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}(),validateOnBlur:!1},function(e){var t=e.errors,a=e.touched,r=e.isSubmitting,n=(e.setErrors,e.validateField),c=e.handleChange;return l.a.createElement($.b,{className:"add-filter"},l.a.createElement($.a,{style:{borderBottom:t.predicate&&a.predicate?"solid 1px #d81e1e":""},name:"predicate",type:"text",placeholder:"Type a question, predicate, ...",onChange:function(e){c(e),n("predicate")}}),l.a.createElement($.a,{style:{borderBottom:t.inclusion_description&&a.inclusion_description?"solid 1px #d81e1e":""},name:"inclusion_description",component:"textarea",placeholder:"Type what the answer should include"}),l.a.createElement($.a,{style:{borderBottom:t.exclusion_description&&a.exclusion_description?"solid 1px #d81e1e":""},name:"exclusion_description",component:"textarea",placeholder:"Type what the answer should not include"}),l.a.createElement("button",{type:"submit",disabled:r||t.predicate&&a.predicate||t.inclusion_description&&a.inclusion_description||t.exclusion_description&&a.exclusion_description},"Add Filter"))}))},Pt=function(e){var t=e.project_id,a=e.filter,r=e.setFilter,n=e.yup,s=e.setEditing,o=Object(c.useRef)(!1),i=Object(c.useContext)(F);Object(c.useEffect)(function(){return o.current=!0,function(){o.current=!1}},[]);var u=n.object().shape({predicate:n.string().required("please enter a question"),inclusion_description:n.string().required("please enter the positive answer"),exclusion_description:n.string().required("please enter the neagative answer")});return l.a.createElement($.c,{initialValues:{predicate:a.data.predicate,inclusion_description:a.data.inclusion_description,exclusion_description:a.data.exclusion_description},validationSchema:u,onSubmit:function(){var e=Object(d.a)(m.a.mark(function e(n,c){var l,u,p;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=c.setSubmitting,u={predicate:n.predicate,inclusion_description:n.inclusion_description,exclusion_description:n.exclusion_description},e.next=4,Ct.putFilter(a.id,Object(A.a)({project_id:t},u));case 4:p=e.sent,o.current&&""===p?r({id:a.id,data:Object(A.a)({},u)}):o.current&&p&&p.message&&i.setError(p),o.current&&(l(!1),s(!1));case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),validateOnBlur:!1},function(e){var t=e.errors,a=e.touched,r=e.isSubmitting,n=(e.setErrors,e.validateField),c=e.handleChange;return l.a.createElement($.b,{className:"update-filter-card"},l.a.createElement("button",{type:"button",className:"close-btn",disabled:r,onClick:function(e){s(!1)}},l.a.createElement(K,null)),l.a.createElement($.a,{style:{borderBottom:t.predicate&&a.predicate?"solid 1px #d81e1e":""},name:"predicate",type:"text",placeholder:"Type a question, predicate, ...",onChange:function(e){c(e),n("predicate")}}),l.a.createElement("div",{className:"textareas-description-wrapper"},l.a.createElement("div",null,"Positive answer"),l.a.createElement("div",null,"Negative answer")),l.a.createElement("div",{className:"textareas-wrapper"},l.a.createElement($.a,{style:{borderBottom:t.inclusion_description&&a.inclusion_description?"solid 1px #d81e1e":""},name:"inclusion_description",component:"textarea",placeholder:"Type what the answer should include"}),l.a.createElement($.a,{style:{borderBottom:t.exclusion_description&&a.exclusion_description?"solid 1px #d81e1e":""},name:"exclusion_description",component:"textarea",placeholder:"Type what the answer should not include"})),l.a.createElement("button",{type:"submit",disabled:r||t.predicate&&a.predicate||t.inclusion_description&&a.inclusion_description||t.exclusion_description&&a.exclusion_description},"Update Filter"))})},It=function(e){var t=e.project_id,a=e.filter,r=e.callDelete,n=e.yup,s=Object(c.useState)(a),o=Object(f.a)(s,2),i=o[0],u=o[1],p=Object(c.useState)(!1),m=Object(f.a)(p,2),d=m[0],h=m[1],E=Object(c.useState)(!1),b=Object(f.a)(E,2),v=b[0],g=b[1];return v?l.a.createElement(Pt,{project_id:t,filter:i,setFilter:u,yup:n,setEditing:g}):l.a.createElement("div",{className:d?"disabled":""},l.a.createElement(le,{options:["delete","update"],handler:function(e,t){"delete"===t?(h(!0),r(e)):"update"===t&&g(!0)},target:i.id,cls:"card-options"}),l.a.createElement("h3",null,i.id,") ",i.data.predicate),l.a.createElement("div",{className:"answer"},l.a.createElement("p",null,l.a.createElement("span",null,l.a.createElement("span",null,"Include"),l.a.createElement("span",null,":"))," ",i.data.inclusion_description)),l.a.createElement("div",{className:"answer"},l.a.createElement("p",null,l.a.createElement("span",null,l.a.createElement("span",null,"Exclude"),l.a.createElement("span",null,":"))," ",i.data.exclusion_description)))},Tt=function(e){return l.a.createElement("svg",{version:"1.1",id:"no-filters",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("polyline",{className:"st0-no-filters",points:"927.7,149.1 948.9,123.8 915.9,123.8 \t\t"}),l.a.createElement("line",{className:"st1-no-filters",x1:"806.2",y1:"123.8",x2:"138.9",y2:"123.8"}),l.a.createElement("polyline",{className:"st0-no-filters",points:"84.1,123.8 51.1,123.8 72.3,149.1 \t\t"}),l.a.createElement("path",{className:"st2-no-filters",d:"M136.4,225.6l260.1,310.2c11.4,13.6,17.7,30.8,17.7,48.6v271.2c0,37.9,30.8,68.7,68.7,68.7h34.3 c37.9,0,68.7-30.8,68.7-68.7V584.3c0-17.8,6.3-35,17.7-48.6l292.1-348.4"}))},Bt=function(e){var t=e.filtersList,r=e.setFiltersList,n=e.project_id,s=Object(c.useRef)(!1),o=Object(c.useContext)(F),i=a(39);function u(e){return p.apply(this,arguments)}function p(){return(p=Object(d.a)(m.a.mark(function e(a){var n,c;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("deleting "+a),e.next=3,Ct.deleteFilter(a);case 3:n=e.sent,s.current&&n.message?o.setError(n):s.current&&null!==n&&(o.setNotificationMessage("Successfully deleted"),c=t.filter(function(e){return e.id!==a}),r(c));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}Object(c.useEffect)(function(){return s.current=!0,function(){s.current=!1}},[]);return 0===t.length?l.a.createElement("div",{className:"empty-list-wrapper empty-filters"}," ",l.a.createElement(Tt,null),l.a.createElement("p",{className:"empty-list-description"}," There are no filters here, you can add new ones by filling the form to the right")):l.a.createElement(l.a.Fragment,null,t.map(function(e){return l.a.createElement("div",{key:e.id,className:"generic-card filter-card"},l.a.createElement(It,{project_id:n,filter:e,filtersList:t,callDelete:u,yup:i}))}))},Ft=function(e){var t=Object(c.useState)([]),a=Object(f.a)(t,2),r=a[0],n=a[1],s=Object(c.useState)(!0),o=Object(f.a)(s,2),i=o[0],u=o[1],p=Object(c.useState)(0),h=Object(f.a)(p,2),E=h[0],b=h[1],v=Object(c.useContext)(F),g=function(e){var t=R.a.parse(e),a=t.count||10,r=t.start||0,n=t.orderBy||"date_created",c=t.sort||"ASC";return"date_created"===n&&(c="DESC"),{orderBy:n,sort:c,start:r,count:a}}(e.location.search);return Object(c.useEffect)(function(){var t=!0;return function(){var a=Object(d.a)(m.a.mark(function a(){var r;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return u(!0),a.next=3,Ct.getFiltersList(Object(A.a)({project_id:e.project_id},g));case 3:r=a.sent,console.log(r),t&&r&&"Not Found"===r.message?(n([]),b(0),u(!1)):t&&r&&r.message?v.setError(r):t&&r&&(n(r.results),b(r.totalResults),u(!1));case 6:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}()(),function(){t=!1}},[g.start,g.count,g.sort,g.orderBy]),l.a.createElement(l.a.Fragment,null,l.a.createElement(_t,{project_id:e.project_id,start:g.start,filtersList:r,setFiltersList:n}),l.a.createElement("div",{className:"left-side-wrapper filters-wrapper"},i?l.a.createElement(W,{class:"small"}):l.a.createElement(l.a.Fragment,null,l.a.createElement(Bt,{filtersList:r,setFiltersList:n,project_id:e.project_id}),l.a.createElement(Q,{start:g.start,count:g.count,totalResults:E,path:e.match.url}))))},Lt=function(e){var t=e.project_id,a=Object(c.useState)([]),r=Object(f.a)(a,2),n=r[0],s=r[1],o=Object(c.useState)(0),u=Object(f.a)(o,2),p=u[0],h=u[1],E=Object(c.useState)(!1),b=Object(f.a)(E,2),v=b[0],g=b[1],y=Object(c.useContext)(F);Object(c.useEffect)(function(){var e=!0;return function(){var a=Object(d.a)(m.a.mark(function a(){var r;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return g(!0),a.next=3,Ct.getFiltersList({project_id:t});case 3:r=a.sent,e&&r&&"Not Found"===r.message?(s([]),h(0),g(!1)):e&&r&&r.message?y.setError(r):e&&r&&(s(r.results),h(r.totalResults),g(!1));case 5:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}()(),function(){e=!1}},[]);var x="";return x=v?l.a.createElement(W,{class:"small"}):0!==p?l.a.createElement(l.a.Fragment,null,n.map(function(e){return l.a.createElement("p",{key:e.id,className:"filter-predicate"},e.data.predicate)}),l.a.createElement(i.b,{to:"/projects/"+t+"/filters"},"Go to filters details")):l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"filter-predicate"},l.a.createElement("i",null,"No filters yet in this project")),l.a.createElement(i.b,{to:"/projects/"+t+"/filters"},"Add a new filter from filters tab")),l.a.createElement("div",{className:"right-side-wrapper search-automated-right-wrapper"},l.a.createElement("div",{className:"search-automated-description"},l.a.createElement("p",null,"This searching mode leverages NLP models to find relevant papers based on the topic and focus of your project and also considers the inclusion and exclusion criteria you defined."),l.a.createElement(i.b,{to:"/projects/"+t+"/search"},"(Go back to a normal search)")),l.a.createElement("div",{className:"filters-holder"},l.a.createElement("h2",null,"Filters:"),l.a.createElement("div",{className:"side-filters-wrapper"},x)))},Mt=a(122),At=function(e){var t=e.keywords,a=e.setKeyWords,r=e.history,n=e.queryData,s=e.description,o=Object(c.useContext)(F);return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:"search-automated-form",onSubmit:function(e){if(e.preventDefault(),""===t)o.setNotificationMessage("Search query is empty");else{n.query=t;var a=ae(n);r.push(a)}}},l.a.createElement(Mt.a,{useCacheForDOMMeasurements:!0,maxRows:6,placeholder:"search",name:"query",value:t,onChange:function(e){a(e.target.value)}}),l.a.createElement("button",{type:"submit",disabled:t===s&&!n.query},l.a.createElement(Xe,null))))},qt=a(37),Rt=function(e){var t=e.project,a=e.location,r=e.match,n=e.history,s=Object(c.useRef)(!1),o=Object(c.useState)([]),i=Object(f.a)(o,2),u=i[0],p=i[1],h=Object(c.useState)(!0),E=Object(f.a)(h,2),b=E[0],v=E[1],g=Object(c.useState)(0),y=Object(f.a)(g,2),x=y[0],j=y[1],w=Object(c.useContext)(F),O=function(e){var t=R.a.parse(e);return{query:t.query||void 0,start:t.start||0,count:t.count||10}}(a.search),N=Object(c.useState)(t.data.description),k=Object(f.a)(N,2),S=k[0],C=k[1],_=window.localStorage;window.localStorage||console.log("the browser must be support localStorage");var P=Object(c.useState)([]),I=Object(f.a)(P,2),T=I[0],B=I[1];Object(c.useEffect)(function(){return s.current=!0,function(){s.current=!1}},[]),Object(c.useEffect)(function(){var e=!0;return function(){var a=Object(d.a)(m.a.mark(function a(){var r;return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return v(!1),C(O.query||t.data.description),r=void 0,a.next=5,he.searchAutomated({project_id:t.id,query:O.query,start:O.start,count:O.count});case 5:r=a.sent,console.log(r),e&&r&&"Not Found"===r.message?(p([]),j(0),v(!0)):e&&r&&r.message?w.setError(r):e&&null!==r&&(p(r.results),j(r.totalResults),v(!0));case 8:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}()(),function(){e=!1}},[O.query,O.start,O.count]);var L="";function M(e){var t,a=e.target.value,r=e.target.name;-1===re(T,"eid",a)?(t=Object(ue.a)(T)).push({eid:a,title:r}):t=T.filter(function(e){return e.eid!==a}),B(t),_.setItem("selectedPapersList",JSON.stringify(t))}function A(e){var t;if(ee(T,u,"eid")){var a=u.map(function(e){return{eid:e.eid,title:e.title}});t=T.filter(function(e){return!a.some(function(t){return t.eid===e.eid})})}else{var r=u.map(function(e){return{eid:e.eid,title:e.title}}),n=[].concat(Object(ue.a)(r),Object(ue.a)(T));t=qt.uniqBy(n,"eid")}B(t),_.setItem("selectedPapersList",JSON.stringify(t))}if(!1===b)L=l.a.createElement("div",{className:"paper-card-holder"},l.a.createElement("div",{className:"paper-card-holder-head",style:{pointerEvents:"none"}},l.a.createElement("div",{className:"select-all"},l.a.createElement(be,{label:"Select All",name:"select_all",val:"",isChecked:!1,handler:A}))),l.a.createElement("div",{className:"search-loading-holder"},l.a.createElement(W,{class:"small"})));else if(0===u.length)L=l.a.createElement("div",{className:"no-results"}," ",l.a.createElement(qe,null)," ",l.a.createElement("p",{className:"not-found-description"}," Nothing was found ")," ");else if(u.length>0){var q=T.map(function(e){return e.eid});L=l.a.createElement("div",{className:"paper-card-holder"},l.a.createElement("div",{className:"paper-card-holder-head"},l.a.createElement("div",{className:"select-all"},l.a.createElement(be,{label:"Select All",name:"select_all",val:"",isChecked:ee(T,u,"eid"),handler:A}))),l.a.createElement(Me,{project_id:t.id,selectedPapersList:T,setSelectedPapersList:B,handlePaperSelection:M,mounted:s}),l.a.createElement(Te,{papersList:u,handlePaperSelection:M,selectedEidList:q}),l.a.createElement(Q,{start:O.start,count:O.count,totalResults:x,path:r.url}))}return l.a.createElement(l.a.Fragment,null,l.a.createElement(Lt,{project_id:t.id}),l.a.createElement(At,Object.assign({keywords:S,setKeyWords:C,history:n,queryData:O},{description:t.data.description})),l.a.createElement("div",{className:"search-results"},L))},Dt=function(e){var t=e.match,a=e.notFound,r=window.location.hash.split("?")[0],n="hide";switch(!0){case/^#\/projects\/\d+\/?$/.test(r):n="20px";break;case/^#\/projects\/\d+\/filters\/?$/.test(r):n="190px";break;case/#\/projects\/\d+\/search\/?/.test(r):n="360px";break;case/^#\/projects\/\d+\/screening\/?$/.test(r):n="530px";break;default:console.log("no tab")}return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"project-nav-link-wrapper",style:{display:a||"hide"===n?"none":""}},l.a.createElement("div",{className:"nav-link"},l.a.createElement(i.b,{to:t.url},"papers")),l.a.createElement("div",{className:"nav-link"},l.a.createElement(i.b,{to:te(t.url,"/filters")},"filters")),l.a.createElement("div",{className:"nav-link"},l.a.createElement(i.b,{to:te(t.url,"/search")},"search")),l.a.createElement("div",{className:"nav-link"},l.a.createElement(i.b,{to:te(t.url,"/screening")},"screening")),l.a.createElement("div",{className:"underline",style:{left:n}})))},Xt=function(e){var t=Object(c.useState)({data:{name:"loading..."}}),a=Object(f.a)(t,2),r=a[0],n=a[1],s=Object(c.useState)([]),o=Object(f.a)(s,2),p=o[0],h=o[1],E=Object(c.useState)(!1),b=Object(f.a)(E,2),v=b[0],g=b[1],y=Object(c.useState)(!1),x=Object(f.a)(y,2),j=x[0],w=x[1],O=Object(c.useContext)(F),N=Object(c.useState)(!1),k=Object(f.a)(N,2),S=k[0],C=k[1],_=e.match.params.id;return Object(c.useEffect)(function(){"loading..."===r.data.name||"UNAUTHORIZED OR INEXISTENT PROJECTS"===r.data.name?O.setTitle(l.a.createElement("div",{className:"nav-elements"}," ",l.a.createElement("h2",{className:"static-title"},r.data.name)," ")):(O.setTitle(l.a.createElement(ft,{project:r,setProject:n})),O.setProjectName(r.data.name))},[r.data.name]),Object(c.useEffect)(function(){var e=!0;return g(!1),function(){var t=Object(d.a)(m.a.mark(function t(){var a;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y.getProject(_);case 2:a=t.sent,e&&a.payload&&(401===a.payload.statusCode||"the token does not match any user!"===a.payload.message||"empty token id in header, the user must first login!"===a.payload.message)?(C(!0),g(!0),n({data:{name:"UNAUTHORIZED OR INEXISTENT PROJECTS"}})):e&&a&&a.message?O.setError(a):e&&a&&(C(!1),n(a),g(!0));case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()(),function(){e=!1}},[_,O.user]),!1===v?l.a.createElement(W,null):S?l.a.createElement("div",{className:"forbidden-wrapper"},l.a.createElement(ht,null),l.a.createElement("p",null,"This project does not exist or maybe you are not allowed to see it")):l.a.createElement("div",{className:"project-wrapper"},l.a.createElement(Dt,{match:e.match,notFound:j}),l.a.createElement(u.c,null,l.a.createElement(u.a,{exact:!0,path:e.match.url,render:function(e){return w(!1),l.a.createElement(jt,Object.assign({project_id:_,project:r,setProject:n,collaborators:p,setCollaborators:h},e))}}),l.a.createElement(u.a,{exact:!0,path:e.match.url+"/search",render:function(e){return w(!1),l.a.createElement(Ke,Object.assign({project_id:_},e))}}),l.a.createElement(u.a,{exact:!0,path:e.match.url+"/filters",render:function(e){return w(!1),l.a.createElement(Ft,Object.assign({project_id:_,project:r},e))}}),l.a.createElement(u.a,{exact:!0,path:e.match.url+"/screening",render:function(e){return w(!1),l.a.createElement("p",null,"screening page")}}),l.a.createElement(u.a,{exact:!0,path:e.match.url+"/searchautomated",render:function(e){return w(!1),l.a.createElement(Rt,Object.assign({project:r},e))}}),l.a.createElement(u.a,{exact:!0,path:e.match.url+"/searchsimilar",render:function(e){return w(!1),l.a.createElement(ot,Object.assign({project_id:_},e))}}),l.a.createElement(u.a,{path:e.match.url+"/addpaper",render:function(e){return w(!1),l.a.createElement(l.a.Fragment,null,l.a.createElement(i.b,{className:"back",to:e.match.url.substr(0,e.match.url.length-9)},"  "),l.a.createElement(mt,{projectId:r.id,url:e.match.url,history:e.history}))}}),l.a.createElement(u.a,{render:function(e){return w(!0),l.a.createElement(bt,null)}})))},zt=function(e){var t="",a=Object(c.useContext)(F);return t=a.userFetch?l.a.createElement(W,null):a.user?l.a.createElement(u.c,null,l.a.createElement(u.a,{exact:!0,path:"/",render:function(){return l.a.createElement(M,null)}}),l.a.createElement(u.a,{exact:!0,path:"/projects",render:function(e){return l.a.createElement(ie,e)}}),l.a.createElement(u.a,{path:"/projects/:id",render:function(e){return l.a.createElement(Xt,e)}}),l.a.createElement(u.a,{render:function(e){return l.a.createElement(bt,null)}})):l.a.createElement(u.c,null,l.a.createElement(u.a,{path:"/projects/:id",render:function(e){return l.a.createElement(Xt,e)}}),l.a.createElement(u.a,{render:function(){return l.a.createElement(M,null)}})),l.a.createElement("div",{className:"main-wrapper"},t)},Ut=function(e){var t=Object(c.useContext)(F);return l.a.createElement("div",{className:"navigation-wrapper"},l.a.createElement("nav",{className:t.user?"main-nav":"main-nav nav-title-to-left"},t.title),e.children)},Ht=function(e){return l.a.createElement("svg",{version:"1.1",id:"no-image",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("g",null,l.a.createElement("path",{className:"st0-image-error",d:"M276.4,541.4c0-20.6,83.9-32.6,187.4-32.6s187.4,12,187.4,32.6"}),l.a.createElement("path",{className:"st1-image-error",d:"M339.2,554.9c32.4-5.1,76.5-7.9,125.1-7.9c48.2,0,92,2.7,124.3,7.7"}),l.a.createElement("path",{className:"st0-image-error",d:"M651.9,560.8v52.8l-0.7,0.1c0,20.6-83.9,31-187.4,31s-187.4-10.5-187.4-31l-0.6-0.1v-52.8"}),l.a.createElement("path",{className:"st0-image-error",d:"M290.4,643.2l43,257.2l0.4-0.2c0,13.7,56,20.7,125.1,20.7s125.1-7,125.1-20.7l53.5-257.1"}),l.a.createElement("g",null,l.a.createElement("path",{className:"st2-image-error",d:"M473.9,527.7c-8-4.4,135.3-110.1,166.8-164.5C560.3,392.4,503.6,455.5,473.9,527.7"}),l.a.createElement("path",{className:"st2-image-error",d:"M570.5,245.9C545.3,276,474.1,487.5,464.9,574"})),l.a.createElement("g",null,l.a.createElement("path",{className:"st3-image-error",d:"M684.6,229.2c1.7-6.1,2.8-12.3,3.2-18.5l36.3-13.4c-1.4-24-9.6-47.7-24.2-67.6L663.6,143 c-2.1-2.2-4.4-4.4-6.8-6.4c-2.4-2-4.9-3.9-7.4-5.7l6.7-38.5c-22-11.2-46.4-15.3-70-12.5l-6.7,38.5c-6,1.5-11.9,3.6-17.5,6.4 l-29.6-25.2c-9.8,6.5-18.9,14.6-26.8,24.2c-7.9,9.6-14.2,20-18.9,30.9l29.6,25.2c-1.7,6.1-2.8,12.3-3.2,18.5l-36.3,13.4 c1.4,24,9.6,47.7,24.2,67.6l36.4-13.4c2.1,2.2,4.4,4.4,6.8,6.4c2.4,2,4.9,3.9,7.4,5.7l-6.7,38.5c22,11.2,46.4,15.3,70,12.5 l6.7-38.5c6-1.5,11.9-3.6,17.5-6.4l29.6,25.2c9.8-6.5,18.9-14.6,26.8-24.2c7.9-9.6,14.2-20,18.9-30.9L684.6,229.2z"}),l.a.createElement("ellipse",{className:"st4-image-error",cx:"600.4",cy:"204.5",rx:"41.9",ry:"42.4"})),l.a.createElement("path",{className:"st0-image-error",d:"M651.2,541.4c0,20.6-83.9,31-187.4,31s-187.4-10.5-187.4-31"})))},Gt=function(e){var t=Object(c.useContext)(F),a=Object(c.useState)(!1),r=Object(f.a)(a,2),n=r[0],s=r[1],o=l.a.createElement("div",{className:"user"},l.a.createElement("h3",null,"you're not logged in")),i=l.a.createElement(l.a.Fragment,null);return i=n?l.a.createElement("div",{className:"no-face",alt:"error loading image"},l.a.createElement(Ht,null)):l.a.createElement("img",{className:"face",alt:"profile",src:t.user.image,onError:function(){s(!0)}}),t.user&&(o=l.a.createElement("div",{className:"user"},i,l.a.createElement("div",{className:"user-info"},t.user.name,l.a.createElement("br",null),t.user.surname))),o},Jt=function(e){return l.a.createElement("svg",{id:"menu-button",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},l.a.createElement("path",{className:"st0",d:"M214,482.1"}),l.a.createElement("line",{className:"st-t",x1:"172",y1:"482.1",x2:"172",y2:"482.1"}),l.a.createElement("line",{className:"st-m",x1:"500",y1:"482.1",x2:"500",y2:"482.1"}),l.a.createElement("line",{className:"st-b",x1:"828",y1:"482.1",x2:"828",y2:"482.1"}))},Vt=function(e){return h.menu_list.map(function(t,a){return l.a.createElement("div",{key:a,className:"entry-holder"},l.a.createElement(i.b,{to:t.link,className:"menu-option",onMouseUp:e.handleMenuBlur},t.content))})},Yt=function(e){var t=Object(c.useContext)(F),a=Object(c.useState)(!1),r=Object(f.a)(a,2),n=r[0],s=r[1],o=Object(c.useState)(!0),i=Object(f.a)(o,2),u=i[0],p=i[1];function h(e){s(!1)}function E(){return(E=Object(d.a)(m.a.mark(function e(a){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("logging out"),p(!0),localStorage.removeItem("userToken"),t.setUser(null);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var b="modal side-menu up",v="button-wrapper close";return u&&(b="modal side-menu"),n&&(v="button-wrapper open",b="modal side-menu down"),t.user?l.a.createElement("div",{className:"menu"},l.a.createElement(ne,{cls:n?"full-screen-transparent":"",handler:h}),l.a.createElement("div",{className:v,onClick:function(){s(!n),p(!1)}},l.a.createElement(Jt,null)),l.a.createElement("div",{className:b,tabIndex:-1},l.a.createElement(Gt,null),l.a.createElement(Vt,{handleMenuBlur:h}),l.a.createElement("div",{className:"entry-holder"},l.a.createElement("button",{type:"button",className:"menu-option",onClick:function(e){return E.apply(this,arguments)},onMouseUp:h},"Log out")))):l.a.createElement("div",{className:"menu"})},Wt=Object(u.e)(function(e){var t=Object(c.useContext)(F),a=l.a.createElement(l.a.Fragment,null);return t.user&&(a=function(){var a,r=e.location.pathname.split("/").filter(function(e){return e}),n="/",c=[];a=0===r.length?l.a.createElement("div",{key:0}):l.a.createElement(i.b,{key:0,to:n},"Home",l.a.createElement("span",null," > ")),c.push(a);for(var s=0;s<r.length;s++){if(n+="/"===n?r[s]:"/"+r[s],r[s-1]&&"projects"===r[s-1])a=l.a.createElement(i.b,{key:s+1,to:n},t.projectName);else switch(r[s]){case"projects":a=l.a.createElement(i.b,{key:s+1,to:n},"My Projects");break;case"searchsimilar":a=l.a.createElement(i.b,{key:s+1,to:n},"Search for similar papers");break;case"searchautomated":a=l.a.createElement(i.b,{key:s+1,to:n},"Intelligent papers search");break;case"search":a=l.a.createElement(i.b,{key:s+1,to:n},"Search");break;case"filters":a=l.a.createElement(i.b,{key:s+1,to:n},"Filters");break;case"screening":a=l.a.createElement(i.b,{key:s+1,to:n},"Screening");break;default:a=l.a.createElement(i.b,{key:s+1,to:n},r[s])}c.push(a),s<r.length-1&&c.push(l.a.createElement("span",{key:s+9999}," > "))}return c}()),l.a.createElement("div",{className:"relative-header"},l.a.createElement("div",{className:"breadcrumbs"},a))}),$t=function(e){var t=Object(c.useContext)(F),a=Object(c.useRef)("_"),r=l.a.createElement(l.a.Fragment,null);if(t.notificationMessage){var n=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);a.current=n,setTimeout(function(){console.log(n===a.current),t.notificationMessage&&n===a.current&&t.setNotificationMessage(void 0)},5e3),r=l.a.createElement("div",{className:"top-right-notification"},l.a.createElement("div",{className:"message-content"},t.notificationMessage),l.a.createElement("button",{type:"button",className:"close-notification-btn",onClick:function(e){t.setNotificationMessage(void 0)}},l.a.createElement(K,null)))}return r},Kt=a(121),Zt=Object(u.e)(function(e){var t=l.a.createElement(l.a.Fragment,null),a=window.localStorage,r=(e.history,Object(c.useContext)(F));function n(e){return s.apply(this,arguments)}function s(){return(s=Object(d.a)(m.a.mark(function e(t){var n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.tokenId&&(console.log(t.profileObj),n={email:t.profileObj.email,name:t.profileObj.givenName,surname:t.profileObj.familyName,image:t.profileObj.imageUrl},r.setUser(n),a.setItem("userToken",t.tokenId));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return r.userFetch||r.user||(t=l.a.createElement("div",{className:"login-holder"},l.a.createElement(Kt.GoogleLogin,{clientId:h.google_login_client_id,buttonText:"Login",onSuccess:n,onFailure:n,cookiePolicy:"single_host_origin"}))),t}),Qt=function(e){return l.a.createElement(i.a,null,l.a.createElement("div",{className:"app"},l.a.createElement(L,null,l.a.createElement(Ut,null,l.a.createElement(Yt,null)),l.a.createElement(Wt,null),l.a.createElement($t,null),l.a.createElement(zt,null),l.a.createElement(Zt,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(Qt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[123,1,2]]]);
//# sourceMappingURL=main.33c4b9b9.chunk.js.map